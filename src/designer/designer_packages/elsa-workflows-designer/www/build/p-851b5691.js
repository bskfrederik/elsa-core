import"./p-219f806a.js";import{C as t,J as s}from"./p-691e5295.js";import{s as n}from"./p-b6964c5d.js";class o{constructor(t){this.activity=t;this.parents=[];this.children=[]}get nodeId(){const t=[...this.ancestors()].reverse().map((t=>t.activity.id));return t.length?`${t.join(":")}:${this.activity.id}`:this.activity.id}get activity(){return this._activity}set activity(t){this._activity=t}get parents(){return this._parents}set parents(t){this._parents=t}get children(){return this._children}set children(t){this._children=t}descendants(){const t=[];for(let s of this.children){t.push(s);t.push(...s.descendants())}return t}ancestors(){const t=[];for(let s of this.parents){t.push(s);t.push(...s.ancestors())}return t}siblings(){return this.parents.flatMap((t=>t.children))}siblingsAndCousins(){return this.parents.flatMap((t=>t.descendants().flatMap((t=>t.children))))}}function i(t){const s={};for(const n of t)s[n.activity.id]=n.activity;return s}function r(t){const s={};for(const n of t)s[n.activity.id]=n;return s}function c(t){const s=n.activityDescriptors;const i=new Set([t]);const r=new o(t);const c=new Set([r]);a(r,t,i,c,s);return r}function e(t){return f([t])}function f(t){let s=[...t];for(const n of t){const t=f(n.children);s=[...s,...t]}return s}function a(t,s,n,i,r){const c=u(t,s,r);for(const s of c){const c=Array.from(i);let e=c.find((t=>t.activity==s.activity));if(!e){e=new o(s.activity);e.port=s.port;if(!i.has(e))i.add(e)}if(e!==t){if(!!e.activity){if(!e.parents.includes(t))e.parents.push(t);if(!t.children.includes(e))t.children.push(e);if(!n.has(s.activity))n.add(s.activity);a(e,s.activity,n,i,r)}}}}function u(n,o,i){const r=t.get(s);const c=r.get(o.type);const e=i.find((t=>t.typeName==o.type));const f=c.getOutboundPorts({activity:o,activityDescriptor:e});let a=[];const u={activityDescriptor:e,activity:o};for(const t of f){const s=c.resolvePort(t.name,u);if(Array.isArray(s)){const n=s;a=[...a,...n.map((s=>({port:t.name,activity:s})))]}else{a.push({port:t.name,activity:s})}}return a}export{o as A,r as a,f as b,i as c,e as f,c as w};
//# sourceMappingURL=p-851b5691.js.map