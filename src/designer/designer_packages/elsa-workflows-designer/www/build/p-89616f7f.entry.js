import{r as t,h as s}from"./p-a7a3baa1.js";import{l as i}from"./p-e71312f9.js";import{l as e,i as o,R as n}from"./p-691e5295.js";import{g as l}from"./p-d5f7149b.js";import"./p-72dc819a.js";import"./p-219f806a.js";import"./p-144a434e.js";import"./p-b6964c5d.js";import"./p-ddecd487.js";const r=class{constructor(s){t(this,s);this.selectList={items:[],isFlagsEnum:false};this.getSelectedValues=t=>{var s;const i=this.inputContext;const n=i.inputDescriptor;const l=e(this.inputContext);const r=n.defaultValue;const a=this.getValueOrDefault((s=l===null||l===void 0?void 0:l.expression)===null||s===void 0?void 0:s.value,r);let c=t.isFlagsEnum?parseInt(a):o(a)||[];if(c.length==0)c=o(r)||[];return c};this.onCheckChanged=t=>{const s=t.target;const e=s.checked;const o=s.value;const l=this.selectList.isFlagsEnum;let r="[]";if(l){let t=this.selectedValue;if(e)t=t|parseInt(o);else t=t&~parseInt(o);this.selectedValue=t;r=t.toString()}else{let t=this.selectedValues;if(e)t=i.uniq([...t,o]);else t=t.filter((t=>t!==o));this.selectedValues=t;r=JSON.stringify(t)}this.inputContext.inputChanged(r,n.Object)};this.onExpressionChanged=t=>{this.inputContext.inputChanged(t.detail.expression,t.detail.syntax)};this.inputContext=undefined;this.selectedValues=[];this.selectedValue=undefined}async componentWillLoad(){this.selectList=await l(this.inputContext.inputDescriptor);const t=this.getSelectedValues(this.selectList);if(Array.isArray(t))this.selectedValues=t;else if(typeof t=="number")this.selectedValue=t;else if(typeof t=="string")this.selectedValues=JSON.parse(t)}render(){var t,i,o;const n=this.inputContext;const l=n.inputDescriptor;const r=l.name;const a=l.name;const c=l.displayName;const h=l.description;const d=e(n);const p=(t=d===null||d===void 0?void 0:d.expression)===null||t===void 0?void 0:t.value;const u=(o=(i=d===null||d===void 0?void 0:d.expression)===null||i===void 0?void 0:i.type)!==null&&o!==void 0?o:l.defaultSyntax;const m=this.selectList;return s("elsa-input-control-switch",{label:c,hint:h,syntax:u,expression:p,onExpressionChanged:this.onExpressionChanged},s("div",{class:"tw-max-w-lg tw-space-y-4 tw-my-4"},m.items.map(((t,i)=>{const e=`${a}_${i}`;const o=typeof t=="string";const n=o?t:t.value;const l=o?t:t.text;const c=m.isFlagsEnum?(this.selectedValue&parseInt(n))==parseInt(n):this.selectedValues.findIndex((t=>t==n))>=0;return s("div",{class:"tw-relative tw-flex tw-items-start"},s("div",{class:"tw-flex tw-items-center tw-h-5"},s("input",{id:e,type:"checkbox",name:r,checked:c,value:n,onChange:t=>this.onCheckChanged(t),class:"focus:tw-ring-blue-500 tw-h-4 tw-w-4 tw-text-blue-600 tw-border-gray-300 tw-rounded"})),s("div",{class:"tw-ml-3 tw-text-sm"},s("label",{htmlFor:e,class:"tw-font-medium tw-text-gray-700"},l)))}))))}getValueOrDefault(t,s){var i;return(i=t!==null&&t!==void 0?t:s)!==null&&i!==void 0?i:""}};export{r as elsa_check_list_input};
//# sourceMappingURL=p-89616f7f.entry.js.map