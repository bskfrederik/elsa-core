{"version":3,"names":["DropdownButton","this","renderIcon","icon","undefined","DropdownButtonOrigin","TopLeft","render","disabled","buttonClass","theme","arrowClass","handler","_a","toggleMenu","h","Host","class","ref","el","element","type","onClick","text","xmlns","viewBox","fill","d","renderMenu","items","length","originClass","getOriginClass","contextMenu","role","renderItems","groups","groupBy","x","group","map","menuItemGroup","menuItem","selectedCssClass","isSelected","href","e","onItemClick","closeContextMenu","leave","toggle","menuOpened","emit","origin","TopRight","async","preventDefault","itemSelected","onWindowClicked","event","target","contains"],"sources":["./src/components/shared/dropdown-button/dropdown-button.tsx"],"sourcesContent":["import {Component, Event, EventEmitter, Listen, h, Prop, Host} from '@stencil/core';\nimport {leave, toggle} from 'el-transition'\nimport {groupBy, sortBy, map} from 'lodash';\nimport {DropdownButtonItem, DropdownButtonOrigin} from \"./models\";\n\n@Component({\n  tag: 'elsa-dropdown-button',\n  shadow: false,\n})\nexport class DropdownButton {\n  @Prop() public text: string;\n  @Prop() public icon?: any;\n  @Prop() public handler?: () => void;\n  @Prop() public origin: DropdownButtonOrigin = DropdownButtonOrigin.TopLeft;\n  @Prop() public items: Array<DropdownButtonItem> = [];\n  @Prop() public theme: ('Primary' | 'Secondary') = 'Primary';\n  @Prop() public disabled: boolean;\n  @Event() public itemSelected: EventEmitter<DropdownButtonItem>\n  @Event() public menuOpened: EventEmitter<void>\n\n  private contextMenu: HTMLElement;\n  private element: HTMLElement;\n\n  public render() {\n    const disabled = this.disabled;\n    const buttonClass = this.theme == 'Secondary' ? 'tw-border-gray-300 tw-bg-white tw-text-gray-700 hover:tw-bg-gray-50 focus:tw-ring-blue-500 hover:tw-border-blue-500' + (disabled==true ? ' tw-opacity-50' : '') : 'tw-border-blue-600 tw-bg-blue-600 tw-text-white hover:tw-bg-blue-700 focus:tw-ring-blue-600 hover:tw-border-blue-700' + (disabled==true ? ' tw-opacity-50' : '');\n    const arrowClass = this.theme == 'Secondary' ? 'tw-border-gray-300 tw-bg-white tw-text-gray-700 hover:tw-bg-gray-50 hover:tw-border-blue-500' + (disabled==true ? ' tw-opacity-50' : '') : 'tw-border-blue-600 tw-bg-blue-600 tw-text-white hover:tw-bg-blue-700 hover:tw-border-blue-700' + (disabled==true ? ' tw-opacity-50' : '');\n    const handler = this.handler ?? (() => this.toggleMenu());\n\n    return (\n      <Host class=\"tw-block\" ref={el => this.element = el}>\n        <span class=\"tw-relative tw-z-0 tw-inline-flex tw-shadow-sm tw-rounded-md\">\n          <button\n            type=\"button\"\n            disabled={disabled}\n                  class={`tw-relative tw-inline-flex tw-items-center tw-px-4 tw-py-2 tw-rounded-l-md tw-border tw-text-sm tw-font-medium focus:tw-z-10 focus:tw-outline-none ${buttonClass}`}\n                  onClick={handler}>\n            {this.renderIcon()}\n            {this.text}\n          </button>\n          <div class=\"-tw-ml-px tw-block\">\n            <button type=\"button\"\n              disabled={disabled}\n                    class={`tw-relative tw-inline-flex tw-items-center tw-px-2 tw-py-2 tw-rounded-r-md tw-border tw-text-sm tw-font-medium focus:tw-z-10 focus:tw-outline-none ${arrowClass}`}\n                    onClick={() => this.toggleMenu()}\n                    aria-expanded=\"true\" aria-haspopup=\"true\">\n              <svg class=\"tw-h-5 tw-w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path fill-rule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z\" clip-rule=\"evenodd\"/>\n              </svg>\n            </button>\n            {this.renderMenu()}\n          </div>\n        </span>\n      </Host>\n    );\n  }\n\n  private renderMenu() {\n    if (this.items.length == 0)\n      return;\n\n    const originClass = this.getOriginClass();\n\n    return <div ref={el => this.contextMenu = el}\n                data-transition-enter=\"tw-transition tw-ease-out tw-duration-100\"\n                data-transition-enter-start=\"tw-transform tw-opacity-0 tw-scale-95\"\n                data-transition-leave=\"tw-transition tw-ease-in tw-duration-75\"\n                data-transition-leave-start=\"tw-transform tw-opacity-100 tw-scale-100\"\n                data-transition-leave-end=\"tw-transform tw-opacity-0 tw-scale-95\"\n                class={`hidden ${originClass} tw-z-10 tw-absolute tw-mt-2 tw-w-56 tw-rounded-md tw-shadow-lg tw-bg-white tw-ring-1 tw-ring-black tw-ring-opacity-5`}>\n      <div class=\"tw-py-1\" role=\"menu\" aria-orientation=\"vertical\">\n        {this.renderItems()}\n      </div>\n    </div>;\n  }\n\n  private renderItems() {\n\n    const groups = groupBy(this.items, x => x.group ?? 0);\n\n    return <div class=\"tw-divide-y tw-divide-gray-100 focus:tw-outline-none\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"option-menu\">\n      {map(groups, menuItemGroup => {\n\n        return <div class=\"tw-py-1\" role=\"none\">\n          {menuItemGroup.map(menuItem => {\n\n            const selectedCssClass = menuItem.isSelected ? 'tw-bg-blue-600 hover:tw-bg-blue-700 tw-text-white' : 'hover:tw-bg-gray-100 tw-text-gray-700 hover:tw-text-gray-900';\n            return (\n              <div class=\"tw-py-1\" role=\"none\">\n                <a href=\"#\" onClick={e => this.onItemClick(e, menuItem)}\n                   class={`tw-block tw-px-4 tw-py-2 tw-text-sm ${selectedCssClass}`}\n                   role=\"menuitem\">\n                  {menuItem.text}\n                </a>\n              </div>);\n          })}\n\n        </div>\n      })}\n    </div>\n  }\n\n  private renderIcon = () => this.icon ? this.icon : undefined;\n\n  private closeContextMenu() {\n    if (!!this.contextMenu)\n      leave(this.contextMenu);\n  }\n\n  private toggleMenu() {\n    if (!!this.contextMenu) {\n      toggle(this.contextMenu);\n      this.menuOpened.emit();\n    }\n  }\n\n  private getOriginClass(): string {\n    switch (this.origin) {\n      case DropdownButtonOrigin.TopLeft:\n        return 'tw-left-0 tw-origin-top-left';\n      case DropdownButtonOrigin.TopRight:\n      default:\n        return 'tw-right-0 tw-origin-top-right';\n    }\n  }\n\n  private async onItemClick(e: Event, menuItem: DropdownButtonItem) {\n    e.preventDefault();\n\n    if (!!menuItem.handler)\n      menuItem.handler();\n\n    this.itemSelected.emit(menuItem);\n    this.closeContextMenu();\n  }\n\n  @Listen('click', {target: 'window'})\n  private onWindowClicked(event: Event) {\n    const target = event.target as HTMLElement;\n\n    if (!this.element.contains(target))\n      this.closeContextMenu();\n  }\n}\n"],"mappings":"0MASaA,EAAc,M,2GA6FjBC,KAAAC,WAAa,IAAMD,KAAKE,KAAOF,KAAKE,KAAOC,U,2EAzFLC,EAAqBC,Q,WACjB,G,WACA,U,wBAQ3CC,S,MACL,MAAMC,EAAWP,KAAKO,SACtB,MAAMC,EAAcR,KAAKS,OAAS,YAAc,uHAAyHF,GAAU,KAAO,iBAAmB,IAAM,wHAA0HA,GAAU,KAAO,iBAAmB,IACjX,MAAMG,EAAaV,KAAKS,OAAS,YAAc,gGAAkGF,GAAU,KAAO,iBAAmB,IAAM,iGAAmGA,GAAU,KAAO,iBAAmB,IAClU,MAAMI,GAAUC,EAAAZ,KAAKW,WAAO,MAAAC,SAAA,EAAAA,EAAA,IAAWZ,KAAKa,aAE5C,OACEC,EAACC,EAAI,CAACC,MAAM,WAAWC,IAAKC,GAAMlB,KAAKmB,QAAUD,GAC/CJ,EAAA,QAAME,MAAM,gEACVF,EAAA,UACEM,KAAK,SACLb,SAAUA,EACJS,MAAO,sJAAsJR,IAC7Ja,QAASV,GACdX,KAAKC,aACLD,KAAKsB,MAERR,EAAA,OAAKE,MAAM,sBACTF,EAAA,UAAQM,KAAK,SACXb,SAAUA,EACJS,MAAO,sJAAsJN,IAC7JW,QAAS,IAAMrB,KAAKa,aAAY,gBAClB,OAAM,gBAAe,QACzCC,EAAA,OAAKE,MAAM,gBAAgBO,MAAM,6BAA6BC,QAAQ,YAAYC,KAAK,eAAc,cAAa,QAChHX,EAAA,oBAAgB,UAAUY,EAAE,sIAAqI,YAAW,cAG/K1B,KAAK2B,e,CAORA,aACN,GAAI3B,KAAK4B,MAAMC,QAAU,EACvB,OAEF,MAAMC,EAAc9B,KAAK+B,iBAEzB,OAAOjB,EAAA,OAAKG,IAAKC,GAAMlB,KAAKgC,YAAcd,EAAE,wBACV,4CAA2C,8BACrC,wCAAuC,wBAC7C,0CAAyC,8BACnC,2CAA0C,4BAC5C,wCAC1BF,MAAO,UAAUc,0HAC3BhB,EAAA,OAAKE,MAAM,UAAUiB,KAAK,OAAM,mBAAkB,YAC/CjC,KAAKkC,e,CAKJA,cAEN,MAAMC,EAASC,UAAQpC,KAAK4B,OAAOS,IAAC,IAAAzB,EAAI,OAAAA,EAAAyB,EAAEC,SAAK,MAAA1B,SAAA,EAAAA,EAAI,CAAC,IAEpD,OAAOE,EAAA,OAAKE,MAAM,uDAAuDiB,KAAK,OAAM,mBAAkB,WAAU,kBAAiB,eAC9HM,MAAIJ,GAAQK,GAEJ1B,EAAA,OAAKE,MAAM,UAAUiB,KAAK,QAC9BO,EAAcD,KAAIE,IAEjB,MAAMC,EAAmBD,EAASE,WAAa,oDAAsD,+DACrG,OACE7B,EAAA,OAAKE,MAAM,UAAUiB,KAAK,QACxBnB,EAAA,KAAG8B,KAAK,IAAIvB,QAASwB,GAAK7C,KAAK8C,YAAYD,EAAGJ,GAC3CzB,MAAO,uCAAuC0B,IAC9CT,KAAK,YACLQ,EAASnB,MAER,O,CAUVyB,mBACN,KAAM/C,KAAKgC,YACTgB,EAAMhD,KAAKgC,Y,CAGPnB,aACN,KAAMb,KAAKgC,YAAa,CACtBiB,EAAOjD,KAAKgC,aACZhC,KAAKkD,WAAWC,M,EAIZpB,iBACN,OAAQ/B,KAAKoD,QACX,KAAKhD,EAAqBC,QACxB,MAAO,+BACT,KAAKD,EAAqBiD,SAC1B,QACE,MAAO,iC,CAILC,kBAAkBT,EAAUJ,GAClCI,EAAEU,iBAEF,KAAMd,EAAS9B,QACb8B,EAAS9B,UAEXX,KAAKwD,aAAaL,KAAKV,GACvBzC,KAAK+C,kB,CAICU,gBAAgBC,GACtB,MAAMC,EAASD,EAAMC,OAErB,IAAK3D,KAAKmB,QAAQyC,SAASD,GACzB3D,KAAK+C,kB"}