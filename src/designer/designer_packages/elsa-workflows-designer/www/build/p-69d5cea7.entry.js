import{r as t,c as e,h as s}from"./p-a7a3baa1.js";import{l as i}from"./p-e71312f9.js";import"./p-72dc819a.js";const n=class{constructor(s){t(this,s);this.valueChanged=e(this,"valueChanged",7);this.updateCurrentValues=t=>{const e=this.dropdownValues||[];let s=[];if(!!t){t.forEach((t=>{const i=typeof t=="string"?t:t.value;const n=e.find((t=>t.value==i));if(!!n)s.push(n)}))}this.currentValues=s};this.fieldName=undefined;this.fieldId=undefined;this.placeHolder="Add tag";this.values=[];this.dropdownValues=[];this.currentValues=[]}valuesChangedHandler(t){this.updateCurrentValues(t)}componentWillLoad(){this.updateCurrentValues(this.values)}async onTagSelected(t){t.preventDefault();const e=t.target;const s={text:e.options[e.selectedIndex].text.trim(),value:e.value};if(s.value.length==0)return;const n=i.uniq([...this.currentValues,s]);e.value="Add";await this.valueChanged.emit(n)}async onDeleteTagClick(t,e){t.preventDefault();this.currentValues=this.currentValues.filter((t=>t.value!==e.value));await this.valueChanged.emit(this.currentValues)}render(){let t=this.currentValues||[];let e=this.dropdownValues.filter((e=>t.findIndex((t=>t.value===e.value))<0));if(!Array.isArray(t))t=[];const i=JSON.stringify(t.map((t=>t.value)));return s("div",{class:"tw-py-2 tw-px-3 tw-bg-white tw-shadow-sm tw-border tw-border-gray-300 tw-rounded-md"},t.map((t=>s("a",{href:"#",onClick:e=>this.onDeleteTagClick(e,t),class:"tw-inline-block tw-text-xs tw-bg-blue-400 tw-text-white tw-py-2 tw-px-3 tw-mr-1 tw-mb-1 tw-rounded"},s("input",{type:"hidden",value:t.value}),s("span",null,t.text),s("span",{class:"tw-text-white hover:tw-text-white tw-ml-1"},"Ã—")))),s("select",{id:this.fieldId,class:"tw-inline-block tw-text-xs tw-py-2 tw-px-3 tw-mr-1 tw-mb-1 tw-pr-8 tw-border-gray-300 focus:tw-outline-none focus:tw-ring-blue-500 focus:tw-border-blue-500 tw-rounded",onChange:t=>this.onTagSelected(t)},s("option",{value:"Add",disabled:true,selected:true},this.placeHolder),e.map((t=>s("option",{value:t.value},t.text)))),s("input",{type:"hidden",name:this.fieldName,value:i}))}static get watchers(){return{values:["valuesChangedHandler"]}}};export{n as elsa_input_tags_dropdown};
//# sourceMappingURL=p-69d5cea7.entry.js.map