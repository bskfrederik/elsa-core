{"version":3,"names":["getComponentClosestLanguage","element","closestElement","closest","console","log","lang","getComponentClosestBasePath","attributes","value","fetchLocaleStringsForComponent","componentName","locale","basePath","Promise","resolve","reject","fetch","then","result","ok","json","async","getLocaleComponentStrings","tagName","toLowerCase","componentLanguage","strings","e","warn"],"sources":["./src/utils/locale.ts"],"sourcesContent":["function getComponentClosestLanguage(element: HTMLElement): string {\n  let closestElement = element.closest('[lang]') as HTMLElement;\n  console.log(closestElement)\n  return closestElement ? closestElement.lang : 'en';\n}\n\nfunction getComponentClosestBasePath(element: HTMLElement): string {\n  let closestElement = element.closest('[basePath]') as HTMLElement;\n  console.log(closestElement.attributes['basePath'].value)\n  return closestElement ? closestElement.attributes['basePath'].value : '';\n}\n\n\nfunction fetchLocaleStringsForComponent(componentName: string, locale: string, basePath: string): Promise<any> {\n  return new Promise((resolve, reject): void => {\n    fetch(`${basePath}${componentName}.i18n.${locale}.json`)\n    .then((result) => {\n      if (result.ok) resolve(result.json());\n      else reject();\n    }, () => reject());\n  });\n}\n\n\nexport async function getLocaleComponentStrings(element: HTMLElement): Promise<any> {\n  let componentName = element.tagName.toLowerCase();\n  let componentLanguage = getComponentClosestLanguage(element);\n  let basePath = getComponentClosestBasePath(element);\n  let strings;\n  try {\n    strings = await fetchLocaleStringsForComponent(componentName, componentLanguage, basePath);\n  } catch (e) {\n    console.warn(`no locale for ${componentName} (${componentLanguage}) loading default locale en.`);\n    strings = await fetchLocaleStringsForComponent(componentName, 'en', basePath);\n  }\n  return strings;\n}\n"],"mappings":"AAAA,SAASA,EAA4BC,GACnC,IAAIC,EAAiBD,EAAQE,QAAQ,UACrCC,QAAQC,IAAIH,GACZ,OAAOA,EAAiBA,EAAeI,KAAO,IAChD,CAEA,SAASC,EAA4BN,GACnC,IAAIC,EAAiBD,EAAQE,QAAQ,cACrCC,QAAQC,IAAIH,EAAeM,WAAW,YAAYC,OAClD,OAAOP,EAAiBA,EAAeM,WAAW,YAAYC,MAAQ,EACxE,CAGA,SAASC,EAA+BC,EAAuBC,EAAgBC,GAC7E,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3BC,MAAM,GAAGJ,IAAWF,UAAsBC,UACzCM,MAAMC,IACL,GAAIA,EAAOC,GAAIL,EAAQI,EAAOE,aACzBL,GAAQ,IACZ,IAAMA,KAAS,GAEtB,CAGOM,eAAeC,EAA0BtB,GAC9C,IAAIU,EAAgBV,EAAQuB,QAAQC,cACpC,IAAIC,EAAoB1B,EAA4BC,GACpD,IAAIY,EAAWN,EAA4BN,GAC3C,IAAI0B,EACJ,IACEA,QAAgBjB,EAA+BC,EAAee,EAAmBb,E,CACjF,MAAOe,GACPxB,QAAQyB,KAAK,iBAAiBlB,MAAkBe,iCAChDC,QAAgBjB,EAA+BC,EAAe,KAAME,E,CAEtE,OAAOc,CACT,Q"}