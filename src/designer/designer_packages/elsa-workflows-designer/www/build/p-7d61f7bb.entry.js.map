{"version":3,"names":["ContextConsumer","constructor","hostRef","this","context","renderer","connectedCallback","subscribe","unsubscribe","el","disconnectedCallback","render","Object","assign","SyntaxSelectorIcon","h","class","width","height","viewBox","stroke","fill","d","cx","cy","r","x1","y1","x2","y2","InputControlSwitch","shouldRenderMonaco","syntax","supportedSyntaxes","find","x","renderContextMenuButton","renderEditor","selectedSyntax","monacoLanguage","mapSyntaxToLanguage","value","expression","showMonaco","expressionEditorClass","defaultEditorClass","language","codeEditorHeight","codeEditorSingleLineMode","onValueChanged","e","onExpressionChangedDebounced","detail","ref","monacoEditor","Hint","text","hint","SyntaxNames","Literal","debounce","onExpressionChanged","onWindowClicked","event","target","contextMenuWidget","contains","closeContextMenu","async","currentExpression","elsaClient","Container","get","ElsaClientProvider","getElsaClient","workflowDefinitionId","activityTypeName","activityType","propertyName","typeDefinitions","scripting","javaScriptApi","getTypeDefinitions","libUri","addJavaScriptLib","hideLabel","renderContextMenuWidget","renderLabel","fieldId","fieldName","fieldLabel","label","htmlFor","length","undefined","advancedButtonClass","type","onClick","onSettingsClick","isReadOnly","contextMenu","role","selectSyntax","href","map","toggleContextMenu","toggle","openContextMenu","enter","leave","selectDefaultEditor","preventDefault","syntaxChanged","emit","expressionChanged","InputControlSwitchContextState","injectProps","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","apply","__generator","body","_","sent","t","trys","ops","f","y","g","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","pop","push","E_CANCELED","Error","Semaphore","_value","_cancelError","_weightedQueues","_weightedWaiters","prototype","acquire","weight","_this","concat","_dispatch","runExclusive","callback","_a","release","_b","waitForUnlock","isLocked","getValue","setValue","cancel","forEach","queue","entry","queueEntry","shift","previousValue","previousWeight","_newReleaser","_drainUnlockWaiters","called","waiter","Mutex","cancelError","_semaphore","releaser","win","window","require","EditorVariables","isInitialized","mutex","initializeMonacoWorker","libPath","monaco","isNullOrWhitespace","startTime","Date","now","timeout","checkForMonaco","requestAnimationFrame","origin","document","location","baseUrl","startsWith","config","paths","vs","MonacoEnvironment","getWorkerUrl","proxy","URL","createObjectURL","Blob","registerLiquid","registerSql","languages","register","id","registerCompletionItemProvider","provideCompletionItems","autocompleteProviderItems","keywords","i","kind","CompletionItemKind","Keyword","suggestions","triggerCharacters","model","position","getWordUntilPosition","variable","variableName","Variable","insertText","monacoEditorCss","ElsaMonaco","newValue","editor","getModel","getMonaco","setModelLanguage","libSource","typescript","javascriptDefaults","setExtraLibs","filePath","content","oldModel","dispose","createModel","Uri","parse","matches","matchAll","splice","match","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","setCompilerOptions","ScriptTarget","ES2020","lib","allowNonTsExtensions","setEagerModelSync","defaultOptions","fontFamily","renderLineHighlight","minimap","enabled","automaticLayout","lineNumbers","theme","roundedSelection","scrollBeyondLastLine","readOnly","overviewRulerLanes","overviewRulerBorder","lineDecorationsWidth","hideCursorInOverviewRuler","glyphMargin","options","singleLineMode","wordWrap","lineNumbersMinChars","folding","scrollBeyondLastColumn","scrollbar","horizontal","vertical","addExtraSpaceOnTop","autoFindInSelection","seedSearchStringFromSelection","create","container","onDidChangeModelContent","markers","getModelMarkers","owner","valueChanged","onKeyDown","keyCode","KeyCode","Enter","getContribution","state","onDidPaste","range","endLineNumber","newContent","lineCount","getLineCount","getLineContent","monacoLibPath","monacoStore","padding","Host","style","editorHeight"],"sources":["../../node_modules/@stencil/state-tunnel/dist/collection/components/state-tunnel.js","./src/components/icons/tooling/syntax-selector.tsx","./src/components/shared/input-control-switch/input-control-switch.tsx","../../node_modules/tslib/tslib.es6.js","../../node_modules/async-mutex/es6/errors.js","../../node_modules/async-mutex/es6/Semaphore.js","../../node_modules/async-mutex/es6/Mutex.js","./src/components/shared/monaco-editor/utils.ts","./src/components/shared/monaco-editor/monaco-editor.scss?tag=elsa-monaco-editor","./src/components/shared/monaco-editor/monaco-editor.tsx"],"sourcesContent":["export class ContextConsumer {\r\n    constructor() {\r\n        this.context = {};\r\n        this.renderer = () => null;\r\n    }\r\n    connectedCallback() {\r\n        if (this.subscribe != null) {\r\n            this.unsubscribe = this.subscribe(this.el, 'context');\r\n        }\r\n    }\r\n    disconnectedCallback() {\r\n        if (this.unsubscribe != null) {\r\n            this.unsubscribe();\r\n        }\r\n    }\r\n    render() {\r\n        return this.renderer(Object.assign({}, this.context));\r\n    }\r\n    static get is() { return \"context-consumer\"; }\r\n    static get properties() { return {\r\n        \"context\": {\r\n            \"type\": \"unknown\",\r\n            \"mutable\": false,\r\n            \"complexType\": {\r\n                \"original\": \"{ [key: string]: any }\",\r\n                \"resolved\": \"{ [key: string]: any; }\",\r\n                \"references\": {}\r\n            },\r\n            \"required\": false,\r\n            \"optional\": false,\r\n            \"docs\": {\r\n                \"tags\": [],\r\n                \"text\": \"\"\r\n            },\r\n            \"defaultValue\": \"{}\"\r\n        },\r\n        \"renderer\": {\r\n            \"type\": \"unknown\",\r\n            \"mutable\": false,\r\n            \"complexType\": {\r\n                \"original\": \"Function\",\r\n                \"resolved\": \"Function\",\r\n                \"references\": {\r\n                    \"Function\": {\r\n                        \"location\": \"global\"\r\n                    }\r\n                }\r\n            },\r\n            \"required\": false,\r\n            \"optional\": false,\r\n            \"docs\": {\r\n                \"tags\": [],\r\n                \"text\": \"\"\r\n            },\r\n            \"defaultValue\": \"() => null\"\r\n        },\r\n        \"subscribe\": {\r\n            \"type\": \"unknown\",\r\n            \"mutable\": false,\r\n            \"complexType\": {\r\n                \"original\": \"SubscribeCallback<any>\",\r\n                \"resolved\": \"(el: any, props: PropList<any>) => () => void\",\r\n                \"references\": {\r\n                    \"SubscribeCallback\": {\r\n                        \"location\": \"import\",\r\n                        \"path\": \"../declarations\"\r\n                    }\r\n                }\r\n            },\r\n            \"required\": false,\r\n            \"optional\": true,\r\n            \"docs\": {\r\n                \"tags\": [],\r\n                \"text\": \"\"\r\n            }\r\n        }\r\n    }; }\r\n    static get states() { return {\r\n        \"unsubscribe\": {}\r\n    }; }\r\n    static get elementRef() { return \"el\"; }\r\n}\r\n","import {FunctionalComponent, h} from \"@stencil/core\";\r\n\r\nexport const SyntaxSelectorIcon: FunctionalComponent = () =>\r\n  <svg class=\"tw-h-5 tw-w-5 tw-text-gray-400\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\"/>\r\n    <circle cx=\"12\" cy=\"12\" r=\"9\"/>\r\n    <line x1=\"8\" y1=\"12\" x2=\"8\" y2=\"12.01\"/>\r\n    <line x1=\"12\" y1=\"12\" x2=\"12\" y2=\"12.01\"/>\r\n    <line x1=\"16\" y1=\"12\" x2=\"16\" y2=\"12.01\"/>\r\n  </svg>;\r\n","import {Component, Event, EventEmitter, Listen, h, Prop, State} from '@stencil/core';\r\nimport {debounce} from 'lodash';\r\nimport {enter, leave, toggle} from 'el-transition'\r\nimport {IntellisenseContext, SyntaxNames} from \"../../../models\";\r\nimport {SyntaxSelectorIcon} from \"../../icons/tooling/syntax-selector\";\r\nimport {MonacoValueChangedArgs} from \"../monaco-editor/monaco-editor\";\r\nimport {Hint} from \"../forms/hint\";\r\nimport {mapSyntaxToLanguage} from \"../../../utils\";\r\nimport {Container} from \"typedi\";\r\nimport {ElsaClientProvider} from \"../../../services\";\r\nimport InputControlSwitchContextState from \"./state\";\r\n\r\nexport interface ExpressionChangedArs {\r\n  expression: string;\r\n  syntax: string;\r\n}\r\n\r\n@Component({\r\n  tag: 'elsa-input-control-switch',\r\n  shadow: false,\r\n})\r\nexport class InputControlSwitch {\r\n  private contextMenu: HTMLElement;\r\n  private monacoEditor: HTMLElsaMonacoEditorElement;\r\n  private contextMenuWidget: HTMLElement;\r\n  private readonly onExpressionChangedDebounced: (e: MonacoValueChangedArgs) => void;\r\n\r\n  constructor() {\r\n    this.onExpressionChangedDebounced = debounce(this.onExpressionChanged, 10);\r\n  }\r\n\r\n  // Tunneled props.\r\n  @Prop({mutable: true}) workflowDefinitionId: string;\r\n  @Prop({mutable: true}) activityType: string;\r\n  @Prop({mutable: true}) propertyName: string;\r\n\r\n  @Prop() label: string;\r\n  @Prop() hideLabel: boolean;\r\n  @Prop() hint: string;\r\n  @Prop() fieldName?: string;\r\n  @Prop() syntax?: string;\r\n  @Prop() expression?: string;\r\n  @Prop() defaultSyntax: string = SyntaxNames.Literal;\r\n  @Prop() supportedSyntaxes: Array<string> = ['JavaScript', 'Liquid']; // TODO: Get available syntaxes from server.\r\n  @Prop() isReadOnly?: boolean;\r\n  @Prop() codeEditorHeight: string = '16em';\r\n  @Prop() codeEditorSingleLineMode: boolean = false;\r\n  @Prop() context?: IntellisenseContext;\r\n\r\n  @Event() syntaxChanged: EventEmitter<string>;\r\n  @Event() expressionChanged: EventEmitter<ExpressionChangedArs>;\r\n\r\n  @State() currentExpression?: string;\r\n\r\n  @Listen('click', {target: 'window'})\r\n  private onWindowClicked(event: Event) {\r\n    const target = event.target as HTMLElement;\r\n\r\n    if (!this.contextMenuWidget || !this.contextMenuWidget.contains(target))\r\n      this.closeContextMenu();\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    this.currentExpression = this.expression;\r\n  }\r\n\r\n  async componentDidLoad() {\r\n    const elsaClient = await Container.get(ElsaClientProvider).getElsaClient();\r\n    const workflowDefinitionId = this.workflowDefinitionId;\r\n    const activityTypeName = this.activityType;\r\n    const propertyName = this.propertyName;\r\n    const typeDefinitions = await elsaClient.scripting.javaScriptApi.getTypeDefinitions({workflowDefinitionId, activityTypeName, propertyName});\r\n    const libUri = 'defaultLib:lib.es6.d.ts';\r\n    await this.monacoEditor.addJavaScriptLib(typeDefinitions, libUri);\r\n  }\r\n\r\n  render() {\r\n\r\n    if (this.hideLabel && !this.shouldRenderMonaco()) {\r\n      return <div class=\"tw-p-4\">\r\n        <div class=\"tw-flex\">\r\n          <div class=\"tw-flex-1\">\r\n            {this.renderEditor()}\r\n          </div>\r\n          {this.renderContextMenuWidget()}\r\n        </div>\r\n      </div>\r\n    }\r\n\r\n    return <div class=\"tw-p-4\">\r\n      <div class=\"tw-mb-1\">\r\n        <div class=\"tw-flex\">\r\n          <div class=\"tw-flex-1\">\r\n            {this.renderLabel()}\r\n          </div>\r\n          {this.renderContextMenuWidget()}\r\n        </div>\r\n      </div>\r\n      {this.renderEditor()}\r\n    </div>\r\n  }\r\n\r\n  private renderLabel() {\r\n    const fieldId = this.fieldName;\r\n    const fieldLabel = this.label || fieldId;\r\n\r\n    return <label htmlFor={fieldId} class=\"tw-block tw-text-sm tw-font-medium tw-text-gray-700\">\r\n      {fieldLabel}\r\n    </label>;\r\n  }\r\n\r\n  private renderContextMenuWidget() {\r\n    if (this.supportedSyntaxes.length == 0)\r\n      return undefined;\r\n\r\n    const selectedSyntax = this.syntax;\r\n    const advancedButtonClass = selectedSyntax ? 'tw-text-blue-500' : 'tw-text-gray-300'\r\n\r\n    return <div class=\"tw-relative\" ref={el => this.contextMenuWidget = el}>\r\n      <button type=\"button\" class={`tw-border-0 focus:tw-outline-none tw-text-sm ${advancedButtonClass}`} onClick={e => this.onSettingsClick(e)}>\r\n        {!this.isReadOnly ? this.renderContextMenuButton() : \"\"}\r\n      </button>\r\n      <div>\r\n        <div ref={el => this.contextMenu = el}\r\n             data-transition-enter=\"tw-transition tw-ease-out tw-duration-100\"\r\n             data-transition-enter-start=\"tw-transform tw-opacity-0 tw-scale-95\"\r\n             data-transition-enter-end=\"tw-transform tw-opacity-100 tw-scale-100\"\r\n             data-transition-leave=\"tw-transition tw-ease-in tw-duration-75\"\r\n             data-transition-leave-start=\"tw-transform tw-opacity-100 tw-scale-100\"\r\n             data-transition-leave-end=\"tw-transform tw-opacity-0 tw-scale-95\"\r\n             class=\"hidden tw-origin-top-right tw-absolute tw-right-1 tw-mt-1 tw-w-56 tw-rounded-md tw-shadow-lg tw-bg-white tw-ring-1 tw-ring-black tw-ring-opacity-5 tw-divide-y tw-divide-gray-100 focus:tw-outline-none tw-z-10\" role=\"menu\"\r\n             aria-orientation=\"vertical\"\r\n             aria-labelledby=\"options-menu\">\r\n          <div class=\"tw-py-1\" role=\"none\">\r\n            <a onClick={e => this.selectSyntax(e, null)} href=\"#\" class={`tw-block tw-px-4 tw-py-2 tw-text-sm hover:tw-bg-gray-100 hover:tw-text-gray-900 ${!selectedSyntax ? 'tw-text-blue-700' : 'tw-text-gray-700'}`} role=\"menuitem\">Default</a>\r\n          </div>\r\n          <div class=\"tw-py-1\" role=\"none\">\r\n            {this.supportedSyntaxes.map(syntax => (\r\n              <a onClick={e => this.selectSyntax(e, syntax)} href=\"#\"\r\n                 class={`tw-block tw-px-4 tw-py-2 tw-text-sm hover:tw-bg-gray-100 hover:tw-text-gray-900 ${selectedSyntax == syntax ? 'tw-text-blue-700' : 'tw-text-gray-700'}`} role=\"menuitem\">{syntax}</a>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n  private shouldRenderMonaco = () => !!this.syntax && this.syntax != 'Literal' && !!this.supportedSyntaxes.find(x => x === this.syntax)\r\n  private renderContextMenuButton = () => this.shouldRenderMonaco() ? <span>{this.syntax}</span> : <SyntaxSelectorIcon/>;\r\n\r\n  private renderEditor = () => {\r\n    const selectedSyntax = this.syntax;\r\n    const monacoLanguage = mapSyntaxToLanguage(selectedSyntax);\r\n    const value = this.expression;\r\n    const showMonaco = !!selectedSyntax && selectedSyntax != 'Literal' && !!this.supportedSyntaxes.find(x => x === selectedSyntax);\r\n    const expressionEditorClass = showMonaco ? 'tw-block' : 'hidden';\r\n    const defaultEditorClass = showMonaco ? 'hidden' : 'tw-block';\r\n\r\n    return (\r\n      <div>\r\n        <div class={expressionEditorClass}>\r\n          <elsa-monaco-editor\r\n            value={value}\r\n            language={monacoLanguage}\r\n            editor-height={this.codeEditorHeight}\r\n            single-line={this.codeEditorSingleLineMode}\r\n            onValueChanged={e => this.onExpressionChangedDebounced(e.detail)}\r\n            ref={el => this.monacoEditor = el}/>\r\n        </div>\r\n        <div class={defaultEditorClass}>\r\n          <slot/>\r\n        </div>\r\n        <Hint text={this.hint}/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private toggleContextMenu() {\r\n    toggle(this.contextMenu);\r\n  }\r\n\r\n  private openContextMenu() {\r\n    enter(this.contextMenu);\r\n  }\r\n\r\n  private closeContextMenu() {\r\n    if (!!this.contextMenu)\r\n      leave(this.contextMenu);\r\n  }\r\n\r\n  private selectDefaultEditor(e: Event) {\r\n    e.preventDefault();\r\n    this.syntax = undefined;\r\n    this.closeContextMenu();\r\n  }\r\n\r\n  private async selectSyntax(e: Event, syntax: string) {\r\n    e.preventDefault();\r\n\r\n    this.syntax = syntax;\r\n    this.syntaxChanged.emit(syntax);\r\n    this.expressionChanged.emit({expression: this.currentExpression, syntax});\r\n\r\n    this.closeContextMenu();\r\n  }\r\n\r\n  private onSettingsClick(e: Event) {\r\n    this.toggleContextMenu();\r\n  }\r\n\r\n  private onExpressionChanged(e: MonacoValueChangedArgs) {\r\n    const expression = e.value;\r\n    this.currentExpression = expression;\r\n    this.expressionChanged.emit({expression, syntax: this.syntax});\r\n  }\r\n}\r\n\r\nInputControlSwitchContextState.injectProps(InputControlSwitch, ['workflowDefinitionId', 'activityType', 'propertyName'])\r\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export var E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nexport var E_ALREADY_LOCKED = new Error('mutex already locked');\nexport var E_CANCELED = new Error('request for lock canceled');\n","import { __awaiter, __generator } from \"tslib\";\nimport { E_CANCELED } from './errors';\nvar Semaphore = /** @class */ (function () {\n    function Semaphore(_value, _cancelError) {\n        if (_cancelError === void 0) { _cancelError = E_CANCELED; }\n        this._value = _value;\n        this._cancelError = _cancelError;\n        this._weightedQueues = [];\n        this._weightedWaiters = [];\n    }\n    Semaphore.prototype.acquire = function (weight) {\n        var _this = this;\n        if (weight === void 0) { weight = 1; }\n        if (weight <= 0)\n            throw new Error(\"invalid weight \".concat(weight, \": must be positive\"));\n        return new Promise(function (resolve, reject) {\n            if (!_this._weightedQueues[weight - 1])\n                _this._weightedQueues[weight - 1] = [];\n            _this._weightedQueues[weight - 1].push({ resolve: resolve, reject: reject });\n            _this._dispatch();\n        });\n    };\n    Semaphore.prototype.runExclusive = function (callback, weight) {\n        if (weight === void 0) { weight = 1; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, value, release;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.acquire(weight)];\n                    case 1:\n                        _a = _b.sent(), value = _a[0], release = _a[1];\n                        _b.label = 2;\n                    case 2:\n                        _b.trys.push([2, , 4, 5]);\n                        return [4 /*yield*/, callback(value)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        release();\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Semaphore.prototype.waitForUnlock = function (weight) {\n        var _this = this;\n        if (weight === void 0) { weight = 1; }\n        if (weight <= 0)\n            throw new Error(\"invalid weight \".concat(weight, \": must be positive\"));\n        return new Promise(function (resolve) {\n            if (!_this._weightedWaiters[weight - 1])\n                _this._weightedWaiters[weight - 1] = [];\n            _this._weightedWaiters[weight - 1].push(resolve);\n            _this._dispatch();\n        });\n    };\n    Semaphore.prototype.isLocked = function () {\n        return this._value <= 0;\n    };\n    Semaphore.prototype.getValue = function () {\n        return this._value;\n    };\n    Semaphore.prototype.setValue = function (value) {\n        this._value = value;\n        this._dispatch();\n    };\n    Semaphore.prototype.release = function (weight) {\n        if (weight === void 0) { weight = 1; }\n        if (weight <= 0)\n            throw new Error(\"invalid weight \".concat(weight, \": must be positive\"));\n        this._value += weight;\n        this._dispatch();\n    };\n    Semaphore.prototype.cancel = function () {\n        var _this = this;\n        this._weightedQueues.forEach(function (queue) { return queue.forEach(function (entry) { return entry.reject(_this._cancelError); }); });\n        this._weightedQueues = [];\n    };\n    Semaphore.prototype._dispatch = function () {\n        var _a;\n        for (var weight = this._value; weight > 0; weight--) {\n            var queueEntry = (_a = this._weightedQueues[weight - 1]) === null || _a === void 0 ? void 0 : _a.shift();\n            if (!queueEntry)\n                continue;\n            var previousValue = this._value;\n            var previousWeight = weight;\n            this._value -= weight;\n            weight = this._value + 1;\n            queueEntry.resolve([previousValue, this._newReleaser(previousWeight)]);\n        }\n        this._drainUnlockWaiters();\n    };\n    Semaphore.prototype._newReleaser = function (weight) {\n        var _this = this;\n        var called = false;\n        return function () {\n            if (called)\n                return;\n            called = true;\n            _this.release(weight);\n        };\n    };\n    Semaphore.prototype._drainUnlockWaiters = function () {\n        for (var weight = this._value; weight > 0; weight--) {\n            if (!this._weightedWaiters[weight - 1])\n                continue;\n            this._weightedWaiters[weight - 1].forEach(function (waiter) { return waiter(); });\n            this._weightedWaiters[weight - 1] = [];\n        }\n    };\n    return Semaphore;\n}());\nexport default Semaphore;\n","import { __awaiter, __generator } from \"tslib\";\nimport Semaphore from './Semaphore';\nvar Mutex = /** @class */ (function () {\n    function Mutex(cancelError) {\n        this._semaphore = new Semaphore(1, cancelError);\n    }\n    Mutex.prototype.acquire = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, releaser;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._semaphore.acquire()];\n                    case 1:\n                        _a = _b.sent(), releaser = _a[1];\n                        return [2 /*return*/, releaser];\n                }\n            });\n        });\n    };\n    Mutex.prototype.runExclusive = function (callback) {\n        return this._semaphore.runExclusive(function () { return callback(); });\n    };\n    Mutex.prototype.isLocked = function () {\n        return this._semaphore.isLocked();\n    };\n    Mutex.prototype.waitForUnlock = function () {\n        return this._semaphore.waitForUnlock();\n    };\n    Mutex.prototype.release = function () {\n        if (this._semaphore.isLocked())\n            this._semaphore.release();\n    };\n    Mutex.prototype.cancel = function () {\n        return this._semaphore.cancel();\n    };\n    return Mutex;\n}());\nexport default Mutex;\n","﻿import {Mutex} from \"async-mutex\";\r\nimport {isNullOrWhitespace} from \"../../../utils\";\r\n\r\nconst win = window as any;\r\nconst require = win.require;\r\n\r\nexport interface Monaco {\r\n  editor: any;\r\n  languages: any;\r\n  KeyCode: any;\r\n  Uri: any;\r\n}\r\n\r\nexport interface EditorVariable {\r\n  variableName: string;\r\n  type: string;\r\n}\r\n\r\nexport var EditorVariables: Array<EditorVariable> = [];\r\n\r\nlet isInitialized: boolean;\r\nconst mutex = new Mutex();\r\n\r\nexport async function initializeMonacoWorker(libPath?: string): Promise<Monaco> {\r\n\r\n  return await mutex.runExclusive(async () => {\r\n\r\n    if (isInitialized) {\r\n      return win.monaco;\r\n    }\r\n\r\n    if (isNullOrWhitespace(libPath)) {\r\n      // The lib path is not set, which means external code will be responsible for loading the Monaco editor.\r\n      // In this case, spin while we wait for the editor to be loaded.\r\n\r\n      // Create a promise that will resolve after the win.monaco variable exists. Do this in a tight loop, checking for win.monaco to exist on each iteration. Within the same iteration, request the next animation frame as to not tw-block the UI.\r\n      // If we don't get win.monaco after 3 seconds, reject the promise.\r\n\r\n      return new Promise<Monaco>((resolve, reject) => {\r\n        const startTime = Date.now();\r\n        const timeout = 3000;\r\n\r\n        const checkForMonaco = () => {\r\n          if (win.monaco) {\r\n            resolve(win.monaco);\r\n            return;\r\n          }\r\n\r\n          if (Date.now() - startTime > timeout) {\r\n            reject('Monaco editor not loaded.');\r\n            return;\r\n          }\r\n\r\n          requestAnimationFrame(checkForMonaco);\r\n        };\r\n\r\n        checkForMonaco();\r\n      });\r\n\r\n    }\r\n\r\n    const origin = document.location.origin;\r\n    const baseUrl = libPath.startsWith('http') ? libPath : `${origin}/${libPath}`;\r\n\r\n    require.config({paths: {'vs': `${baseUrl}/vs`}});\r\n    win.MonacoEnvironment = {getWorkerUrl: () => proxy};\r\n\r\n    let proxy = URL.createObjectURL(new Blob([`\r\n\tself.MonacoEnvironment = {\r\n\t\tbaseUrl: '${baseUrl}'\r\n\t};\r\n\timportScripts('${baseUrl}/vs/base/worker/workerMain.js');\r\n`], {type: 'text/javascript'}));\r\n\r\n    return new Promise(resolve => {\r\n      require([\"vs/editor/editor.main\"], () => {\r\n        isInitialized = true;\r\n        registerLiquid(win.monaco);\r\n        registerSql(win.monaco);\r\n        resolve(win.monaco);\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\nfunction registerLiquid(monaco: any) {\r\n  monaco.languages.register({id: 'liquid'});\r\n\r\n  monaco.languages.registerCompletionItemProvider('liquid', {\r\n    provideCompletionItems: () => {\r\n      const autocompleteProviderItems = [];\r\n      const keywords = ['assign', 'capture', 'endcapture', 'increment', 'decrement',\r\n        'if', 'else', 'elsif', 'endif', 'for', 'endfor', 'break',\r\n        'continue', 'limit', 'offset', 'range', 'reversed', 'cols',\r\n        'case', 'endcase', 'when', 'tw-block', 'endblock', 'true', 'false',\r\n        'in', 'unless', 'endunless', 'cycle', 'tablerow', 'endtablerow',\r\n        'contains', 'startswith', 'endswith', 'comment', 'endcomment',\r\n        'raw', 'endraw', 'editable', 'endentitylist', 'endentityview', 'endinclude',\r\n        'endmarker', 'entitylist', 'entityview', 'forloop', 'image', 'include',\r\n        'marker', 'outputcache', 'plugin', 'style', 'text', 'widget',\r\n        'abs', 'append', 'at_least', 'at_most', 'capitalize', 'ceil', 'compact',\r\n        'concat', 'date', 'default', 'divided_by', 'downcase', 'escape',\r\n        'escape_once', 'first', 'floor', 'join', 'last', 'lstrip', 'map',\r\n        'minus', 'modulo', 'newline_to_br', 'plus', 'prepend', 'remove',\r\n        'remove_first', 'replace', 'replace_first', 'reverse', 'round',\r\n        'rstrip', 'size', 'slice', 'sort', 'sort_natural', 'split', 'strip',\r\n        'strip_html', 'strip_newlines', 'times', 'truncate', 'truncatewords',\r\n        'uniq', 'upcase', 'url_decode', 'url_encode'];\r\n\r\n      for (let i = 0; i < keywords.length; i++) {\r\n        autocompleteProviderItems.push({'label': keywords[i], kind: monaco.languages.CompletionItemKind.Keyword});\r\n      }\r\n\r\n      return {suggestions: autocompleteProviderItems};\r\n    }\r\n  });\r\n}\r\n\r\nfunction registerSql(monaco: any) {\r\n\r\n  monaco.languages.registerCompletionItemProvider('sql', {\r\n    triggerCharacters: [\"@\"],\r\n    provideCompletionItems: (model, position) => {\r\n\r\n      const word = model.getWordUntilPosition(position)\r\n\r\n      const autocompleteProviderItems = [];\r\n      for (const variable of EditorVariables) {\r\n        autocompleteProviderItems.push({\r\n          label: `${variable.variableName}: ${variable.type}`,\r\n          kind: monaco.languages.CompletionItemKind.Variable,\r\n          insertText: variable.variableName\r\n        });\r\n      }\r\n\r\n      return {suggestions: autocompleteProviderItems};\r\n    }\r\n  });\r\n\r\n}\r\n\r\n",".monaco-editor-host {\r\n  display: block;\r\n  position: relative;\r\n  min-height: 12em;\r\n}\r\n\r\n.monaco-editor-container {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100% !important;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.monaco-editor {\r\n  border-radius: 0.25rem;\r\n}\r\n\r\n.monaco-editor .overflow-guard {\r\n  border-radius: 0.25rem;\r\n}\r\n\r\n.monaco-editor .suggest-widget div.tree {\r\n  white-space: unset;\r\n  padding-bottom: 0;\r\n}\r\n","import { Component, Event, EventEmitter, h, Host, Method, Prop, Watch } from '@stencil/core';\r\nimport { initializeMonacoWorker, Monaco, EditorVariables } from \"./utils\";\r\nimport monacoStore from '../../../data/monaco-store';\r\n\r\nexport interface MonacoValueChangedArgs {\r\n  value: string;\r\n  markers: Array<any>;\r\n}\r\n\r\n@Component({\r\n  tag: 'elsa-monaco-editor',\r\n  styleUrl: 'monaco-editor.scss',\r\n  shadow: false\r\n})\r\nexport class ElsaMonaco {\r\n  private monaco: Monaco;\r\n\r\n  @Prop({ attribute: 'editor-height', reflect: true }) editorHeight: string = '5em';\r\n  @Prop() value: string;\r\n  @Prop() language: string;\r\n  @Prop({ attribute: 'single-line', reflect: true }) singleLineMode: boolean = false;\r\n  @Prop() padding: string;\r\n  @Event({ eventName: 'valueChanged' }) valueChanged: EventEmitter<MonacoValueChangedArgs>;\r\n\r\n  container: HTMLElement;\r\n  editor: any;\r\n\r\n  @Watch('language')\r\n  async languageChangeHandler(newValue: string) {\r\n    if (!this.editor)\r\n      return;\r\n\r\n    const model = this.editor.getModel();\r\n    const monaco = await this.getMonaco();\r\n    monaco.editor.setModelLanguage(model, this.language);\r\n  }\r\n\r\n  @Method()\r\n  async setValue(value: string) {\r\n    if (!this.editor)\r\n      return;\r\n\r\n    const model = this.editor.getModel();\r\n    model.setValue(value || '');\r\n  }\r\n\r\n  @Method()\r\n  async addJavaScriptLib(libSource: string, libUri: string) {\r\n    const monaco = await this.getMonaco();\r\n\r\n    monaco.languages.typescript.javascriptDefaults.setExtraLibs([{\r\n      filePath: \"lib.es5.d.ts\"\r\n    }, {\r\n      content: libSource,\r\n      filePath: libUri\r\n    }]);\r\n\r\n    const oldModel = monaco.editor.getModel(libUri);\r\n\r\n    if (oldModel)\r\n      oldModel.dispose();\r\n\r\n    const newModel = monaco.editor.createModel(libSource, 'typescript', monaco.Uri.parse(libUri));\r\n    const matches = libSource.matchAll(/declare const (\\w+): (string|number)/g);\r\n\r\n    EditorVariables.splice(0, EditorVariables.length);\r\n\r\n    for(const match of matches) {\r\n      EditorVariables.push({variableName: match[1], type: match[2] });\r\n    }\r\n  }\r\n\r\n  async componentDidLoad() {\r\n    const monaco = await this.getMonaco();\r\n    const language = this.language;\r\n\r\n    // Validation settings.\r\n    monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\r\n      noSemanticValidation: true,\r\n      noSyntaxValidation: false,\r\n    });\r\n\r\n    // Compiler options.\r\n    monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\r\n      target: monaco.languages.typescript.ScriptTarget.ES2020,\r\n      lib: [],\r\n      allowNonTsExtensions: true\r\n    });\r\n\r\n    monaco.languages.typescript.javascriptDefaults.setEagerModelSync(true);\r\n\r\n    const defaultOptions = {\r\n      value: this.value,\r\n      language: language,\r\n      fontFamily: \"Roboto Mono, monospace\",\r\n      renderLineHighlight: 'none',\r\n      minimap: {\r\n        enabled: false\r\n      },\r\n      automaticLayout: true,\r\n      lineNumbers: \"on\",\r\n      theme: \"vs\",\r\n      roundedSelection: true,\r\n      scrollBeyondLastLine: false,\r\n      readOnly: false,\r\n      overviewRulerLanes: 0,\r\n      overviewRulerBorder: false,\r\n      lineDecorationsWidth: 0,\r\n      hideCursorInOverviewRuler: true,\r\n      glyphMargin: false\r\n    };\r\n\r\n    let options = defaultOptions;\r\n\r\n    if (this.singleLineMode) {\r\n      options = {\r\n        ...defaultOptions, ...{\r\n          wordWrap: 'off',\r\n          lineNumbers: 'off',\r\n          lineNumbersMinChars: 0,\r\n          folding: false,\r\n          scrollBeyondLastColumn: 0,\r\n          scrollbar: { horizontal: 'hidden', vertical: 'hidden' },\r\n          find: { addExtraSpaceOnTop: false, autoFindInSelection: 'never', seedSearchStringFromSelection: false },\r\n        }\r\n      }\r\n    }\r\n\r\n    this.editor = monaco.editor.create(this.container, options);\r\n\r\n    this.editor.onDidChangeModelContent(e => {\r\n      const value = this.editor.getValue();\r\n      const markers = monaco.editor.getModelMarkers({ owner: language });\r\n      this.valueChanged.emit({ value: value, markers: markers });\r\n    });\r\n\r\n    if (this.singleLineMode) {\r\n      this.editor.onKeyDown(e => {\r\n        if (e.keyCode == monaco.KeyCode.Enter) {\r\n          // We only prevent enter when the suggest model is not active\r\n          if (this.editor.getContribution('editor.contrib.suggestController').model.state == 0) {\r\n            e.preventDefault();\r\n          }\r\n        }\r\n      });\r\n\r\n      this.editor.onDidPaste(e => {\r\n        if (e.range.endLineNumber > 1) {\r\n          let newContent = \"\";\r\n          const model = this.editor.getModel();\r\n          let lineCount = model.getLineCount();\r\n          for (let i = 0; i < lineCount; i++) {\r\n            newContent += model.getLineContent(i + 1);\r\n          }\r\n          model.setValue(newContent);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private async getMonaco() {\r\n    if(!!this.monaco)\r\n      return this.monaco;\r\n\r\n    const monacoLibPath = monacoStore.monacoLibPath;\r\n    return this.monaco = await initializeMonacoWorker(monacoLibPath);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    const editor = this.editor;\r\n\r\n    if (!!editor)\r\n      editor.dispose();\r\n  }\r\n\r\n  render() {\r\n    const padding = this.padding || 'tw-pt-1.5 tw-pl-1';\r\n    return (\r\n      <Host\r\n        class=\"monaco-editor-host tw-border focus:tw-ring-blue-500 focus:tw-border-blue-500 tw-block tw-w-full tw-min-w-0 tw-rounded-md sm:tw-text-sm tw-border-gray-300 tw-p-4\"\r\n        style={{ 'min-height': this.editorHeight }}>\r\n        <div ref={el => this.container = el} class={`monaco-editor-container ${padding}`} />\r\n      </Host>\r\n    )\r\n  }\r\n}\r\n"],"mappings":"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"}