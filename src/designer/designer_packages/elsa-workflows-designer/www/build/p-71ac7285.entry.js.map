{"version":3,"names":["VariablesViewer","async","this","strings","getLocaleComponentStrings","element","render","variables","storageDrivers","descriptorsStore","h","class","scope","variablesTabName","variablesTabValue","variablesTabType","variablesTabStorage","map","variable","storage","find","x","typeName","storageDriverTypeName","storageName","_a","displayName","descriptor","variableDescriptors","typeDisplayName","_b","variableValue","getVariableValue","name","workflowInstance","persistentVariables","properties","PersistentVariablesDictionary","key","id"],"sources":["./src/modules/workflow-definitions/components/workflow-properties/variables-viewer.tsx"],"sourcesContent":["import {Component, Element, h, Prop, } from \"@stencil/core\";\nimport {StorageDriverDescriptor, Variable, WorkflowInstance} from \"../../../../models\";\nimport descriptorsStore from \"../../../../data/descriptors-store\";\nimport {WorkflowDefinition} from \"../../models/entities\";\nimport { getLocaleComponentStrings } from \"../../../../utils/locale\";\n\n@Component({\n  tag: 'elsa-variables-viewer',\n  shadow: false\n})\nexport class VariablesViewer {\n\n  @Prop() variables?: Array<Variable>;\n  @Prop() workflowDefinition: WorkflowDefinition;\n  @Prop() workflowInstance: WorkflowInstance;\n\n  @Element() element: HTMLElement;\n  strings!: any;\n\n  async componentWillLoad() {\n    this.strings = await getLocaleComponentStrings(this.element);\n  }\n\n\n  render() {\n    const variables = this.variables;\n    const storageDrivers: Array<StorageDriverDescriptor> = descriptorsStore.storageDrivers;\n\n    return (\n      <div>\n        <div class=\"tw-align-middle tw-inline-block tw-min-w-full tw-border-b tw-border-gray-200\">\n          <table class=\"default-table\">\n            <thead>\n            <tr>\n              <th scope=\"col\">{this.strings.variablesTabName}</th>\n              <th scope=\"col\">{this.strings.variablesTabValue}</th>\n              <th scope=\"col\">{this.strings.variablesTabType}</th>\n              <th scope=\"col\">{this.strings.variablesTabStorage}</th>\n            </tr>\n            </thead>\n            <tbody>\n            {variables.map(variable => {\n                const storage = storageDrivers.find(x => x.typeName == variable.storageDriverTypeName);\n                const storageName = storage?.displayName ?? '-';\n                const descriptor = descriptorsStore.variableDescriptors.find(x => x.typeName == variable.typeName);\n                const typeDisplayName = descriptor?.displayName ?? variable.typeName;\n                const variableValue = this.getVariableValue(variable, storage);\n\n                return (\n                  <tr>\n                    <td class=\"tw-whitespace-nowrap\">{variable.name}</td>\n                    <td class=\"tw-whitespace-nowrap\">{typeDisplayName}</td>\n                    <td>{storageName}</td>\n                    <td class=\"tw-pr-6\">{variableValue}</td>\n                  </tr>);\n              }\n            )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n\n  private getVariableValue(variable: Variable, storage: StorageDriverDescriptor) : any {\n    if(storage?.typeName !== 'Elsa.Workflows.Core.Implementations.WorkflowStorageDriver, Elsa.Workflows.Core')\n      return null;\n\n    const workflowInstance = this.workflowInstance;\n    const persistentVariables = workflowInstance.properties.PersistentVariablesDictionary;\n    const key = `${workflowInstance.id}:Workflow1:${variable.name}`;\n    return persistentVariables[key];\n  }\n}\n"],"mappings":"wJAUaA,EAAe,M,oHAS1BC,0BACEC,KAAKC,cAAgBC,EAA0BF,KAAKG,Q,CAItDC,SACE,MAAMC,EAAYL,KAAKK,UACvB,MAAMC,EAAiDC,EAAiBD,eAExE,OACEE,EAAA,WACEA,EAAA,OAAKC,MAAM,gFACTD,EAAA,SAAOC,MAAM,iBACXD,EAAA,aACAA,EAAA,UACEA,EAAA,MAAIE,MAAM,OAAOV,KAAKC,QAAQU,kBAC9BH,EAAA,MAAIE,MAAM,OAAOV,KAAKC,QAAQW,mBAC9BJ,EAAA,MAAIE,MAAM,OAAOV,KAAKC,QAAQY,kBAC9BL,EAAA,MAAIE,MAAM,OAAOV,KAAKC,QAAQa,uBAGhCN,EAAA,aACCH,EAAUU,KAAIC,I,QACX,MAAMC,EAAUX,EAAeY,MAAKC,GAAKA,EAAEC,UAAYJ,EAASK,wBAChE,MAAMC,GAAcC,EAAAN,IAAO,MAAPA,SAAO,SAAPA,EAASO,eAAW,MAAAD,SAAA,EAAAA,EAAI,IAC5C,MAAME,EAAalB,EAAiBmB,oBAAoBR,MAAKC,GAAKA,EAAEC,UAAYJ,EAASI,WACzF,MAAMO,GAAkBC,EAAAH,IAAU,MAAVA,SAAU,SAAVA,EAAYD,eAAW,MAAAI,SAAA,EAAAA,EAAIZ,EAASI,SAC5D,MAAMS,EAAgB7B,KAAK8B,iBAAiBd,EAAUC,GAEtD,OACET,EAAA,UACEA,EAAA,MAAIC,MAAM,wBAAwBO,EAASe,MAC3CvB,EAAA,MAAIC,MAAM,wBAAwBkB,GAClCnB,EAAA,UAAKc,GACLd,EAAA,MAAIC,MAAM,WAAWoB,GAClB,O,CAUbC,iBAAiBd,EAAoBC,GAC3C,IAAGA,IAAO,MAAPA,SAAO,SAAPA,EAASG,YAAa,iFACvB,OAAO,KAET,MAAMY,EAAmBhC,KAAKgC,iBAC9B,MAAMC,EAAsBD,EAAiBE,WAAWC,8BACxD,MAAMC,EAAM,GAAGJ,EAAiBK,gBAAgBrB,EAASe,OACzD,OAAOE,EAAoBG,E"}