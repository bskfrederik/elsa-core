{"version":3,"names":["PublishButton","onPublishClick","this","publishClicked","emit","begin","publishing","complete","onUnPublishClick","unPublishClicked","async","exportClicked","importClicked","publishingIcon","h","class","xmlns","fill","viewBox","cx","cy","r","stroke","d","render","items","text","handler","onExportClick","group","onImportClick","mainItem","disabled","icon","onMenuOpened","NotificationService","hideAllNotifications"],"sources":["./src/modules/workflow-definitions/components/publish-button.tsx"],"sourcesContent":["import {Component, Event, EventEmitter, h, Prop} from '@stencil/core';\r\nimport {DropdownButtonItem} from \"../../../components/shared/dropdown-button/models\";\r\nimport NotificationService from \"../../notifications/notification-service\";\r\n\r\nexport interface PublishClickedArgs {\r\n  begin: () => void;\r\n  complete: () => void;\r\n}\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-publish-button',\r\n  shadow: false,\r\n})\r\nexport class PublishButton {\r\n\r\n  @Prop() publishing: boolean;\r\n  @Prop() disabled: boolean;\r\n  @Event({bubbles: true}) newClicked: EventEmitter;\r\n  @Event({bubbles: true}) publishClicked: EventEmitter<PublishClickedArgs>;\r\n  @Event({bubbles: true}) unPublishClicked: EventEmitter;\r\n  @Event({bubbles: true}) exportClicked: EventEmitter;\r\n  @Event({bubbles: true}) importClicked: EventEmitter<File>;\r\n\r\n  menu: HTMLElement;\r\n  element: HTMLElement;\r\n\r\n  private onPublishClick() {\r\n    this.publishClicked.emit({\r\n      begin: () => this.publishing = true,\r\n      complete: () => this.publishing = false\r\n    });\r\n  }\r\n\r\n  private onUnPublishClick() {\r\n    this.unPublishClicked.emit();\r\n  }\r\n\r\n  private async onExportClick() {\r\n    this.exportClicked.emit();\r\n  }\r\n\r\n  private async onImportClick() {\r\n    this.importClicked.emit();\r\n  }\r\n\r\n  private publishingIcon() {\r\n    if(!this.publishing)\r\n      return null;\r\n\r\n    return <svg class=\"tw-animate-spin -tw-ml-1 tw-mr-3 tw-h-5 tw-w-5 tw-text-blue-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n      <circle class=\"tw-opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"/>\r\n      <path class=\"tw-opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"/>\r\n    </svg>;\r\n  }\r\n\r\n  render() {\r\n    const publishing = this.publishing;\r\n\r\n    const items: Array<DropdownButtonItem> = [{\r\n      text: 'Export',\r\n      handler: () => this.onExportClick(),\r\n      group: 1\r\n    },{\r\n      text: 'Import',\r\n      handler: () => this.onImportClick(),\r\n      group: 1\r\n    }, {\r\n      text: 'Unpublish',\r\n      handler: () => this.onUnPublishClick(),\r\n      group: 2\r\n    }];\r\n\r\n    const mainItem: DropdownButtonItem = {\r\n      text: publishing ? 'Publishing' : 'Publish',\r\n      handler: publishing ? () => {} : () => this.onPublishClick()\r\n    }\r\n\r\n    return <elsa-dropdown-button disabled={this.disabled} text={mainItem.text} handler={mainItem.handler} items={items} icon={this.publishingIcon()} onMenuOpened={() => NotificationService.hideAllNotifications()} />\r\n  }\r\n}\r\n"],"mappings":"oHAaaA,EAAa,M,8SAahBC,iBACNC,KAAKC,eAAeC,KAAK,CACvBC,MAAO,IAAMH,KAAKI,WAAa,KAC/BC,SAAU,IAAML,KAAKI,WAAa,O,CAI9BE,mBACNN,KAAKO,iBAAiBL,M,CAGhBM,sBACNR,KAAKS,cAAcP,M,CAGbM,sBACNR,KAAKU,cAAcR,M,CAGbS,iBACN,IAAIX,KAAKI,WACP,OAAO,KAET,OAAOQ,EAAA,OAAKC,MAAM,kEAAkEC,MAAM,6BAA6BC,KAAK,OAAOC,QAAQ,aACzIJ,EAAA,UAAQC,MAAM,gBAAgBI,GAAG,KAAKC,GAAG,KAAKC,EAAE,KAAKC,OAAO,eAAc,eAAc,MACxFR,EAAA,QAAMC,MAAM,gBAAgBE,KAAK,eAAeM,EAAE,oH,CAItDC,SACE,MAAMlB,EAAaJ,KAAKI,WAExB,MAAMmB,EAAmC,CAAC,CACxCC,KAAM,SACNC,QAAS,IAAMzB,KAAK0B,gBACpBC,MAAO,GACP,CACAH,KAAM,SACNC,QAAS,IAAMzB,KAAK4B,gBACpBD,MAAO,GACN,CACDH,KAAM,YACNC,QAAS,IAAMzB,KAAKM,mBACpBqB,MAAO,IAGT,MAAME,EAA+B,CACnCL,KAAMpB,EAAa,aAAe,UAClCqB,QAASrB,EAAa,OAAW,IAAMJ,KAAKD,kBAG9C,OAAOa,EAAA,wBAAsBkB,SAAU9B,KAAK8B,SAAUN,KAAMK,EAASL,KAAMC,QAASI,EAASJ,QAASF,MAAOA,EAAOQ,KAAM/B,KAAKW,iBAAkBqB,aAAc,IAAMC,EAAoBC,wB"}