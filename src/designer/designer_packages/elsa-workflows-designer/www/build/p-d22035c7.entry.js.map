{"version":3,"names":["ProviderCheckList","this","onSelectedProvidersChanged","e","selectedProviderTypes","detail","selectList","items","map","x","Object","assign","selected","includes","value","workflowDefinition","customProperties","WorkflowContextProviderTypesKey","workflowDefinitionChanged","emit","async","_a","selectListItems","descriptors","text","name","type","render","h","FormEntry","label","fieldId","hint","selectedValues","onSelectedValuesChanged"],"sources":["./src/modules/workflow-contexts/components/provider-check-list.tsx"],"sourcesContent":["import {Component, EventEmitter, h, Prop, State, Event} from '@stencil/core';\r\nimport {FormEntry} from \"../../../components/shared/forms/form-entry\";\r\nimport {SelectList, Type} from \"../../../models\";\r\nimport {WorkflowContextProviderDescriptor} from \"../services/api\";\r\nimport {WorkflowDefinition} from \"../../workflow-definitions/models/entities\";\r\nimport {WorkflowContextProviderTypesKey} from \"../constants\";\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-context-provider-check-list',\r\n  shadow: false\r\n})\r\nexport class ProviderCheckList {\r\n  @Prop() descriptors: Array<WorkflowContextProviderDescriptor> = [];\r\n  @Prop() workflowDefinition: WorkflowDefinition;\r\n  @Event() workflowDefinitionChanged: EventEmitter<WorkflowDefinition>;\r\n  @State() selectList: SelectList = {items: []};\r\n  @State() selectedProviderTypes: Array<Type> = [];\r\n\r\n  public async componentWillLoad() {\r\n    const workflowDefinition = this.workflowDefinition;\r\n    const selectedProviderTypes: Array<Type> = workflowDefinition?.customProperties[WorkflowContextProviderTypesKey] ?? [];\r\n    const selectListItems = this.descriptors.map(x => ({text: x.name, value: x.type}));\r\n\r\n    this.selectList = {\r\n      items: selectListItems\r\n    };\r\n\r\n    this.selectedProviderTypes = selectedProviderTypes;\r\n  }\r\n\r\n  render() {\r\n    const selectList = this.selectList;\r\n\r\n    return <FormEntry label=\"Active providers\" fieldId=\"EnabledProviders\" hint=\"Select the providers to activate for this workflow.\">\r\n      <elsa-check-list selectList={selectList} selectedValues={this.selectedProviderTypes} onSelectedValuesChanged={this.onSelectedProvidersChanged}></elsa-check-list>\r\n    </FormEntry>\r\n  }\r\n\r\n  private onSelectedProvidersChanged = (e: CustomEvent<Array<string> | number>) => {\r\n    const selectedProviderTypes = e.detail as Array<string>;\r\n    this.selectList = {items: this.selectList.items.map(x => ({...x, selected: selectedProviderTypes.includes(x.value)}))};\r\n    this.workflowDefinition.customProperties[WorkflowContextProviderTypesKey] = selectedProviderTypes;\r\n    this.workflowDefinitionChanged.emit(this.workflowDefinition);\r\n  };\r\n}\r\n"],"mappings":"wJAWaA,EAAiB,M,8FA2BpBC,KAAAC,2BAA8BC,IACpC,MAAMC,EAAwBD,EAAEE,OAChCJ,KAAKK,WAAa,CAACC,MAAON,KAAKK,WAAWC,MAAMC,KAAIC,GAACC,OAAAC,OAAAD,OAAAC,OAAA,GAASF,GAAC,CAAEG,SAAUR,EAAsBS,SAASJ,EAAEK,YAC5Gb,KAAKc,mBAAmBC,iBAAiBC,GAAmCb,EAC5EH,KAAKiB,0BAA0BC,KAAKlB,KAAKc,mBAAmB,E,iBA9BE,G,kDAG9B,CAACR,MAAO,I,2BACI,E,CAEvCa,0B,MACL,MAAML,EAAqBd,KAAKc,mBAChC,MAAMX,GAAqCiB,EAAAN,IAAkB,MAAlBA,SAAkB,SAAlBA,EAAoBC,iBAAiBC,MAAgC,MAAAI,SAAA,EAAAA,EAAI,GACpH,MAAMC,EAAkBrB,KAAKsB,YAAYf,KAAIC,IAAC,CAAMe,KAAMf,EAAEgB,KAAMX,MAAOL,EAAEiB,SAE3EzB,KAAKK,WAAa,CAChBC,MAAOe,GAGTrB,KAAKG,sBAAwBA,C,CAG/BuB,SACE,MAAMrB,EAAaL,KAAKK,WAExB,OAAOsB,EAACC,EAAS,CAACC,MAAM,mBAAmBC,QAAQ,mBAAmBC,KAAK,uDACzEJ,EAAA,mBAAiBtB,WAAYA,EAAY2B,eAAgBhC,KAAKG,sBAAuB8B,wBAAyBjC,KAAKC,6B"}