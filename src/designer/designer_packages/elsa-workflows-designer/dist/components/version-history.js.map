{"file":"version-history.js","mappings":"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","names":["moment"],"sources":["./src/components/icons/tooling/revert.tsx","./src/components/icons/tooling/published.tsx","./src/modules/workflow-definitions/components/workflow-properties/version-history.tsx"],"sourcesContent":["import {FunctionalComponent, h} from \"@stencil/core\";\r\n\r\nexport const RevertIcon: FunctionalComponent = () =>\r\n  <svg class=\"tw-h-6 tw-w-6 tw-text-gray-500\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\r\n       stroke-linejoin=\"round\">\r\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\"/>\r\n    <path d=\"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1\"/>\r\n  </svg>;\r\n","import {FunctionalComponent, h} from \"@stencil/core\";\r\n\r\nexport const PublishedIcon: FunctionalComponent = () =>\r\n  <svg class=\"tw-h-6 tw-w-6 tw-text-blue-500\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\r\n       stroke-linejoin=\"round\">\r\n    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n  </svg>;\r\n","import {Component, Element, Event, EventEmitter, h, Prop, Watch} from '@stencil/core';\nimport {Container} from \"typedi\";\nimport {EventBus} from \"../../../../services\";\nimport {WorkflowDefinition} from \"../../models/entities\";\nimport {WorkflowDefinitionsApi} from \"../../services/api\";\nimport {DeleteIcon, RevertIcon, PublishedIcon} from \"../../../../components/icons/tooling\";\nimport moment from \"moment\";\nimport {ModalDialogService, DefaultModalActions, DefaultContents, ModalType} from \"../../../../components/shared/modal-dialog\";\nimport { getLocaleComponentStrings } from '../../../../utils/locale';\n\n@Component({\n  tag: 'elsa-workflow-definition-version-history',\n})\nexport class WorkflowDefinitionVersionHistory {\n  private readonly eventBus: EventBus;\n  private readonly workflowDefinitionApi: WorkflowDefinitionsApi;\n  private readonly modalDialogService: ModalDialogService;\n\n  constructor() {\n    this.eventBus = Container.get(EventBus);\n    this.workflowDefinitionApi = Container.get(WorkflowDefinitionsApi);\n    this.modalDialogService = Container.get(ModalDialogService);\n  }\n\n  @Prop() selectedVersion: WorkflowDefinition;\n  @Prop() workflowVersions: Array<WorkflowDefinition>;\n  @Prop() serverUrl: string;\n  @Event() versionSelected: EventEmitter<WorkflowDefinition>;\n  @Event() deleteVersionClicked: EventEmitter<WorkflowDefinition>;\n  @Event() revertVersionClicked: EventEmitter<WorkflowDefinition>;\n\n  @Element() element: HTMLElement;\n  strings!: any;\n\n  async componentWillLoad() {\n    this.strings = await getLocaleComponentStrings(this.element);\n  }\n\n\n  onViewVersionClick = (e: Event, version: WorkflowDefinition) => {\n    e.preventDefault();\n    this.versionSelected.emit(version);\n  };\n\n  onDeleteVersionClick = async (e: Event, version: WorkflowDefinition) => {\n    e.preventDefault();\n    this.modalDialogService.show(\n      () => DefaultContents.Warning(\"Are you sure you want to delete this version?\"),\n      {\n        modalType: ModalType.Confirmation,\n        actions: [DefaultModalActions.Delete(() => this.deleteVersionClicked.emit(version)), DefaultModalActions.Cancel()]\n      });\n  };\n\n  onRevertVersionClick = (e: Event, version: WorkflowDefinition) => {\n    e.preventDefault();\n    this.revertVersionClicked.emit(version);\n  };\n\n  render() {\n    return (\n      <div>\n        <table>\n          <thead>\n          <tr>\n            <th/>\n            <th>{this.strings.version}</th>\n            <th>{this.strings.created}</th>\n            <th/>\n            <th/>\n          </tr>\n          </thead>\n          <tbody>\n          {this.workflowVersions.map(v => {\n              let menuItems = [];\n              menuItems.push({text: this.strings.delete, handler: e => this.onDeleteVersionClick(e, v), icon: <DeleteIcon/>});\n\n              if (!v.isLatest)\n                menuItems.push({text: this.strings.revert, handler: e => this.onRevertVersionClick(e, v), icon: <RevertIcon/>});\n\n              return (\n                <tr>\n                  <td>{v.isPublished ? <PublishedIcon/> : \"\"}</td>\n                  <td>{v.version}</td>\n                  <td>{moment(v.createdAt).format('DD-MM-YYYY HH:mm:ss')}</td>\n                  <td>\n                    <button onClick={e => this.onViewVersionClick(e, v)}\n                            type=\"button\"\n                            disabled={this.selectedVersion.version == v.version}\n                            class={this.selectedVersion.version == v.version ? \"elsa-btn elsa-btn-primary\" : \"elsa-btn elsa-btn-secondary\"}>\n                      {this.strings.view}\n                    </button>\n                  </td>\n                  <td>\n                    {v.isPublished || v.isPublished ? undefined : <elsa-context-menu menuItems={menuItems}/>}\n                  </td>\n                </tr>\n              );\n            }\n          )}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\n"],"version":3}