{"file":"activity-properties-editor.js","mappings":"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","names":["descriptorsStore","camelCase","uuid"],"sources":["./src/modules/workflow-definitions/components/activity-properties/activity-properties-editor.tsx"],"sourcesContent":["import {Component, Element, Event, EventEmitter, h, Method, Prop, State} from '@stencil/core';\nimport {camelCase} from 'lodash';\nimport {v4 as uuid} from 'uuid';\nimport {Activity, ActivityDescriptor, ActivityInput, ActivityKind, ActivityOutput, Expression, InputDescriptor, OutputDescriptor, PropertyDescriptor, TabChangedArgs, TabDefinition, Variable} from '../../../../models';\nimport {EventBus, InputDriverRegistry} from \"../../../../services\";\nimport {Container} from \"typedi\";\nimport {ActivityInputContext} from \"../../../../services/activity-input-driver\";\nimport {CheckboxFormEntry, FormEntry} from \"../../../../components/shared/forms/form-entry\";\nimport {isNullOrWhitespace} from \"../../../../utils\";\nimport descriptorsStore from \"../../../../data/descriptors-store\";\nimport {ActivityPropertyPanelEvents, ActivityUpdatedArgs, DeleteActivityRequestedArgs} from \"../../models/ui\";\nimport InputControlSwitchContextState from \"../../../../components/shared/input-control-switch/state\";\nimport {OutputDefinition} from \"../../models/entities\";\nimport {RenderActivityInputContext, RenderActivityPropsContext} from \"../models\";\nimport { getLocaleComponentStrings } from '../../../../utils/locale';\n\n@Component({\n  tag: 'elsa-activity-properties-editor',\n})\nexport class ActivityPropertiesEditor {\n  private slideOverPanel: HTMLElsaSlideOverPanelElement;\n  private renderContext: RenderActivityPropsContext;\n  private readonly inputDriverRegistry: InputDriverRegistry;\n  private readonly eventBus: EventBus;\n\n  constructor() {\n    this.inputDriverRegistry = Container.get(InputDriverRegistry);\n    this.eventBus = Container.get(EventBus);\n  }\n\n  @Prop() workflowDefinitionId: string;\n  @Prop() activity?: Activity;\n  @Prop() variables: Array<Variable> = [];\n  @Prop() outputs: Array<OutputDefinition> = [];\n  @Prop() isReadonly: boolean;\n  @Event() activityUpdated: EventEmitter<ActivityUpdatedArgs>;\n  @Event() deleteActivityRequested: EventEmitter<DeleteActivityRequestedArgs>;\n  @State() private selectedTabIndex: number = 0;\n\n  @Method()\n  async show(): Promise<void> {\n    await this.slideOverPanel.show();\n  }\n\n  @Method()\n  async hide(): Promise<void> {\n    await this.slideOverPanel.hide();\n  }\n\n  @Element() element: HTMLElement;\n  strings!: any;\n\n  async componentWillRender() {\n    this.strings = await getLocaleComponentStrings(this.element);\n    const activity = this.activity;\n    const activityDescriptor = this.findActivityDescriptor();\n    const title = activityDescriptor?.displayName ?? activityDescriptor?.typeName ?? 'Unknown Activity';\n    const inputs = this.createInputs();\n    const tabs = this.createTabs();\n\n    const onActivityChanged = () => this.activityUpdated.emit({\n      activity,\n      activityDescriptor\n    });\n\n    this.renderContext = {\n      activity,\n      activityDescriptor,\n      title,\n      inputs,\n      tabs,\n      notifyActivityChanged: () => onActivityChanged()\n    }\n\n    await this.eventBus.emit(ActivityPropertyPanelEvents.Displaying, this, this.renderContext);\n  }\n\n  render() {\n    const {activity, activityDescriptor, tabs} = this.renderContext;\n    const actions = [];\n    const mainTitle = activity.id;\n    const subTitle = activityDescriptor.displayName;\n    const selectedTabIndex = this.getSelectedTabIndex(tabs);\n\n    return (\n      <elsa-form-panel\n        isReadonly={this.isReadonly}\n        mainTitle={mainTitle}\n        subTitle={subTitle}\n        orientation=\"Landscape\"\n        tabs={tabs}\n        selectedTabIndex={selectedTabIndex}\n        onSelectedTabIndexChanged={e => this.onSelectedTabIndexChanged(e)}\n        actions={actions}/>\n    );\n  }\n\n  private getSelectedTabIndex = (tabs: Array<TabDefinition>): number => {\n    let selectedTabIndex = this.selectedTabIndex;\n\n    if (selectedTabIndex >= tabs.length)\n      selectedTabIndex = tabs.length - 1;\n\n    if (selectedTabIndex < 0)\n      selectedTabIndex = 0;\n\n    return selectedTabIndex;\n  };\n\n  private createTabs = (): Array<TabDefinition> => {\n    const activityDescriptor = this.findActivityDescriptor();\n    const isTask = activityDescriptor.kind == ActivityKind.Task;\n\n    const commonTab: TabDefinition = {\n      displayText: this.strings.generalTab,\n      order: 0,\n      content: () => this.renderCommonTab()\n    };\n\n    const inputTab: TabDefinition = {\n      displayText: this.strings.settingsTab,\n      order: 10,\n      content: () => this.renderInputTab()\n    };\n\n    const tabs = !!activityDescriptor ? [inputTab, commonTab] : [];\n\n    if (activityDescriptor.outputs.length > 0) {\n      const outputTab: TabDefinition = {\n        displayText: this.strings.outputTab,\n        order: 11,\n        content: () => this.renderOutputTab()\n      };\n\n      tabs.push(outputTab);\n    }\n\n    if (isTask) {\n      const taskTab: TabDefinition = {\n        displayText: this.strings.taskTab,\n        order: 12,\n        content: () => this.renderTaskTab()\n      };\n\n      tabs.push(taskTab);\n    }\n\n    return tabs;\n  };\n\n  private createInputs = (): Array<RenderActivityInputContext> => {\n    const activity = this.activity;\n    const activityId = activity.id;\n    const activityDescriptor = this.findActivityDescriptor();\n    const driverRegistry = this.inputDriverRegistry;\n\n    const onInputChanged = (inputDescriptor: InputDescriptor) => this.activityUpdated.emit({\n      newId: activityId,\n      originalId: activityId,\n      activity,\n      activityDescriptor\n    });\n\n    const filteredInputs = activityDescriptor.inputs.filter(x => x.isBrowsable);\n\n    return filteredInputs.map(inputDescriptor => {\n      const renderInputContext: ActivityInputContext = {\n        activity: activity,\n        activityDescriptor: activityDescriptor,\n        inputDescriptor,\n        notifyInputChanged: () => onInputChanged(inputDescriptor),\n        inputChanged: (v, s) => this.onInputPropertyEditorChanged(inputDescriptor, v, s)\n      };\n\n      const driver = driverRegistry.get(renderInputContext);\n      const workflowDefinitionId = this.workflowDefinitionId;\n      const activityType = activityDescriptor.typeName;\n      const propertyName = inputDescriptor.name;\n\n      const control =\n        <InputControlSwitchContextState.Provider state={{workflowDefinitionId, activityType, propertyName}}>\n          {driver?.renderInput(renderInputContext)}\n        </InputControlSwitchContextState.Provider>;\n\n      return {\n        inputContext: renderInputContext,\n        inputControl: control,\n      }\n    });\n  };\n\n  private findActivityDescriptor = (): ActivityDescriptor => !!this.activity ? descriptorsStore.activityDescriptors.find(x => x.typeName == this.activity.type && x.version == this.activity.version) : null;\n  private onSelectedTabIndexChanged = (e: CustomEvent<TabChangedArgs>) => this.selectedTabIndex = e.detail.selectedTabIndex\n\n  private onActivityIdChanged = (e: any) => {\n    const activity = this.activity;\n    const originalId = activity.id;\n    const inputElement = e.target as HTMLInputElement;\n    const newId = inputElement.value;\n    const activityDescriptor = this.findActivityDescriptor();\n\n    activity.id = newId;\n\n    this.activityUpdated.emit({\n      newId: newId,\n      originalId: originalId,\n      activity,\n      activityDescriptor\n    });\n  }\n\n  private onActivityDisplayTextChanged(e: any) {\n    const activity: Activity = this.activity;\n    const inputElement = e.target as HTMLInputElement;\n\n    activity.metadata = {\n      ...activity.metadata,\n      displayText: inputElement.value\n    };\n\n    this.updateActivity();\n  }\n\n  private onCanStartWorkflowChanged(e: any) {\n    const activity: Activity = this.activity;\n    const inputElement = e.target as HTMLInputElement;\n\n    activity.customProperties.canStartWorkflow = inputElement.checked;\n\n    this.updateActivity();\n  }\n\n  private onRunAsynchronouslyChanged(e: any) {\n    const activity: Activity = this.activity;\n    const inputElement = e.target as HTMLInputElement;\n\n    activity.customProperties.RunAsynchronously = inputElement.checked;\n\n    this.updateActivity();\n  }\n\n  private onInputPropertyEditorChanged = (inputDescriptor: InputDescriptor, propertyValue: any, syntax: string) => {\n    const activity = this.activity;\n    const propertyName = inputDescriptor.name;\n    const isWrapped = inputDescriptor.isWrapped;\n    const camelCasePropertyName = camelCase(propertyName);\n\n    console.log(propertyName, propertyValue, syntax)\n\n    if (isWrapped) {\n      let input: ActivityInput = activity[camelCasePropertyName];\n\n      const expression: Expression = {\n        type: syntax,\n        value: propertyValue // TODO: The \"value\" field is currently hardcoded, but we should be able to be more flexible and potentially have different fields for a given syntax.\n      };\n\n      if (!input) {\n        input = {\n          typeName: inputDescriptor.typeName,\n          memoryReference: {id: uuid()},\n          expression: expression\n        }\n      }\n\n      input.expression = expression;\n      activity[camelCasePropertyName] = input;\n\n    } else {\n      activity[camelCasePropertyName] = propertyValue;\n    }\n    this.updateActivity(propertyName);\n  }\n\n  private onOutputPropertyEditorChanged = (outputDescriptor: OutputDescriptor, outputTargetValue: string) => {\n    const activity = this.activity;\n    const propertyName = outputDescriptor.name;\n    const camelCasePropertyName = camelCase(propertyName);\n    const outputTargetValuePair = outputTargetValue.split('::');\n    const outputTargetId = outputTargetValuePair[1];\n\n    const property: ActivityOutput = {\n      typeName: outputDescriptor.typeName,\n      memoryReference: {\n        id: outputTargetId\n      }\n    }\n\n    activity[camelCasePropertyName] = property;\n\n    this.updateActivity(propertyName);\n  }\n\n  private updateActivity = (propertyName?: string, propertyDescriptor?: PropertyDescriptor) => {\n    const activityDescriptor = this.findActivityDescriptor();\n    const activity = this.activity;\n    const activityId = activity.id;\n\n    console.log(`Activity ${activityId} updated.`);\n\n    this.activityUpdated.emit({\n      newId: activityId,\n      originalId: activityId,\n      activity,\n      activityDescriptor\n    });\n  }\n\n  private renderCommonTab = () => {\n    const {activity} = this.renderContext;\n    const activityId = activity.id;\n    const displayText: string = activity.metadata?.displayText ?? '';\n    const canStartWorkflow: boolean = activity.customProperties?.canStartWorkflow ?? activity?.customProperties?.CanStartWorkflow ?? activity.canStartWorkflow ?? false;\n    const key = `${activityId}`;\n\n    return <div key={key}>\n      <FormEntry fieldId=\"ActivityId\" label={this.strings.activityId} hint={this.strings.activityHint}>\n        <input type=\"text\" name=\"ActivityId\" id=\"ActivityId\" value={activityId} onChange={e => this.onActivityIdChanged(e)}/>\n      </FormEntry>\n\n      <FormEntry fieldId=\"ActivityDisplayText\" label={this.strings.activityDisplayText} hint={this.strings.activityDisplayHint}>\n        <input type=\"text\" name=\"ActivityDisplayText\" id=\"ActivityDisplayText\" value={displayText} onChange={e => this.onActivityDisplayTextChanged(e)}/>\n      </FormEntry>\n\n      <CheckboxFormEntry fieldId=\"CanStartWorkflow\" label={this.strings.activityCanStartWorkflow} hint={this.strings.activityCanStartWorkflowHint}>\n        <input type=\"checkbox\" name=\"CanStartWorkflow\" id=\"CanStartWorkflow\" value={\"true\"} checked={canStartWorkflow} onChange={e => this.onCanStartWorkflowChanged(e)}/>\n      </CheckboxFormEntry>\n\n    </div>\n  };\n\n  private renderInputTab = () => {\n    console.log('renderInputTab');\n    const {activity, inputs} = this.renderContext;\n    const activityId = activity.id;\n    const key = `${activityId}`;\n\n    return <div key={key}>\n      {inputs.filter(x => !!x.inputControl).map(propertyContext => {\n        const key = `${activity.id}-${propertyContext.inputContext.inputDescriptor.name}`;\n        console.log(key)\n        return <div key={key}>\n          {propertyContext.inputControl}\n        </div>;\n      })}\n    </div>\n  };\n\n  private renderOutputTab = () => {\n    const {activity, activityDescriptor} = this.renderContext;\n    const outputs = activityDescriptor.outputs;\n    const outputDefinitions = this.outputs || [];\n    const variables = this.variables || [];\n    const activityId = activity.id;\n    const key = `${activityId}`;\n    const outputTargetOptions: Array<any> = [null];\n\n    if (variables.length > 0) {\n      outputTargetOptions.push({label: 'Variables', items: [...variables.map(x => ({value: x.id, name: x.name}))], kind: 'variable'});\n    }\n\n    // Disable this for now until we rework the input output handling at the engine level.\n    // if (outputDefinitions.length > 0)\n    //   outputTargetOptions.push({label: 'Outputs', items: [...outputDefinitions.map(x => ({value: x.name, name: x.name}))], kind: 'output'});\n\n    return <div key={key}>\n      {outputs.map(propertyDescriptor => {\n        const key = `${activity.id}-${propertyDescriptor.name}`;\n        const displayName = isNullOrWhitespace(propertyDescriptor.displayName) ? propertyDescriptor.name : propertyDescriptor.displayName;\n        const propertyName = camelCase(propertyDescriptor.name);\n        const propertyValue = activity[propertyName] as ActivityOutput;\n        const propertyType = propertyDescriptor.typeName;\n        const typeDescriptor = descriptorsStore.variableDescriptors.find(x => x.typeName == propertyType);\n        const propertyTypeName = typeDescriptor?.displayName ?? propertyType;\n\n        return <div key={key}>\n          <FormEntry fieldId={key} label={displayName} hint={propertyDescriptor.description}>\n\n            <div class=\"tw-relative\">\n              <select onChange={e => this.onOutputPropertyEditorChanged(propertyDescriptor, (e.currentTarget as HTMLSelectElement).value)}>\n                {outputTargetOptions.map(outputTarget => {\n                  if (!outputTarget) {\n                    return <option value=\"\" selected={!propertyValue?.memoryReference?.id}>-</option>\n                  }\n\n                  const items = outputTarget.items;\n\n                  return (\n                    <optgroup label={outputTarget.label}>\n                      {items.map(item => {\n                        const isSelected = propertyValue?.memoryReference?.id == item.value;\n                        return <option value={`${outputTarget.kind}::${item.value}`} selected={isSelected}>{item.name}</option>;\n                      })}\n                    </optgroup>);\n                })}\n              </select>\n              <div class=\"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center pr-10\">\n                <span class=\"tw-text-gray-500 sm:tw-text-sm\">{propertyTypeName}</span>\n              </div>\n            </div>\n          </FormEntry>\n        </div>;\n      })}\n    </div>\n  };\n\n  private renderTaskTab = () => {\n    const {activity} = this.renderContext;\n    const activityId = activity.id;\n    const runAsynchronously: boolean = activity.customProperties?.RunAsynchronously ?? activity.runAsynchronously ?? false;\n    const key = `${activityId}:task`;\n\n    return <div key={key}>\n      <CheckboxFormEntry fieldId=\"RunAsynchronously\" label={this.strings.taskExecuteAsynchronously} hint={this.strings.taskExecuteAsynchronouslyHint}>\n        <input type=\"checkbox\" name=\"RunAsynchronously\" id=\"RunAsynchronously\" value={\"true\"} checked={runAsynchronously} onChange={e => this.onRunAsynchronouslyChanged(e)}/>\n      </CheckboxFormEntry>\n    </div>\n  };\n}\n"],"version":3}