{"version":3,"file":"generate-activity-name.js","sourceRoot":"","sources":["../../src/utils/generate-activity-name.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,qBAAqB,EAAe,MAAM,aAAa,CAAC;AAChE,OAAO,EAAC,SAAS,EAAC,MAAM,QAAQ,CAAC;AAEjC,MAAM,qBAAqB,GAAG,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;AAEnE,MAAM,CAAC,KAAK,UAAU,0BAA0B,CAAC,UAA2B,EAAE,kBAAsC;EAClH,MAAM,YAAY,GAAG,kBAAkB,CAAC,QAAQ,CAAC;EACjD,MAAM,aAAa,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,YAAY,CAAC,CAAC,MAAM,CAAC;EAC5E,IAAI,OAAO,GAAG,aAAa,GAAG,CAAC,CAAC;EAChC,IAAI,OAAO,GAAG,qBAAqB,CAAC,MAAM,CAAC,EAAC,kBAAkB,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAC,CAAC,CAAC;EAE7F,OAAO,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,OAAO,CAAC;IAC5C,OAAO,GAAG,qBAAqB,CAAC,MAAM,CAAC,EAAC,kBAAkB,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,UAAU,EAAC,CAAC,CAAC;EAE7F,OAAO,OAAO,CAAC;AACjB,CAAC","sourcesContent":["import {Activity, ActivityDescriptor} from \"../models\";\r\nimport {ActivityNameFormatter, ActivityNode} from \"../services\";\r\nimport {Container} from \"typedi\";\r\n\r\nconst activityNameFormatter = Container.get(ActivityNameFormatter);\r\n\r\nexport async function generateUniqueActivityName(activities: Array<Activity>, activityDescriptor: ActivityDescriptor): Promise<string> {\r\n  const activityType = activityDescriptor.typeName;\r\n  const activityCount = activities.filter(x => x.type == activityType).length;\r\n  let counter = activityCount + 1;\r\n  let newName = activityNameFormatter.format({activityDescriptor, count: counter, activities});\r\n\r\n  while (!!activities.find(x => x.id == newName))\r\n    newName = activityNameFormatter.format({activityDescriptor, count: ++counter, activities});\r\n\r\n  return newName;\r\n}\r\n"]}