{"version":3,"file":"browser.js","sourceRoot":"","sources":["../../../../src/modules/workflow-instances/components/browser.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAC,SAAS,EAAE,OAAO,EAAE,KAAK,EAAgB,CAAC,EAAE,IAAI,EAAU,IAAI,EAAE,KAAK,EAAC,MAAM,eAAe,CAAC;AACpG,OAAO,CAAC,MAAM,QAAQ,CAAC;AACvB,OAAO,EAAC,MAAM,EAAC,MAAM,UAAU,CAAC;AAChC,OAAO,EAAC,MAAM,EAAc,MAAM,UAAU,CAAC;AAC7C,OAAO,EAA+B,oBAAoB,EAAC,MAAM,oCAAoC,CAAC;AACtG,OAAO,EAAC,UAAU,EAAE,cAAc,EAAC,MAAM,gCAAgC,CAAC;AAE1E,OAAO,EAAC,OAAO,EAAE,cAAc,EAAsD,cAAc,EAAE,iBAAiB,EAAC,MAAM,iBAAiB,CAAC;AAC/I,OAAO,EAAC,SAAS,EAAC,MAAM,QAAQ,CAAC;AACjC,OAAO,EAAC,sBAAsB,EAAC,MAAM,4BAA4B,CAAC;AAClE,OAAO,EAAC,iBAAiB,EAAE,+BAA+B,EAAC,MAAM,mBAAmB,CAAC;AACrF,OAAO,EAAC,eAAe,EAAC,MAAM,gBAAgB,CAAC;AAC/C,OAAO,EAAC,UAAU,EAAE,QAAQ,EAAC,MAAM,mCAAmC,CAAC;AAEvE,OAAO,EAAC,eAAe,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,SAAS,EAAC,MAAM,yCAAyC,CAAC;AAC5H,OAAO,EAAE,yBAAyB,EAAE,MAAM,uBAAuB,CAAC;AAMlE,MAAM,OAAO,uBAAuB;EAclC;IAHQ,+BAA0B,GAAqC,EAAE,CAAC;IA8KlE,sBAAiB,GAAG,KAAK,IAAI,EAAE;MACrC,IAAG,IAAI,CAAC,2BAA2B,CAAC,MAAM,IAAI,CAAC;QAC7C,OAAO;MAET,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAC1B,GAAG,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC,8DAA8D,CAAC,EAC7F;QACE,OAAO,EAAE,CAAC,mBAAmB,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE;YAC9C,MAAM,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,EAAC,mBAAmB,EAAE,IAAI,CAAC,2BAA2B,EAAC,CAAC,CAAC;YACpG,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;UACrC,CAAC,CAAC,EAAE,mBAAmB,CAAC,MAAM,EAAE,CAAC;QACjC,SAAS,EAAE,SAAS,CAAC,YAAY;OAClC,CAAC,CAAC;IACP,CAAC,CAAC;IAEM,sBAAiB,GAAG,KAAK,IAAI,EAAE;MACrC,IAAG,IAAI,CAAC,2BAA2B,CAAC,MAAM,IAAI,CAAC;QAC7C,OAAO;MAET,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAC1B,GAAG,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC,8DAA8D,CAAC,EAC7F;QACE,OAAO,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE;YAC3C,MAAM,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,EAAC,mBAAmB,EAAE,IAAI,CAAC,2BAA2B,EAAC,CAAC,CAAC;YACpG,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;UACrC,CAAC,CAAC,EAAE,mBAAmB,CAAC,MAAM,EAAE,CAAC;QACjC,SAAS,EAAE,SAAS,CAAC,YAAY;OAClC,CAAC,CAAC;IACP,CAAC,CAAC;IAEM,oBAAe,GAAG,GAAG,EAAE;MAC7B,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;MACrB,IAAI,CAAC,2BAA2B,GAAG,EAAE,CAAC;IACxC,CAAC,CAAC;IAmBM,4BAAuB,GAAG,KAAK,IAAI,EAAE;MAC3C,MAAM,cAAc,GAAmB,EAAC,WAAW,EAAE,IAAI,EAAC,CAAC;MAC3D,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,EAAC,cAAc,EAAC,CAAC,CAAC;MAC3E,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAChF,CAAC,CAAC;IAEM,sBAAiB,GAAG,GAAG,EAAE;MAC/B,MAAM,EAAC,KAAK,EAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC;MACvC,MAAM,2BAA2B,GAAG,IAAI,CAAC,2BAA2B,CAAC;MACrE,OAAO,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,2BAA2B,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;IACrF,CAAC,CAAA;IAEO,mCAA8B,GAAG,GAAG,EAAE;MAC5C,IAAI,IAAI,CAAC,iBAAiB,EAAE;QAC1B,MAAM,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,2BAA2B,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QACtH,IAAI,CAAC,iBAAiB,CAAC,aAAa,GAAG,aAAa,CAAC,MAAM,IAAI,CAAC,IAAI,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC;OACjI;IACH,CAAC,CAAA;IAEO,0BAAqB,GAAG,CAAC,SAA2C,EAAoC,EAAE;MAChH,MAAM,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;MACpD,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;IACtE,CAAC,CAAA;IAEO,aAAQ,GAAG,KAAK,EAAE,IAAY,EAAE,EAAE;MACxC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;MACvB,IAAI,CAAC,eAAe,EAAE,CAAC;MACvB,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACrC,CAAC,CAAC;IAEM,sBAAiB,GAAG,KAAK,EAAE,QAAgB,EAAE,EAAE;MACrD,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;MAChC,IAAI,CAAC,eAAe,EAAE,CAAC;MACvB,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACrC,CAAC,CAAC;IAEM,sBAAiB,GAAG,KAAK,EAAE,YAAoB,EAAE,EAAE;MACzD,IAAI,CAAC,4BAA4B,GAAG,YAAY,CAAC;MACjD,IAAI,CAAC,eAAe,EAAE,CAAC;MACvB,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACrC,CAAC,CAAC;IAEM,4BAAuB,GAAG,KAAK,EAAE,MAAsB,EAAE,EAAE;MACjE,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;MAC7B,IAAI,CAAC,eAAe,EAAE,CAAC;MACvB,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACrC,CAAC,CAAC;IAEM,+BAA0B,GAAG,KAAK,EAAE,MAAyB,EAAE,EAAE;MACvE,IAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC;MAChC,IAAI,CAAC,eAAe,EAAE,CAAC;MACvB,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACrC,CAAC,CAAC;IAEM,qBAAgB,GAAG,KAAK,EAAE,OAAgB,EAAE,EAAE;MACpD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;MACvB,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACrC,CAAC,CAAC;IAaM,4BAAuB,GAAG,KAAK,EAAE,CAAa,EAAE,gBAAyC,EAAE,EAAE;MACnG,CAAC,CAAC,cAAc,EAAE,CAAC;MACnB,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACvD,CAAC,CAAA;IAqBD,gBAAW,GAAG,KAAK,EAAE,CAAyB,EAAE,EAAE;MAChD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;MACjC,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACrC,CAAC,CAAC;;6BAxTuE,EAAC,KAAK,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,EAAC;qBACpC,EAAE;;uCAEH,EAAE;;uBAEzB,CAAC;2BACG,uBAAuB,CAAC,iBAAiB;;;;;IAblF,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;IAChE,IAAI,CAAC,sBAAsB,GAAG,SAAS,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;IACpE,IAAI,CAAC,kBAAkB,GAAG,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;GAC7D;EAoBD,KAAK,CAAC,iBAAiB;IACrB,IAAI,CAAC,OAAO,GAAG,MAAM,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC7D,IAAI,gBAAgB,GAAG,UAAU,EAAE,CAAA;IAEnC,IAAI,gBAAgB,EAAE;MACpB,iEAAiE;MACjE,+CAA+C;MAC/C,IAAI,CAAC,WAAW,GAAG,gBAAgB,CAAC,IAAI,CAAA;MACxC,IAAI,CAAC,eAAe,GAAG,gBAAgB,CAAC,QAAQ,CAAA;MAChD,IAAI,CAAC,OAAO,GAAG,gBAAgB,CAAC,OAAO,CAAA;MACvC,IAAI,CAAC,4BAA4B,GAAG,gBAAgB,CAAC,YAAY,CAAA;MACjE,IAAI,CAAC,cAAc,GAAG,gBAAgB,CAAC,MAAM,CAAA;MAC7C,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC,SAAS,CAAA;KACpD;IAED,IAAG,IAAI,CAAC,kBAAkB,IAAI,IAAI;MAChC,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC;IAE3E,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACrC,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;EACrC,CAAC;EAEM,MAAM;IACX,MAAM,0BAA0B,GAAG,IAAI,CAAC,0BAA0B,CAAC;IACnE,MAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;IACjD,MAAM,UAAU,GAAG,iBAAiB,CAAC,UAAU,CAAA;IAE/C,MAAM,WAAW,GAAgB;MAC/B,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;MACjC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ;MAC/B,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc;MAC3C,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc;MAC3C,cAAc,EAAE;QACd,gBAAgB,EAAE,IAAI,CAAC,eAAe;QACtC,QAAQ,EAAE,IAAI,CAAC,iBAAiB;QAChC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;OACrC;MACD,aAAa,EAAE;QACb,eAAe,EAAE,IAAI,CAAC,OAAO;QAC7B,QAAQ,EAAE,IAAI,CAAC,gBAAgB;QAC/B,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO;OAClC;MACD,YAAY,EAAE;QACZ,cAAc,EAAE,IAAI,CAAC,cAAc;QACnC,QAAQ,EAAE,IAAI,CAAC,uBAAuB;OACvC;MACD,eAAe,EAAE;QACf,cAAc,EAAE,IAAI,CAAC,iBAAiB;QACtC,QAAQ,EAAE,IAAI,CAAC,0BAA0B;OAC1C;MACD,cAAc,EAAE;QACd,SAAS,EAAE,0BAA0B;QACrC,4BAA4B,EAAE,IAAI,CAAC,4BAA4B;QAC/D,QAAQ,EAAE,IAAI,CAAC,iBAAiB;QAChC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY;OACxC;MACD,WAAW,EAAE,KAAK,IAAI,EAAE;QACtB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,eAAe,GAAG,uBAAuB,CAAC,iBAAiB,CAAC;QACjE,IAAI,CAAC,cAAc,GAAG,SAAS,CAAA;QAC/B,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAA;QAClC,IAAI,CAAC,OAAO,GAAG,SAAS,CAAA;QACxB,IAAI,CAAC,4BAA4B,GAAG,SAAS,CAAA;QAE7C,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;MACrC,CAAC;MACD,YAAY,EAAE,IAAI,CAAC,iBAAiB;MACpC,YAAY,EAAE,IAAI,CAAC,iBAAiB;KACrC,CAAC;IAEF,OAAO,CACL,EAAC,IAAI,IAAC,KAAK,EAAC,UAAU;MAEpB,WAAK,KAAK,EAAC,SAAS;QAClB,UAAI,KAAK,EAAC,2CAA2C,IAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAM;QAE9E,EAAC,MAAM,IAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,qBAAqB,EAAE,IAAI,CAAC,OAAO,CAAC,qBAAqB,GAAG;QAC7F,EAAC,MAAM,oBAAK,WAAW,EAAG;QAE1B,WAAK,KAAK,EAAC,8EAA8E;UACvF,aAAO,KAAK,EAAC,eAAe;YAC1B;cACA;gBACE;kBACE,aAAO,IAAI,EAAC,UAAU,EAAC,KAAK,EAAC,MAAM,EAAC,OAAO,EAAE,IAAI,CAAC,iBAAiB,EAAE,EAC9D,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,EAC7C,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,GAAG,EAAE,GAAG,CAC7C;gBACL;kBAAI,YAAM,KAAK,EAAC,YAAY,IAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAQ,CAAK;gBAC1D,cAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAM;gBACnC,cAAK,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAM;gBAChC,UAAI,KAAK,EAAC,gBAAgB,IAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAM;gBACtD,cAAK,IAAI,CAAC,OAAO,CAAC,YAAY,CAAM;gBACpC,cAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAM;gBAC9B,cAAK,IAAI,CAAC,OAAO,CAAC,OAAO,CAAM;gBAC/B,cAAK,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAM;gBAChC,aAAK,CACF,CACG;YACR,aAAO,KAAK,EAAC,4CAA4C,IACxD,iBAAiB,CAAC,KAAK,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;cAC9C,MAAM,WAAW,GAAG,iBAAiB,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;cAClE,MAAM,UAAU,GAAG,IAAI,CAAC,2BAA2B,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,gBAAgB,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;cACnG,MAAM,QAAQ,GAA8B,0BAA0B,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,gBAAgB,CAAC,YAAY,CAAC,CAAC;cAClI,MAAM,YAAY,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC;cAE3F,OAAO,CACL;gBACE;kBACE,aAAO,IAAI,EAAC,UAAU,EAAC,KAAK,EAAE,gBAAgB,CAAC,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,EAAE,gBAAgB,CAAC,GAAG,CAC9I;gBACL;kBACE,WAAK,KAAK,EAAC,iDAAiD;oBAC1D,SAAG,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,EAAE,gBAAgB,CAAC,EAAE,IAAI,EAAC,GAAG,EAAC,KAAK,EAAC,oCAAoC;sBAAC,gBAAO,gBAAgB,CAAC,EAAE,CAAQ,CAAI,CAC1J,CACH;gBAEL,cAAK,gBAAgB,CAAC,aAAa,CAAM;gBACzC,cAAK,YAAY,CAAM;gBACvB,UAAI,KAAK,EAAC,gBAAgB,IAAE,gBAAgB,CAAC,OAAO,CAAM;gBAC1D,cAAK,gBAAgB,CAAC,IAAI,CAAM;gBAChC;kBACE,WAAK,KAAK,EAAC,iDAAiD;oBAC1D,WAAK,KAAK,EAAE,sDAAsD,WAAW,EAAE,GAAG;oBAClF,gBAAO,gBAAgB,CAAC,MAAM,CAAQ,CAClC,CACH;gBACL,cAAK,eAAe,CAAC,gBAAgB,CAAC,SAAS,EAAE,GAAG,CAAC,CAAM;gBAC3D,cAAK,eAAe,CAAC,gBAAgB,CAAC,UAAU,EAAE,GAAG,CAAC,CAAM;gBAC5D,UAAI,KAAK,EAAC,SAAS;kBACjB,yBAAmB,SAAS,EAAE;sBAC5B,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,EAAE,gBAAgB,CAAC,EAAE,IAAI,EAAE,EAAC,QAAQ,OAAE,EAAC;sBAClG,EAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,gBAAgB,CAAC,EAAE,IAAI,EAAE,EAAC,UAAU,OAAE,EAAC;qBAC7F,GAAG,CACD,CACF,CACN,CAAC;YACJ,CAAC,CAAC,CACM,CACF;UACR,kBAAY,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,QAAQ,EAAE,IAAI,CAAC,eAAe,EAAE,UAAU,EAAE,UAAU,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,GAAG,CACxH,CACF,CACD,CACR,CAAC;EACJ,CAAC;EAqCO,KAAK,CAAC,qBAAqB;IAEjC,MAAM,OAAO,GAAiC;MAC5C,UAAU,EAAE,IAAI,CAAC,UAAU;MAC3B,YAAY,EAAE,IAAI,CAAC,4BAA4B;MAC/C,MAAM,EAAE,IAAI,CAAC,cAAc;MAC3B,SAAS,EAAE,IAAI,CAAC,iBAAiB;MACjC,OAAO,EAAE,IAAI,CAAC,OAAO;MACrB,cAAc,EAAE,cAAc,CAAC,UAAU;MACzC,IAAI,EAAE,IAAI,CAAC,WAAW;MACtB,QAAQ,EAAE,IAAI,CAAC,eAAe;KAC/B,CAAC;IAEF,cAAc,CAAC,OAAO,CAAC,CAAA;IACvB,IAAI,CAAC,iBAAiB,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;EACzE,CAAC;EA6DO,KAAK,CAAC,aAAa,CAAC,CAAa,EAAE,gBAAyC;IAClF,0HAA0H;IAC1H,EAAE;IACF,eAAe;IACf,YAAY;IACZ,EAAE;IAEF,MAAM,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;IACzD,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;EACrC,CAAC;EAOO,sBAAsB,CAAC,CAAQ;IACrC,MAAM,QAAQ,GAAG,CAAC,CAAC,MAA0B,CAAC;IAC9C,MAAM,SAAS,GAAG,QAAQ,CAAC,OAAO,CAAC;IACnC,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;IAClC,IAAI,CAAC,2BAA2B,GAAG,+BAA+B,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,2BAA2B,CAAC,CAAC;EAC1I,CAAC;EAEO,6BAA6B,CAAC,CAAQ,EAAE,gBAAyC;IACvF,MAAM,QAAQ,GAAG,CAAC,CAAC,MAA0B,CAAC;IAC9C,MAAM,SAAS,GAAG,QAAQ,CAAC,OAAO,CAAC;IAEnC,IAAI,SAAS;MACX,IAAI,CAAC,2BAA2B,GAAG,CAAC,GAAG,IAAI,CAAC,2BAA2B,EAAE,gBAAgB,CAAC,EAAE,CAAC,CAAC;;MAE9F,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,gBAAgB,CAAC,EAAE,CAAC,CAAC;IAE5G,IAAI,CAAC,8BAA8B,EAAE,CAAC;EACxC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAxUe,yCAAiB,GAAG,EAAE,CAAC;AACvB,qCAAa,GAAG,CAAC,CAAC;AAClB,qCAAa,GAAG,GAAG,CAAC;AACpB,kCAAU,GAAG,CAAC,CAAC","sourcesContent":["import {Component, Element, Event, EventEmitter, h, Host, Method, Prop, State} from '@stencil/core';\nimport _ from 'lodash';\nimport {Search} from \"./search\";\nimport {Filter, FilterProps} from \"./filter\";\nimport {ListWorkflowInstancesRequest, WorkflowInstancesApi} from \"../services/workflow-instances-api\";\nimport {getRequest, persistRequest} from '../services/lookup-persistence';\nimport {WorkflowDefinition, WorkflowDefinitionSummary} from \"../../workflow-definitions/models/entities\";\nimport {OrderBy, OrderDirection, PagedList, VersionOptions, WorkflowInstanceSummary, WorkflowStatus, WorkflowSubStatus} from \"../../../models\";\nimport {Container} from \"typedi\";\nimport {WorkflowDefinitionsApi} from \"../../workflow-definitions\";\nimport {getSubStatusColor, updateSelectedWorkflowInstances} from \"../services/utils\";\nimport {formatTimestamp} from \"../../../utils\";\nimport {DeleteIcon, EditIcon} from \"../../../components/icons/tooling\";\nimport {PagerData} from \"../../../components/shared/pager/pager\";\nimport {DefaultContents, DefaultModalActions, ModalDialogService, ModalType} from '../../../components/shared/modal-dialog';\nimport { getLocaleComponentStrings } from '../../../utils/locale';\n\n@Component({\n  tag: 'elsa-workflow-instance-browser',\n  shadow: false,\n})\nexport class WorkflowInstanceBrowser {\n  static readonly DEFAULT_PAGE_SIZE = 15;\n  static readonly MIN_PAGE_SIZE = 5;\n  static readonly MAX_PAGE_SIZE = 100;\n  static readonly START_PAGE = 0;\n\n  private readonly workflowInstancesApi: WorkflowInstancesApi;\n  private readonly workflowDefinitionsApi: WorkflowDefinitionsApi;\n  private readonly modalDialogService: ModalDialogService;\n\n  private selectAllCheckbox: HTMLInputElement;\n  private publishedOrLatestWorkflows: Array<WorkflowDefinitionSummary> = [];\n\n\n  constructor() {\n    this.workflowInstancesApi = Container.get(WorkflowInstancesApi);\n    this.workflowDefinitionsApi = Container.get(WorkflowDefinitionsApi);\n    this.modalDialogService = Container.get(ModalDialogService);\n  }\n\n  @Prop() workflowDefinition: WorkflowDefinition;\n  @Event() public workflowInstanceSelected: EventEmitter<WorkflowInstanceSummary>;\n  @State() private workflowInstances: PagedList<WorkflowInstanceSummary> = {items: [], totalCount: 0};\n  @State() private workflows: Array<WorkflowDefinitionSummary> = [];\n  @State() private selectAllChecked: boolean;\n  @State() private selectedWorkflowInstanceIds: Array<string> = [];\n  @State() private searchTerm?: string;\n  @State() private currentPage: number = 0;\n  @State() private currentPageSize: number = WorkflowInstanceBrowser.DEFAULT_PAGE_SIZE;\n  @State() private selectedWorkflowDefinitionId?: string;\n  @State() private selectedStatus?: WorkflowStatus;\n  @State() private selectedSubStatus?: WorkflowSubStatus;\n  @State() private orderBy?: OrderBy;\n\n\n  @Element() element: HTMLElement;\n  strings!: any;\n\n  async componentWillLoad() {\n    this.strings = await getLocaleComponentStrings(this.element);\n    var persistedRequest = getRequest()\n\n    if (persistedRequest) {\n      // TODO: Persist search term, need to bind the value to the input\n      //this.searchTerm = persistedRequest.searchTerm\n      this.currentPage = persistedRequest.page\n      this.currentPageSize = persistedRequest.pageSize\n      this.orderBy = persistedRequest.orderBy\n      this.selectedWorkflowDefinitionId = persistedRequest.definitionId\n      this.selectedStatus = persistedRequest.status\n      this.selectedSubStatus = persistedRequest.subStatus\n    }\n\n    if(this.workflowDefinition != null)\n      this.selectedWorkflowDefinitionId = this.workflowDefinition.definitionId;\n\n    await this.loadWorkflowDefinitions();\n    await this.loadWorkflowInstances();\n  }\n\n  public render() {\n    const publishedOrLatestWorkflows = this.publishedOrLatestWorkflows;\n    const workflowInstances = this.workflowInstances;\n    const totalCount = workflowInstances.totalCount\n\n    const filterProps: FilterProps = {\n      resetText: this.strings.resetText,\n      bulkText: this.strings.bulkText,\n      bulkDeleteText: this.strings.bulkDeleteText,\n      bulkCancelText: this.strings.bulkCancelText,\n      pageSizeFilter: {\n        selectedPageSize: this.currentPageSize,\n        onChange: this.onPageSizeChanged,\n        pageSizeText: this.strings.pageSizes,\n      },\n      orderByFilter: {\n        selectedOrderBy: this.orderBy,\n        onChange: this.onOrderByChanged,\n        orderByText: this.strings.orderBy,\n      },\n      statusFilter: {\n        selectedStatus: this.selectedStatus,\n        onChange: this.onWorkflowStatusChanged\n      },\n      subStatusFilter: {\n        selectedStatus: this.selectedSubStatus,\n        onChange: this.onWorkflowSubStatusChanged\n      },\n      workflowFilter: {\n        workflows: publishedOrLatestWorkflows,\n        selectedWorkflowDefinitionId: this.selectedWorkflowDefinitionId,\n        onChange: this.onWorkflowChanged,\n        workflowText: this.strings.allWorkflows\n      },\n      resetFilter: async () => {\n        this.resetPagination();\n        this.currentPageSize = WorkflowInstanceBrowser.DEFAULT_PAGE_SIZE;\n        this.selectedStatus = undefined\n        this.selectedSubStatus = undefined\n        this.orderBy = undefined\n        this.selectedWorkflowDefinitionId = undefined\n\n        await this.loadWorkflowInstances();\n      },\n      onBulkDelete: this.onDeleteManyClick,\n      onBulkCancel: this.onCancelManyClick\n    };\n\n    return (\n      <Host class=\"tw-block\">\n\n        <div class=\"tw-pt-4\">\n          <h2 class=\"tw-text-lg tw-font-medium tw-ml-4 tw-mb-2\">{this.strings.name}</h2>\n\n          <Search onSearch={this.onSearch} searchTextPlaceholder={this.strings.searchTextPlaceholder}/>\n          <Filter {...filterProps}/>\n\n          <div class=\"tw-align-middle tw-inline-block tw-min-w-full tw-border-b tw-border-gray-200\">\n            <table class=\"default-table\">\n              <thead>\n              <tr>\n                <th>\n                  <input type=\"checkbox\" value=\"true\" checked={this.getSelectAllState()}\n                         onChange={e => this.onSelectAllCheckChange(e)}\n                         ref={el => this.selectAllCheckbox = el}/>\n                </th>\n                <th><span class=\"lg:tw-pl-2\">{this.strings.id}</span></th>\n                <th>{this.strings.correlation}</th>\n                <th>{this.strings.worfklow}</th>\n                <th class=\"tw-align-right\">{this.strings.version}</th>\n                <th>{this.strings.workflowName}</th>\n                <th>{this.strings.status}</th>\n                <th>{this.strings.created}</th>\n                <th>{this.strings.finished}</th>\n                <th/>\n              </tr>\n              </thead>\n              <tbody class=\"tw-bg-white tw-divide-y tw-divide-gray-100\">\n              {workflowInstances.items.map(workflowInstance => {\n                const statusColor = getSubStatusColor(workflowInstance.subStatus);\n                const isSelected = this.selectedWorkflowInstanceIds.findIndex(x => x === workflowInstance.id) >= 0;\n                const workflow: WorkflowDefinitionSummary = publishedOrLatestWorkflows.find(x => x.definitionId == workflowInstance.definitionId);\n                const workflowName = !!workflow ? (workflow.name || 'Untitled') : '(Definition not found)';\n\n                return (\n                  <tr>\n                    <td>\n                      <input type=\"checkbox\" value={workflowInstance.id} checked={isSelected} onChange={e => this.onWorkflowInstanceCheckChange(e, workflowInstance)}/>\n                    </td>\n                    <td>\n                      <div class=\"tw-flex tw-items-center tw-space-x-3 lg:tw-pl-2\">\n                        <a onClick={e => this.onWorkflowInstanceClick(e, workflowInstance)} href=\"#\" class=\"tw-truncate hover:tw-text-gray-600\"><span>{workflowInstance.id}</span></a>\n                      </div>\n                    </td>\n\n                    <td>{workflowInstance.correlationId}</td>\n                    <td>{workflowName}</td>\n                    <td class=\"tw-align-right\">{workflowInstance.version}</td>\n                    <td>{workflowInstance.name}</td>\n                    <td>\n                      <div class=\"tw-flex tw-items-center tw-space-x-3 lg:tw-pl-2\">\n                        <div class={`tw-flex-shrink-0 tw-w-2.5 tw-h-2.5 tw-rounded-full ${statusColor}`}/>\n                        <span>{workflowInstance.status}</span>\n                      </div>\n                    </td>\n                    <td>{formatTimestamp(workflowInstance.createdAt, '-')}</td>\n                    <td>{formatTimestamp(workflowInstance.finishedAt, '-')}</td>\n                    <td class=\"tw-pr-6\">\n                      <elsa-context-menu menuItems={[\n                        {text: 'Edit', handler: e => this.onWorkflowInstanceClick(e, workflowInstance), icon: <EditIcon/>},\n                        {text: 'Delete', handler: e => this.onDeleteClick(e, workflowInstance), icon: <DeleteIcon/>}\n                      ]}/>\n                    </td>\n                  </tr>\n                );\n              })}\n              </tbody>\n            </table>\n            <elsa-pager page={this.currentPage} pageSize={this.currentPageSize} totalCount={totalCount} onPaginated={this.onPaginated}/>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n\n  private onDeleteManyClick = async () => {\n    if(this.selectedWorkflowInstanceIds.length == 0)\n      return;\n\n    this.modalDialogService.show(\n      () => DefaultContents.Warning(\"Are you sure you want to delete selected workflow instances?\"),\n      {\n        actions: [DefaultModalActions.Delete(async () => {\n          await this.workflowInstancesApi.deleteMany({workflowInstanceIds: this.selectedWorkflowInstanceIds});\n          await this.loadWorkflowInstances();\n        }), DefaultModalActions.Cancel()],\n        modalType: ModalType.Confirmation\n      });\n  };\n\n  private onCancelManyClick = async () => {\n    if(this.selectedWorkflowInstanceIds.length == 0)\n      return;\n\n    this.modalDialogService.show(\n      () => DefaultContents.Warning(\"Are you sure you want to cancel selected workflow instances?\"),\n      {\n        actions: [DefaultModalActions.Yes(async () => {\n          await this.workflowInstancesApi.cancelMany({workflowInstanceIds: this.selectedWorkflowInstanceIds});\n          await this.loadWorkflowInstances();\n        }), DefaultModalActions.Cancel()],\n        modalType: ModalType.Confirmation\n      });\n  };\n\n  private resetPagination = () => {\n    this.currentPage = 0;\n    this.selectedWorkflowInstanceIds = [];\n  };\n\n  private async loadWorkflowInstances() {\n\n    const request: ListWorkflowInstancesRequest = {\n      searchTerm: this.searchTerm,\n      definitionId: this.selectedWorkflowDefinitionId,\n      status: this.selectedStatus,\n      subStatus: this.selectedSubStatus,\n      orderBy: this.orderBy,\n      orderDirection: OrderDirection.Descending,\n      page: this.currentPage,\n      pageSize: this.currentPageSize\n    };\n\n    persistRequest(request)\n    this.workflowInstances = await this.workflowInstancesApi.list(request);\n  }\n\n  private loadWorkflowDefinitions = async () => {\n    const versionOptions: VersionOptions = {allVersions: true};\n    const workflows = await this.workflowDefinitionsApi.list({versionOptions});\n    this.publishedOrLatestWorkflows = this.selectLatestWorkflows(workflows.items);\n  };\n\n  private getSelectAllState = () => {\n    const {items} = this.workflowInstances;\n    const selectedWorkflowInstanceIds = this.selectedWorkflowInstanceIds;\n    return items.findIndex(item => !selectedWorkflowInstanceIds.includes(item.id)) < 0;\n  }\n\n  private setSelectAllIndeterminateState = () => {\n    if (this.selectAllCheckbox) {\n      const selectedItems = this.workflowInstances.items.filter(item => this.selectedWorkflowInstanceIds.includes(item.id));\n      this.selectAllCheckbox.indeterminate = selectedItems.length != 0 && selectedItems.length != this.workflowInstances.items.length;\n    }\n  }\n\n  private selectLatestWorkflows = (workflows: Array<WorkflowDefinitionSummary>): Array<WorkflowDefinitionSummary> => {\n    const groups = _.groupBy(workflows, 'definitionId');\n    return _.map(groups, x => _.first(_.orderBy(x, 'version', 'desc')));\n  }\n\n  private onSearch = async (term: string) => {\n    this.searchTerm = term;\n    this.resetPagination();\n    await this.loadWorkflowInstances();\n  };\n\n  private onPageSizeChanged = async (pageSize: number) => {\n    this.currentPageSize = pageSize;\n    this.resetPagination();\n    await this.loadWorkflowInstances();\n  };\n\n  private onWorkflowChanged = async (definitionId: string) => {\n    this.selectedWorkflowDefinitionId = definitionId;\n    this.resetPagination();\n    await this.loadWorkflowInstances();\n  };\n\n  private onWorkflowStatusChanged = async (status: WorkflowStatus) => {\n    this.selectedStatus = status;\n    this.resetPagination();\n    await this.loadWorkflowInstances();\n  };\n\n  private onWorkflowSubStatusChanged = async (status: WorkflowSubStatus) => {\n    this.selectedSubStatus = status;\n    this.resetPagination();\n    await this.loadWorkflowInstances();\n  };\n\n  private onOrderByChanged = async (orderBy: OrderBy) => {\n    this.orderBy = orderBy;\n    await this.loadWorkflowInstances();\n  };\n\n  private async onDeleteClick(e: MouseEvent, workflowInstance: WorkflowInstanceSummary) {\n    // const result = await this.confirmDialog.show(t('DeleteConfirmationModel.Title'), t('DeleteConfirmationModel.Message'));\n    //\n    // if (!result)\n    //   return;\n    //\n\n    await this.workflowInstancesApi.delete(workflowInstance);\n    await this.loadWorkflowInstances();\n  }\n\n  private onWorkflowInstanceClick = async (e: MouseEvent, workflowInstance: WorkflowInstanceSummary) => {\n    e.preventDefault();\n    this.workflowInstanceSelected.emit(workflowInstance);\n  }\n\n  private onSelectAllCheckChange(e: Event) {\n    const checkBox = e.target as HTMLInputElement;\n    const isChecked = checkBox.checked;\n    this.selectAllChecked = isChecked;\n    this.selectedWorkflowInstanceIds = updateSelectedWorkflowInstances(isChecked, this.workflowInstances, this.selectedWorkflowInstanceIds);\n  }\n\n  private onWorkflowInstanceCheckChange(e: Event, workflowInstance: WorkflowInstanceSummary) {\n    const checkBox = e.target as HTMLInputElement;\n    const isChecked = checkBox.checked;\n\n    if (isChecked)\n      this.selectedWorkflowInstanceIds = [...this.selectedWorkflowInstanceIds, workflowInstance.id];\n    else\n      this.selectedWorkflowInstanceIds = this.selectedWorkflowInstanceIds.filter(x => x != workflowInstance.id);\n\n    this.setSelectAllIndeterminateState();\n  }\n\n  onPaginated = async (e: CustomEvent<PagerData>) => {\n    this.currentPage = e.detail.page;\n    await this.loadWorkflowInstances();\n  };\n}\n"]}