{"version":3,"file":"node-handler-registry.js","sourceRoot":"","sources":["../../../src/modules/flowchart/node-handler-registry.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,kBAAkB,CAAC;AAC1B,OAAO,EAAC,SAAS,EAAE,OAAO,EAAC,MAAM,QAAQ,CAAC;AAE1C,OAAO,EAAC,kBAAkB,EAAC,MAAM,wBAAwB,CAAC;AAKnD,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;EAAzB;IACG,eAAU,GAA4C,IAAI,GAAG,EAAsC,CAAC;IACpG,0BAAqB,GAA+B,GAAG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;EActG,CAAC;EAZQ,GAAG,CAAC,YAAoB,EAAE,cAA0C;IACzE,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;EACpD,CAAC;EAEM,GAAG,CAAC,YAAoB;IAC7B,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;EAC3C,CAAC;EAEM,aAAa,CAAC,YAAoB;;IACvC,MAAM,OAAO,GAAG,MAAA,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,mCAAI,IAAI,CAAC,qBAAqB,CAAC;IACrE,OAAO,OAAO,EAAE,CAAC;EACnB,CAAC;CACF,CAAA;AAhBY,mBAAmB;EAD/B,OAAO,EAAE;GACG,mBAAmB,CAgB/B;SAhBY,mBAAmB","sourcesContent":["import 'reflect-metadata';\r\nimport {Container, Service} from \"typedi\";\r\nimport {ActivityNodeHandler} from \"./activity-node-handler\";\r\nimport {DefaultNodeHandler} from \"./default-node-handler\";\r\n\r\nexport type ActivityNodeHandlerFactory = () => ActivityNodeHandler;\r\n\r\n@Service()\r\nexport class NodeHandlerRegistry {\r\n  private handlerMap: Map<string, ActivityNodeHandlerFactory> = new Map<string, ActivityNodeHandlerFactory>();\r\n  private defaultHandlerFactory: ActivityNodeHandlerFactory = () => Container.get(DefaultNodeHandler);\r\n\r\n  public add(activityType: string, handlerFactory: ActivityNodeHandlerFactory) {\r\n    this.handlerMap.set(activityType, handlerFactory);\r\n  }\r\n\r\n  public get(activityType: string): ActivityNodeHandlerFactory {\r\n    return this.handlerMap.get(activityType);\r\n  }\r\n\r\n  public createHandler(activityType: string): ActivityNodeHandler {\r\n    const factory = this.get(activityType) ?? this.defaultHandlerFactory;\r\n    return factory();\r\n  }\r\n}\r\n"]}