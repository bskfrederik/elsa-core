{"version":3,"file":"activity-driver-registry.js","sourceRoot":"","sources":["../../src/services/activity-driver-registry.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,kBAAkB,CAAC;AAE1B,OAAO,EAAC,SAAS,EAAE,OAAO,EAAC,MAAM,QAAQ,CAAC;AAC1C,OAAO,EAAC,qBAAqB,EAAC,MAAM,6CAA6C,CAAC;AAG3E,IAAM,sBAAsB,GAA5B,MAAM,sBAAsB;EAA5B;IACG,cAAS,GAAuC,IAAI,GAAG,EAAiC,CAAC;IACzF,yBAAoB,GAA0B,GAAG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;EAcnG,CAAC;EAZQ,GAAG,CAAC,YAAoB,EAAE,aAAoC;IACnE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;EAClD,CAAC;EAEM,GAAG,CAAC,YAAoB;IAC7B,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;EAC1C,CAAC;EAEM,YAAY,CAAC,YAAoB;;IACtC,MAAM,aAAa,GAAG,MAAA,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,mCAAI,IAAI,CAAC,oBAAoB,CAAC;IAC1E,OAAO,aAAa,EAAE,CAAC;EACzB,CAAC;CACF,CAAA;AAhBY,sBAAsB;EADlC,OAAO,EAAE;GACG,sBAAsB,CAgBlC;SAhBY,sBAAsB","sourcesContent":["import 'reflect-metadata';\r\nimport {ActivityDriver, ActivityDriverFactory} from \"./activity-driver\";\r\nimport {Container, Service} from \"typedi\";\r\nimport {DefaultActivityDriver} from \"../drivers/activity/default-activity-driver\";\r\n\r\n@Service()\r\nexport class ActivityDriverRegistry {\r\n  private driverMap: Map<string, ActivityDriverFactory> = new Map<string, ActivityDriverFactory>();\r\n  private defaultDriverFactory: ActivityDriverFactory = () => Container.get(DefaultActivityDriver);\r\n\r\n  public add(activityType: string, driverFactory: ActivityDriverFactory) {\r\n    this.driverMap.set(activityType, driverFactory);\r\n  }\r\n\r\n  public get(activityType: string): ActivityDriverFactory {\r\n    return this.driverMap.get(activityType);\r\n  }\r\n\r\n  public createDriver(activityType: string): ActivityDriver {\r\n    const driverFactory = this.get(activityType) ?? this.defaultDriverFactory;\r\n    return driverFactory();\r\n  }\r\n}\r\n"]}