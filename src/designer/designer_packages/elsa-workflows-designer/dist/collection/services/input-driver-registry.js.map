{"version":3,"file":"input-driver-registry.js","sourceRoot":"","sources":["../../src/services/input-driver-registry.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,CAAC,MAAM,QAAQ,CAAC;AACvB,OAAO,EAAC,OAAO,EAAC,MAAM,QAAQ,CAAC;AAE/B,OAAO,EAAC,kBAAkB,EAAC,MAAM,uCAAuC,CAAC;AAGlE,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;EAAzB;IACG,YAAO,GAA+B,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;EAU3E,CAAC;EARQ,GAAG,CAAC,MAA2B;IACpC,MAAM,OAAO,GAA+B,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;IACrE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;EAC7D,CAAC;EAEM,GAAG,CAAC,OAA6B;IACtC,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC;EAC1D,CAAC;CACF,CAAA;AAXY,mBAAmB;EAD/B,OAAO,EAAE;GACG,mBAAmB,CAW/B;SAXY,mBAAmB","sourcesContent":["import _ from 'lodash';\r\nimport {Service} from 'typedi';\r\nimport {ActivityInputDriver, ActivityInputContext} from './activity-input-driver';\r\nimport {DefaultInputDriver} from \"../drivers/input/default-input-driver\";\r\n\r\n@Service()\r\nexport class InputDriverRegistry {\r\n  private drivers: Array<ActivityInputDriver> = [new DefaultInputDriver()];\r\n\r\n  public add(driver: ActivityInputDriver) {\r\n    const drivers: Array<ActivityInputDriver> = [...this.drivers, driver]\r\n    this.drivers = _.orderBy(drivers, x => x.priority, 'desc');\r\n  }\r\n\r\n  public get(context: ActivityInputContext): ActivityInputDriver {\r\n    return this.drivers.find(x => x.supportsInput(context));\r\n  }\r\n}\r\n"]}