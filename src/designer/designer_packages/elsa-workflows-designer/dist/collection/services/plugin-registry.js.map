{"version":3,"file":"plugin-registry.js","sourceRoot":"","sources":["../../src/services/plugin-registry.ts"],"names":[],"mappings":"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","sourcesContent":["import 'reflect-metadata';\r\nimport {Container, Service} from \"typedi\";\r\nimport {Plugin} from \"../models\";\r\nimport {SequencePlugin} from \"../modules/sequence/sequence-plugin\";\r\nimport {WorkflowDefinitionsPlugin} from \"../modules/workflow-definitions\";\r\nimport {CompositeActivityVersionPlugin} from \"../modules/workflow-definitions/plugins/composite-version-plugin\";\r\nimport {WorkflowInstancesPlugin} from \"../modules/workflow-instances/plugin\";\r\nimport {LoginPlugin} from \"../modules/login/plugin\";\r\nimport {HomePagePlugin} from \"../modules/home/plugin\";\r\nimport {FlowchartPlugin} from \"../modules/flowchart/plugin\";\r\nimport {SwitchPlugin} from '../modules/switch/sequence/switch-plugin';\r\nimport {FlowSwitchPlugin} from \"../modules/switch/flow/flow-switch-plugin\";\r\nimport {FlowHttpRequestPlugin} from \"../modules/http-request/flow/flow-http-request-plugin\";\r\nimport {HttpRequestPlugin} from \"../modules/http-request/sequence/http-request-plugin\";\r\nimport {WorkflowContextsPlugin} from \"../modules/workflow-contexts/plugin\";\r\nimport {DescriptorsPlugin} from \"../modules/descriptors/plugin\";\r\n\r\n// A registry of plugins.\r\n@Service()\r\nexport class PluginRegistry {\r\n  private readonly pluginTypes: Map<string, any> = new Map<string, any>();\r\n\r\n  constructor() {\r\n    const add = this.add;\r\n\r\n    add('descriptors', DescriptorsPlugin);\r\n    add('flowchart', FlowchartPlugin);\r\n    add('login', LoginPlugin);\r\n    add('home', HomePagePlugin);\r\n    add('workflow-definitions', WorkflowDefinitionsPlugin);\r\n    add('workflow-instances', WorkflowInstancesPlugin);\r\n    add('composite-activity-version', CompositeActivityVersionPlugin);\r\n    add('sequence', SequencePlugin);\r\n    add('switch', SwitchPlugin);\r\n    add('flow-switch', FlowSwitchPlugin);\r\n    add('flow-http-request', FlowHttpRequestPlugin);\r\n    add('http-request', HttpRequestPlugin);\r\n    add('workflow-contexts', WorkflowContextsPlugin);\r\n  }\r\n\r\n  add = (name: string, plugin: any) => {\r\n    this.pluginTypes.set(name, plugin);\r\n  };\r\n\r\n  replace = (name: string, plugin: any) => {\r\n    this.pluginTypes.set(name, plugin);\r\n  };\r\n\r\n  remove = (name: string) => {\r\n    this.pluginTypes.delete(name);\r\n  };\r\n\r\n  initialize = async (): Promise<void> => {\r\n    for (const pluginType of this.pluginTypes.values()) {\r\n\r\n      if (!Container.has(pluginType))\r\n        Container.set(pluginType, new pluginType());\r\n\r\n      const plugin = Container.get(pluginType) as Plugin;\r\n\r\n      if (!!plugin.initialize)\r\n        await plugin.initialize();\r\n    }\r\n  };\r\n}\r\n"]}