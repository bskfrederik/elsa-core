{"version":3,"file":"activity-descriptor-manager.js","sourceRoot":"","sources":["../../src/services/activity-descriptor-manager.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,kBAAkB,CAAC;AAC1B,OAAO,EAAC,SAAS,EAAE,OAAO,EAAC,MAAM,QAAQ,CAAC;AAC1C,OAAO,gBAAgB,MAAM,2BAA2B,CAAC;AACzD,OAAO,EAAC,kBAAkB,EAAC,MAAM,0BAA0B,CAAC;AAIrD,IAAM,yBAAyB,GAA/B,MAAM,yBAAyB;EAIpC;IAFQ,uCAAkC,GAAwB,IAAI,CAAC;IAGrE,IAAI,CAAC,kBAAkB,GAAG,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;EAC9D,CAAC;EAED,4BAA4B,CAAC,QAAoB;IAC/C,IAAI,CAAC,kCAAkC,GAAG,QAAQ,CAAC;EACrD,CAAC;EAED,KAAK,CAAC,OAAO;IACX,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,CAAC;IACjE,gBAAgB,CAAC,mBAAmB,GAAG,MAAM,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;IAEtF,IAAI,IAAI,CAAC,kCAAkC,EAAE;MAC3C,IAAI,CAAC,kCAAkC,EAAE,CAAC;KAC3C;EACH,CAAC;CACF,CAAA;AApBY,yBAAyB;EADrC,OAAO,EAAE;;GACG,yBAAyB,CAoBrC;SApBY,yBAAyB","sourcesContent":["import 'reflect-metadata';\r\nimport {Container, Service} from \"typedi\";\r\nimport descriptorsStore from \"../data/descriptors-store\";\r\nimport {ElsaClientProvider} from \"./api-client/elsa-client\";\r\nimport { EventEmitter } from '@stencil/core';\r\n\r\n@Service()\r\nexport class ActivityDescriptorManager {\r\n  private readonly elsaClientProvider: ElsaClientProvider;\r\n  private activityDescriptorsUpdatedCallback: (() => void) | null = null;\r\n\r\n  constructor() {\r\n    this.elsaClientProvider = Container.get(ElsaClientProvider);\r\n  }\r\n\r\n  onActivityDescriptorsUpdated(callback: () => void) {\r\n    this.activityDescriptorsUpdatedCallback = callback;\r\n  }\r\n\r\n  async refresh(): Promise<void> {\r\n    const elsaClient = await this.elsaClientProvider.getElsaClient();\r\n    descriptorsStore.activityDescriptors = await elsaClient.descriptors.activities.list();\r\n\r\n    if (this.activityDescriptorsUpdatedCallback) {\r\n      this.activityDescriptorsUpdatedCallback();\r\n    }\r\n  }\r\n}\r\n"]}