{"version":3,"file":"port-provider-registry.js","sourceRoot":"","sources":["../../src/services/port-provider-registry.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,kBAAkB,CAAC;AAC1B,OAAO,EAAC,SAAS,EAAE,OAAO,EAAC,MAAM,QAAQ,CAAC;AAE1C,OAAO,EAAC,mBAAmB,EAAC,MAAM,yBAAyB,CAAC;AAKrD,IAAM,oBAAoB,GAA1B,MAAM,oBAAoB;EAA1B;IACG,QAAG,GAAqC,IAAI,GAAG,EAA+B,CAAC;IAC/E,2BAAsB,GAAwB,GAAG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;EAUjG,CAAC;EARQ,GAAG,CAAC,YAAoB,EAAE,sBAA2C;IAC1E,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,sBAAsB,CAAC,CAAC;EACrD,CAAC;EAEM,GAAG,CAAC,YAAoB;;IAC7B,MAAM,OAAO,GAAG,MAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,mCAAI,IAAI,CAAC,sBAAsB,CAAC;IAC1E,OAAO,OAAO,EAAE,CAAC;EACnB,CAAC;CACF,CAAA;AAZY,oBAAoB;EADhC,OAAO,EAAE;GACG,oBAAoB,CAYhC;SAZY,oBAAoB","sourcesContent":["import 'reflect-metadata';\r\nimport {Container, Service} from \"typedi\";\r\nimport {PortProvider} from \"./port-provider\";\r\nimport {DefaultPortProvider} from \"./default-port-provider\";\r\n\r\nexport type PortProviderFactory = () => PortProvider;\r\n\r\n@Service()\r\nexport class PortProviderRegistry {\r\n  private map: Map<string, PortProviderFactory> = new Map<string, PortProviderFactory>();\r\n  private defaultProviderFactory: PortProviderFactory = () => Container.get(DefaultPortProvider);\r\n\r\n  public add(activityType: string, defaultProviderFactory: PortProviderFactory) {\r\n    this.map.set(activityType, defaultProviderFactory);\r\n  }\r\n\r\n  public get(activityType: string): PortProvider {\r\n    const factory = this.map.get(activityType) ?? this.defaultProviderFactory;\r\n    return factory();\r\n  }\r\n}\r\n"]}