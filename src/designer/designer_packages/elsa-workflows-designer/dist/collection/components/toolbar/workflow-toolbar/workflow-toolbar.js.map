{"version":3,"file":"workflow-toolbar.js","sourceRoot":"","sources":["../../../../src/components/toolbar/workflow-toolbar/workflow-toolbar.tsx"],"names":[],"mappings":"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","sourcesContent":["import {Component, State, h, getAssetPath} from '@stencil/core';\r\nimport Container from 'typedi';\r\nimport {NotificationEventTypes} from '../../../modules/notifications/event-types';\r\nimport {EventBus} from '../../../services';\r\nimport toolbarComponentStore from \"../../../data/toolbar-component-store\";\r\nimport notificationService from '../../../modules/notifications/notification-service';\r\nimport notificationStore from \"../../../modules/notifications/notification-store\";\r\nimport {PackagesApi} from \"../../../services/api-client/packages-api\";\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-toolbar',\r\n  assetsDirs: ['assets']\r\n})\r\nexport class WorkflowToolbar {\r\n  private readonly eventBus: EventBus;\r\n  private readonly packagesApi: PackagesApi;\r\n\r\n  private currentElsaVersion: string;\r\n\r\n  static NotificationService = notificationService;\r\n\r\n  constructor() {\r\n    this.eventBus = Container.get(EventBus);\r\n    this.packagesApi = Container.get(PackagesApi);\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    var response = await this.packagesApi.getVersion();\r\n    return this.currentElsaVersion = response.packageVersion;\r\n  }\r\n\r\n  onNotificationClick = async e => {\r\n    e.stopPropagation();\r\n    await this.eventBus.emit(NotificationEventTypes.Toggle, this);\r\n    WorkflowToolbar.NotificationService.toggleNotification();\r\n  };\r\n\r\n  render() {\r\n    const logoPath = getAssetPath('./assets/logo.png');\r\n    const infoPanelBoolean = notificationStore.infoPanelBoolean;\r\n\r\n    return (\r\n      <div>\r\n        <nav class=\"tw-bg-gray-800\">\r\n          <div class=\"tw-mx-auto tw-px-2 sm:tw-px-6 lg:tw-px-6\">\r\n\r\n            <div class=\"tw-flex tw-items-center tw-h-16\">\r\n              <div class=\"tw-flex-shrink-0\">\r\n                <div class=\"tw-flex tw-items-end tw-space-x-1\">\r\n                  <div>\r\n                    <a href=\"#\"><img class=\"tw-h-6 tw-w-6\" src={logoPath} alt=\"Workflow\"/></a>\r\n                  </div>\r\n                  <div>\r\n                    <span class=\"tw-text-gray-300 tw-text-sm\">{this.currentElsaVersion}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"tw-flex-grow\"></div>\r\n\r\n              <div class=\"tw-relative tw-flex tw-items-center tw-justify-end tw-h-16\">\r\n                <div class=\"tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2 sm:tw-static sm:tw-inset-auto sm:tw-ml-6 sm:tw-pr-0 tw-z-40\">\r\n                  <div class=\"tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2 sm:tw-static sm:tw-inset-auto sm:tw-ml-6 sm:tw-pr-0 tw-z-40\">\r\n                    {/* Notifications*/}\r\n                    <button\r\n                      onClick={e => this.onNotificationClick(e)}\r\n                      type=\"button\"\r\n                      class=\"tw-bg-gray-800 tw-p-1 tw-rounded-full tw-text-gray-400 hover:tw-text-white focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-offset-2 focus:tw-ring-offset-gray-800 focus:tw-ring-white tw-mr-4\"\r\n                    >\r\n                      <span class=\"tw-sr-only\">View notifications</span>\r\n                      <svg class=\"tw-h-6 tw-w-6\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\r\n                        <path\r\n                          stroke-linecap=\"round\"\r\n                          stroke-linejoin=\"round\"\r\n                          stroke-width=\"2\"\r\n                          d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\r\n                        />\r\n                      </svg>\r\n                    </button>\r\n\r\n                    {toolbarComponentStore.components.map(component => (\r\n                      <div class=\"tw-flex-shrink-0 tw-mr-4\">\r\n                        {component()}\r\n                      </div>\r\n                    ))}\r\n\r\n                    {/* Menu */}\r\n                    <elsa-workflow-toolbar-menu/>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </nav>\r\n        <elsa-notifications-manager modalState={infoPanelBoolean}></elsa-notifications-manager>\r\n        <elsa-toast-manager></elsa-toast-manager>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}