{"version":3,"file":"resize.js","sourceRoot":"","sources":["../../../src/components/panel/resize.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,UAAU,CAAC;AASzC,MAAM,sBAAsB,GAAG;EAC7B,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,oBAAoB;EAC3C,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,mBAAmB;EACzC,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,qBAAqB;CAC9C,CAAC;AAEF,MAAM,qBAAqB,GAAG;EAC5B,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,yBAAyB;EAChD,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,yBAAyB;EAC/C,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,0BAA0B;CACnD,CAAC;AAEF,MAAM,qBAAqB,GAAG;EAC5B,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,GAAG;EAC1B,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,GAAG;EACzB,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,GAAG;CAC5B,CAAC;AAEF,SAAS,mBAAmB,CAAC,QAAuB;EAClD,OAAO,YAAY,CAAC,OAAO,CAAC,sBAAsB,CAAC,QAAQ,CAAC,CAAC,IAAI,qBAAqB,CAAC,QAAQ,CAAC,CAAC;AACnG,CAAC;AAED,SAAS,sBAAsB,CAAC,QAAuB,EAAE,IAAY;EACnE,OAAO,YAAY,CAAC,OAAO,CAAC,sBAAsB,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACjF,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,EAAqB;EAClF,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAc,OAAO,CAAC,CAAC;EAC1D,IAAI,MAAM,EAAE;IACV,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;IAC/D,OAAO;GACR;EAED,IAAI,SAAS,EAAE;IACb,IAAI,QAAQ,GAAG,CAAC;MAAE,QAAQ,GAAG,QAAQ,GAAG,CAAC,CAAC,CAAC;IAC3C,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,CAAC,QAAQ,CAAC,EAAE,GAAG,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC9F,OAAO;GACR;EAED,IAAI,IAAI,GAAG,CAAC,EAAE;IACZ,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAc,gBAAgB,CAAC,CAAC;IACxE,IAAI,GAAG,MAAM,CAAC,WAAW,GAAG,IAAI,GAAG,SAAS,CAAC,qBAAqB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC;GAC7E;EAED,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,CAAC,QAAQ,CAAC,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC;EACrE,sBAAsB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;EACvC,OAAO;AACT,CAAC","sourcesContent":["import { PanelPosition } from './models';\n\ntype ApplyResizeParams = {\n  position: PanelPosition;\n  isDefault?: boolean;\n  isHide?: boolean;\n  size?: number;\n};\n\nconst positionToLocalStorage = {\n  [PanelPosition.Right]: 'LS/rightPanelWidth',\n  [PanelPosition.Left]: 'LS/leftPanelWidth',\n  [PanelPosition.Bottom]: 'LS/bottomPanelWidth',\n};\n\nconst positionToCssVariable = {\n  [PanelPosition.Right]: '--workflow-editor-width',\n  [PanelPosition.Left]: '--activity-picker-width',\n  [PanelPosition.Bottom]: '--activity-editor-height',\n};\n\nconst positionToDefaultSize = {\n  [PanelPosition.Right]: 580,\n  [PanelPosition.Left]: 300,\n  [PanelPosition.Bottom]: 200,\n};\n\nfunction getPanelDefaultSize(position: PanelPosition) {\n  return localStorage.getItem(positionToLocalStorage[position]) || positionToDefaultSize[position];\n}\n\nfunction updatePanelDefaultSize(position: PanelPosition, size: number) {\n  return localStorage.setItem(positionToLocalStorage[position], size.toString());\n}\n\nexport function applyResize({ position, isDefault, isHide, size }: ApplyResizeParams) {\n  const root = document.querySelector<HTMLElement>(':root');\n  if (isHide) {\n    root.style.setProperty(positionToCssVariable[position], '1px');\n    return;\n  }\n\n  if (isDefault) {\n    if (position < 0) position = position * -1;\n    root.style.setProperty(positionToCssVariable[position], `${getPanelDefaultSize(position)}px`);\n    return;\n  }\n\n  if (size < 0) {\n    const flowChart = document.querySelector<HTMLElement>('elsa-flowchart');\n    size = window.innerHeight + size - flowChart.getBoundingClientRect().y + 55;\n  }\n\n  root.style.setProperty(positionToCssVariable[position], `${size}px`);\n  updatePanelDefaultSize(position, size);\n  return;\n}\n"]}