{"version":3,"file":"dropdown-button.js","sourceRoot":"","sources":["../../../../src/components/shared/dropdown-button/dropdown-button.tsx"],"names":[],"mappings":"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","sourcesContent":["import {Component, Event, EventEmitter, Listen, h, Prop, Host} from '@stencil/core';\nimport {leave, toggle} from 'el-transition'\nimport {groupBy, sortBy, map} from 'lodash';\nimport {DropdownButtonItem, DropdownButtonOrigin} from \"./models\";\n\n@Component({\n  tag: 'elsa-dropdown-button',\n  shadow: false,\n})\nexport class DropdownButton {\n  @Prop() public text: string;\n  @Prop() public icon?: any;\n  @Prop() public handler?: () => void;\n  @Prop() public origin: DropdownButtonOrigin = DropdownButtonOrigin.TopLeft;\n  @Prop() public items: Array<DropdownButtonItem> = [];\n  @Prop() public theme: ('Primary' | 'Secondary') = 'Primary';\n  @Prop() public disabled: boolean;\n  @Event() public itemSelected: EventEmitter<DropdownButtonItem>\n  @Event() public menuOpened: EventEmitter<void>\n\n  private contextMenu: HTMLElement;\n  private element: HTMLElement;\n\n  public render() {\n    const disabled = this.disabled;\n    const buttonClass = this.theme == 'Secondary' ? 'tw-border-gray-300 tw-bg-white tw-text-gray-700 hover:tw-bg-gray-50 focus:tw-ring-blue-500 hover:tw-border-blue-500' + (disabled==true ? ' tw-opacity-50' : '') : 'tw-border-blue-600 tw-bg-blue-600 tw-text-white hover:tw-bg-blue-700 focus:tw-ring-blue-600 hover:tw-border-blue-700' + (disabled==true ? ' tw-opacity-50' : '');\n    const arrowClass = this.theme == 'Secondary' ? 'tw-border-gray-300 tw-bg-white tw-text-gray-700 hover:tw-bg-gray-50 hover:tw-border-blue-500' + (disabled==true ? ' tw-opacity-50' : '') : 'tw-border-blue-600 tw-bg-blue-600 tw-text-white hover:tw-bg-blue-700 hover:tw-border-blue-700' + (disabled==true ? ' tw-opacity-50' : '');\n    const handler = this.handler ?? (() => this.toggleMenu());\n\n    return (\n      <Host class=\"tw-block\" ref={el => this.element = el}>\n        <span class=\"tw-relative tw-z-0 tw-inline-flex tw-shadow-sm tw-rounded-md\">\n          <button\n            type=\"button\"\n            disabled={disabled}\n                  class={`tw-relative tw-inline-flex tw-items-center tw-px-4 tw-py-2 tw-rounded-l-md tw-border tw-text-sm tw-font-medium focus:tw-z-10 focus:tw-outline-none ${buttonClass}`}\n                  onClick={handler}>\n            {this.renderIcon()}\n            {this.text}\n          </button>\n          <div class=\"-tw-ml-px tw-block\">\n            <button type=\"button\"\n              disabled={disabled}\n                    class={`tw-relative tw-inline-flex tw-items-center tw-px-2 tw-py-2 tw-rounded-r-md tw-border tw-text-sm tw-font-medium focus:tw-z-10 focus:tw-outline-none ${arrowClass}`}\n                    onClick={() => this.toggleMenu()}\n                    aria-expanded=\"true\" aria-haspopup=\"true\">\n              <svg class=\"tw-h-5 tw-w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path fill-rule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z\" clip-rule=\"evenodd\"/>\n              </svg>\n            </button>\n            {this.renderMenu()}\n          </div>\n        </span>\n      </Host>\n    );\n  }\n\n  private renderMenu() {\n    if (this.items.length == 0)\n      return;\n\n    const originClass = this.getOriginClass();\n\n    return <div ref={el => this.contextMenu = el}\n                data-transition-enter=\"tw-transition tw-ease-out tw-duration-100\"\n                data-transition-enter-start=\"tw-transform tw-opacity-0 tw-scale-95\"\n                data-transition-leave=\"tw-transition tw-ease-in tw-duration-75\"\n                data-transition-leave-start=\"tw-transform tw-opacity-100 tw-scale-100\"\n                data-transition-leave-end=\"tw-transform tw-opacity-0 tw-scale-95\"\n                class={`hidden ${originClass} tw-z-10 tw-absolute tw-mt-2 tw-w-56 tw-rounded-md tw-shadow-lg tw-bg-white tw-ring-1 tw-ring-black tw-ring-opacity-5`}>\n      <div class=\"tw-py-1\" role=\"menu\" aria-orientation=\"vertical\">\n        {this.renderItems()}\n      </div>\n    </div>;\n  }\n\n  private renderItems() {\n\n    const groups = groupBy(this.items, x => x.group ?? 0);\n\n    return <div class=\"tw-divide-y tw-divide-gray-100 focus:tw-outline-none\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"option-menu\">\n      {map(groups, menuItemGroup => {\n\n        return <div class=\"tw-py-1\" role=\"none\">\n          {menuItemGroup.map(menuItem => {\n\n            const selectedCssClass = menuItem.isSelected ? 'tw-bg-blue-600 hover:tw-bg-blue-700 tw-text-white' : 'hover:tw-bg-gray-100 tw-text-gray-700 hover:tw-text-gray-900';\n            return (\n              <div class=\"tw-py-1\" role=\"none\">\n                <a href=\"#\" onClick={e => this.onItemClick(e, menuItem)}\n                   class={`tw-block tw-px-4 tw-py-2 tw-text-sm ${selectedCssClass}`}\n                   role=\"menuitem\">\n                  {menuItem.text}\n                </a>\n              </div>);\n          })}\n\n        </div>\n      })}\n    </div>\n  }\n\n  private renderIcon = () => this.icon ? this.icon : undefined;\n\n  private closeContextMenu() {\n    if (!!this.contextMenu)\n      leave(this.contextMenu);\n  }\n\n  private toggleMenu() {\n    if (!!this.contextMenu) {\n      toggle(this.contextMenu);\n      this.menuOpened.emit();\n    }\n  }\n\n  private getOriginClass(): string {\n    switch (this.origin) {\n      case DropdownButtonOrigin.TopLeft:\n        return 'tw-left-0 tw-origin-top-left';\n      case DropdownButtonOrigin.TopRight:\n      default:\n        return 'tw-right-0 tw-origin-top-right';\n    }\n  }\n\n  private async onItemClick(e: Event, menuItem: DropdownButtonItem) {\n    e.preventDefault();\n\n    if (!!menuItem.handler)\n      menuItem.handler();\n\n    this.itemSelected.emit(menuItem);\n    this.closeContextMenu();\n  }\n\n  @Listen('click', {target: 'window'})\n  private onWindowClicked(event: Event) {\n    const target = event.target as HTMLElement;\n\n    if (!this.element.contains(target))\n      this.closeContextMenu();\n  }\n}\n"]}