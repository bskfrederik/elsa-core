{"file":"elsa-workflow-instance-browser.entry.esm.js","mappings":"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","names":["debounce","_"],"sources":["./src/modules/workflow-instances/components/search.tsx","./src/modules/workflow-instances/components/filter.tsx","./src/modules/workflow-instances/services/lookup-persistence.ts","./src/modules/workflow-instances/services/utils.ts","./src/modules/workflow-instances/components/browser.tsx"],"sourcesContent":["import {FunctionalComponent, h} from \"@stencil/core\";\r\nimport {debounce} from 'lodash';\r\n\r\nexport interface SearchProps {\r\n  onSearch: (term: string) => void;\r\n}\r\n\r\nexport const Search: FunctionalComponent<SearchProps> = ({onSearch}) => {\r\n\r\n  const onSubmit = (e: Event) => {\r\n    e.preventDefault();\r\n    const form = e.target as HTMLFormElement;\r\n    const formData = new FormData(form);\r\n    const searchTerm: FormDataEntryValue = formData.get('searchTerm').toString();\r\n\r\n    onSearch(searchTerm);\r\n  }\r\n\r\n  const onSearchDebounced = debounce(onSearch, 200);\r\n\r\n  const onKeyUp = (e: KeyboardEvent) => {\r\n    const term = (e.target as HTMLInputElement).value;\r\n    onSearchDebounced(term);\r\n  };\r\n\r\n  return <div class=\"tw-relative tw-z-10 tw-flex-shrink-0 tw-flex tw-h-16 tw-bg-white tw-border-b tw-border-gray-200\">\r\n    <div class=\"tw-flex-1 tw-px-4 tw-flex tw-justify-between sm:tw-px-6 lg:tw-px-8\">\r\n      <div class=\"tw-flex-1 tw-flex\">\r\n        <form class=\"tw-w-full tw-flex md:tw-ml-0\" onSubmit={onSubmit}>\r\n          <label htmlFor=\"search_field\" class=\"tw-sr-only\">Search</label>\r\n          <div class=\"tw-relative tw-w-full tw-text-gray-400 focus-within:tw-text-gray-600\">\r\n            <div\r\n              class=\"tw-absolute tw-inset-y-0 tw-left-0 tw-flex tw-items-center tw-pointer-events-none\">\r\n              <svg class=\"tw-h-5 tw-w-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\r\n                      d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"/>\r\n              </svg>\r\n            </div>\r\n            <input name=\"searchTerm\"\r\n                   onKeyUp={onKeyUp}\r\n                   class=\"tw-block tw-w-full tw-h-full tw-pl-8 tw-pr-3 tw-py-2 tw-rounded-md tw-text-gray-900 tw-placeholder-cool-gray-500 focus:tw-placeholder-cool-gray-400 sm:tw-text-sm tw-border-0 focus:tw-outline-none focus:tw-ring-0\"\r\n                   placeholder=\"Search\"\r\n                   type=\"search\"/>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>;\r\n}\r\n","import {FunctionalComponent, h} from \"@stencil/core\";\r\nimport {WorkflowDefinitionSummary} from \"../../workflow-definitions/models/entities\";\r\nimport {OrderBy, WorkflowStatus, WorkflowSubStatus} from \"../../../models\";\r\nimport {DropdownButtonItem, DropdownButtonOrigin} from \"../../../components/shared/dropdown-button/models\";\r\nimport {BulkActionsIcon, OrderByIcon, PageSizeIcon, WorkflowIcon, WorkflowStatusIcon} from \"../../../components/icons/tooling\";\r\n\r\nexport interface FilterProps extends BulkActionsProps {\r\n  pageSizeFilter: PageSizeFilterProps;\r\n  workflowFilter: WorkflowFilterProps;\r\n  statusFilter: StatusFilterProps;\r\n  subStatusFilter: SubStatusFilterProps;\r\n  orderByFilter: OrderByFilterProps;\r\n  resetFilter: () => void;\r\n}\r\n\r\nexport interface BulkActionsProps {\r\n  onBulkDelete: () => void;\r\n  onBulkCancel: () => void;\r\n}\r\n\r\nexport interface PageSizeFilterProps {\r\n  selectedPageSize: number;\r\n  onChange: (pageSize: number) => void;\r\n}\r\n\r\nexport interface WorkflowFilterProps {\r\n  workflows: Array<WorkflowDefinitionSummary>;\r\n  selectedWorkflowDefinitionId?: string;\r\n  onChange: (definitionId: string) => void;\r\n}\r\n\r\nexport interface StatusFilterProps {\r\n  selectedStatus?: WorkflowStatus;\r\n  onChange: (status: WorkflowStatus) => void;\r\n}\r\n\r\nexport interface SubStatusFilterProps {\r\n  selectedStatus?: WorkflowSubStatus;\r\n  onChange: (status: WorkflowSubStatus) => void;\r\n}\r\n\r\nexport interface OrderByFilterProps {\r\n  selectedOrderBy?: OrderBy;\r\n  onChange: (orderBy: OrderBy) => void;\r\n}\r\n\r\nexport const Filter: FunctionalComponent<FilterProps> = ({pageSizeFilter, workflowFilter, statusFilter, subStatusFilter, orderByFilter, resetFilter, onBulkDelete, onBulkCancel}) => {\r\n\r\n  return <div class=\"tw-p-8 tw-flex tw-content-end tw-justify-right tw-bg-white tw-space-x-4\">\r\n    <div class=\"tw-flex-shrink-0\">\r\n      <BulkActions onBulkDelete={onBulkDelete} onBulkCancel={onBulkCancel} />\r\n    </div>\r\n    <div class=\"tw-flex-1\">\r\n      &nbsp;\r\n    </div>\r\n\r\n    <button onClick={resetFilter} type=\"button\" class=\"tw-text-sm tw-text-blue-600 active:tw-text-blue-700 tw-px-3 active:ring tw-ring-blue-500 tw-rounded\">\r\n      Reset\r\n    </button>\r\n\r\n    <PageSizeFilter {...pageSizeFilter}/>\r\n    <WorkflowFilter {...workflowFilter}/>\r\n    <StatusFilter {...statusFilter}/>\r\n    <SubStatusFilter {...subStatusFilter}/>\r\n    <OrderByFilter {...orderByFilter} />\r\n  </div>;\r\n}\r\n\r\nconst BulkActions: FunctionalComponent<BulkActionsProps> = ({ onBulkDelete, onBulkCancel }) => {\r\n  const bulkActions = [{\r\n    text: 'Delete',\r\n    name: 'Delete',\r\n  }, {\r\n    text: 'Cancel',\r\n    name: 'Cancel',\r\n  }];\r\n\r\n  const onBulkActionSelected = (e: CustomEvent<DropdownButtonItem>) => {\r\n    const action = e.detail;\r\n    switch (action.name) {\r\n      case 'Delete':\r\n        onBulkDelete();\r\n        break;\r\n      case 'Cancel':\r\n        onBulkCancel();\r\n        break;\r\n\r\n      default:\r\n        action.handler();\r\n    }\r\n  };\r\n\r\n  return <elsa-dropdown-button\r\n    text=\"Bulk Actions\" items={bulkActions} icon={<BulkActionsIcon/>}\r\n    origin={DropdownButtonOrigin.TopLeft}\r\n    theme=\"Secondary\"\r\n    onItemSelected={onBulkActionSelected}/>\r\n}\r\n\r\nconst PageSizeFilter: FunctionalComponent<PageSizeFilterProps> = ({selectedPageSize, onChange}) => {\r\n  const selectedPageSizeText = `Page size: ${selectedPageSize}`;\r\n  const pageSizes: Array<number> = [5, 10, 15, 20, 30, 50, 100];\r\n\r\n  const items: Array<DropdownButtonItem> = pageSizes.map(x => {\r\n    const text = \"\" + x;\r\n    return {text: text, isSelected: x == selectedPageSize, value: x};\r\n  });\r\n\r\n  const onPageSizeChanged = (e: CustomEvent<DropdownButtonItem>) => onChange(parseInt(e.detail.value));\r\n\r\n  return <elsa-dropdown-button\r\n    text={selectedPageSizeText} items={items} icon={<PageSizeIcon/>}\r\n    origin={DropdownButtonOrigin.TopRight}\r\n    theme=\"Secondary\"\r\n    onItemSelected={onPageSizeChanged}/>\r\n}\r\n\r\nconst WorkflowFilter: FunctionalComponent<WorkflowFilterProps> = ({workflows, selectedWorkflowDefinitionId, onChange}) => {\r\n  const selectedWorkflow = workflows.find(x => x.definitionId == selectedWorkflowDefinitionId);\r\n  const getWorkflowName = (workflow?: WorkflowDefinitionSummary) => workflow?.name?.length > 0 ? workflow.name : 'Untitled';\r\n  const selectedWorkflowText = !selectedWorkflowDefinitionId ? 'All workflows' : getWorkflowName(selectedWorkflow);\r\n  let items: Array<DropdownButtonItem> = workflows.map(x => ({text: getWorkflowName(x), value: x.definitionId, isSelected: x.definitionId == selectedWorkflowDefinitionId}));\r\n  const allItem: DropdownButtonItem = {text: 'All', value: null, isSelected: !selectedWorkflowDefinitionId};\r\n  const onWorkflowChanged = (e: CustomEvent<DropdownButtonItem>) => onChange(e.detail.value);\r\n\r\n  items = [allItem, ...items];\r\n\r\n  return <elsa-dropdown-button\r\n    text={selectedWorkflowText} items={items} icon={<WorkflowIcon/>}\r\n    origin={DropdownButtonOrigin.TopRight}\r\n    theme=\"Secondary\"\r\n    onItemSelected={onWorkflowChanged}/>\r\n}\r\n\r\nconst StatusFilter: FunctionalComponent<StatusFilterProps> = ({selectedStatus, onChange}) => {\r\n  const selectedStatusText = !!selectedStatus ? selectedStatus : 'Status';\r\n  const statuses: Array<WorkflowStatus> = [null, WorkflowStatus.Running, WorkflowStatus.Finished];\r\n  const statusOptions: Array<DropdownButtonItem> = statuses.map(x => ({text: x ?? 'All', isSelected: x == selectedStatus, value: x}));\r\n  const onStatusChanged = (e: CustomEvent<DropdownButtonItem>) => onChange(e.detail.value);\r\n\r\n  return <elsa-dropdown-button\r\n    text={selectedStatusText} items={statusOptions} icon={<WorkflowStatusIcon/>}\r\n    origin={DropdownButtonOrigin.TopRight}\r\n    theme=\"Secondary\"\r\n    onItemSelected={onStatusChanged}/>\r\n}\r\n\r\nconst SubStatusFilter: FunctionalComponent<SubStatusFilterProps> = ({selectedStatus, onChange}) => {\r\n  const selectedSubStatusText = !!selectedStatus ? selectedStatus : 'Sub status';\r\n  const subStatuses: Array<WorkflowSubStatus> = [null, WorkflowSubStatus.Executing, WorkflowSubStatus.Suspended, WorkflowSubStatus.Finished, WorkflowSubStatus.Faulted, WorkflowSubStatus.Cancelled];\r\n  const subStatusOptions: Array<DropdownButtonItem> = subStatuses.map(x => ({text: x ?? 'All', isSelected: x == selectedStatus, value: x}));\r\n  const onStatusChanged = (e: CustomEvent<DropdownButtonItem>) => onChange(e.detail.value);\r\n\r\n  return <elsa-dropdown-button\r\n    text={selectedSubStatusText} items={subStatusOptions} icon={<WorkflowStatusIcon/>}\r\n    origin={DropdownButtonOrigin.TopRight}\r\n    theme=\"Secondary\"\r\n    onItemSelected={onStatusChanged}/>\r\n}\r\n\r\nconst OrderByFilter: FunctionalComponent<OrderByFilterProps> = ({selectedOrderBy, onChange}) => {\r\n  const selectedOrderByText = !!selectedOrderBy ? `Ordered by: ${selectedOrderBy}` : 'Order by';\r\n  const orderByValues: Array<OrderBy> = [OrderBy.Finished, OrderBy.Updated, OrderBy.Created];\r\n  const items: Array<DropdownButtonItem> = orderByValues.map(x => ({text: x, value: x, isSelected: x == selectedOrderBy}));\r\n  const onOrderByChanged = (e: CustomEvent<DropdownButtonItem>) => onChange(e.detail.value);\r\n\r\n  return <elsa-dropdown-button\r\n    text={selectedOrderByText} items={items} icon={<OrderByIcon/>}\r\n    theme=\"Secondary\"\r\n    origin={DropdownButtonOrigin.TopRight}\r\n    onItemSelected={onOrderByChanged}/>\r\n}\r\n","import { ListWorkflowInstancesRequest, WorkflowInstancesApi } from './workflow-instances-api';\r\n\r\nconst key = 'LS/wfInstanceBrowser';\r\n\r\nexport function getRequest(): ListWorkflowInstancesRequest | undefined {\r\n  var json = localStorage.getItem(key);\r\n\r\n  if (!json) return;\r\n\r\n  return JSON.parse(json);\r\n}\r\nexport function persistRequest(request: ListWorkflowInstancesRequest) {\r\n  localStorage.setItem(key, JSON.stringify(request));\r\n}\r\n","import {PagedList, WorkflowInstanceSummary, WorkflowStatus, WorkflowSubStatus} from \"../../../models\";\r\n\r\nconst statusColorMap = {};\r\nconst subStatusColorMap = {};\r\n\r\nstatusColorMap[WorkflowStatus.Running] = 'bg-rose-600';\r\nstatusColorMap[WorkflowStatus.Finished] = 'tw-bg-green-600';\r\n\r\nsubStatusColorMap[WorkflowSubStatus.Executing] = 'bg-rose-600';\r\nsubStatusColorMap[WorkflowSubStatus.Suspended] = 'tw-bg-blue-600';\r\nsubStatusColorMap[WorkflowSubStatus.Finished] = 'tw-bg-green-600';\r\nsubStatusColorMap[WorkflowSubStatus.Faulted] = 'tw-bg-red-600';\r\nsubStatusColorMap[WorkflowSubStatus.Compensating] = 'bg-orange-600';\r\nsubStatusColorMap[WorkflowSubStatus.Cancelled] = 'bg-gray-900';\r\n\r\nexport function getStatusColor(status: WorkflowStatus) {\r\n  return statusColorMap[status] ?? statusColorMap[WorkflowStatus.Running];\r\n}\r\n\r\nexport function getSubStatusColor(status: WorkflowSubStatus) {\r\n  return subStatusColorMap[status] ?? statusColorMap[WorkflowSubStatus.Suspended];\r\n}\r\n\r\nexport function updateSelectedWorkflowInstances(isChecked: boolean, workflowInstances: PagedList<WorkflowInstanceSummary>, selectedWorkflowInstanceIds: Array<string>) {\r\n  const currentItems = workflowInstances.items.map(x => x.id);\r\n\r\n  return isChecked\r\n    ? selectedWorkflowInstanceIds.concat(currentItems.filter(item => !selectedWorkflowInstanceIds.includes(item)))\r\n    : selectedWorkflowInstanceIds.filter(item => !currentItems.includes(item));\r\n\r\n}\r\n","import {Component, Event, EventEmitter, h, Host, Method, Prop, State} from '@stencil/core';\r\nimport _ from 'lodash';\r\nimport {Search} from \"./search\";\r\nimport {Filter, FilterProps} from \"./filter\";\r\nimport {ListWorkflowInstancesRequest, WorkflowInstancesApi} from \"../services/workflow-instances-api\";\r\nimport {getRequest, persistRequest} from '../services/lookup-persistence';\r\nimport {WorkflowDefinition, WorkflowDefinitionSummary} from \"../../workflow-definitions/models/entities\";\r\nimport {OrderBy, OrderDirection, PagedList, VersionOptions, WorkflowInstanceSummary, WorkflowStatus, WorkflowSubStatus} from \"../../../models\";\r\nimport {Container} from \"typedi\";\r\nimport {WorkflowDefinitionsApi} from \"../../workflow-definitions\";\r\nimport {getSubStatusColor, updateSelectedWorkflowInstances} from \"../services/utils\";\r\nimport {formatTimestamp} from \"../../../utils\";\r\nimport {DeleteIcon, EditIcon} from \"../../../components/icons/tooling\";\r\nimport {PagerData} from \"../../../components/shared/pager/pager\";\r\nimport {DefaultContents, DefaultModalActions, ModalDialogService, ModalType} from '../../../components/shared/modal-dialog';\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-instance-browser',\r\n  shadow: false,\r\n})\r\nexport class WorkflowInstanceBrowser {\r\n  static readonly DEFAULT_PAGE_SIZE = 15;\r\n  static readonly MIN_PAGE_SIZE = 5;\r\n  static readonly MAX_PAGE_SIZE = 100;\r\n  static readonly START_PAGE = 0;\r\n\r\n  private readonly workflowInstancesApi: WorkflowInstancesApi;\r\n  private readonly workflowDefinitionsApi: WorkflowDefinitionsApi;\r\n  private readonly modalDialogService: ModalDialogService;\r\n\r\n  private selectAllCheckbox: HTMLInputElement;\r\n  private publishedOrLatestWorkflows: Array<WorkflowDefinitionSummary> = [];\r\n\r\n\r\n  constructor() {\r\n    this.workflowInstancesApi = Container.get(WorkflowInstancesApi);\r\n    this.workflowDefinitionsApi = Container.get(WorkflowDefinitionsApi);\r\n    this.modalDialogService = Container.get(ModalDialogService);\r\n  }\r\n\r\n  @Prop() workflowDefinition: WorkflowDefinition;\r\n  @Event() public workflowInstanceSelected: EventEmitter<WorkflowInstanceSummary>;\r\n  @State() private workflowInstances: PagedList<WorkflowInstanceSummary> = {items: [], totalCount: 0};\r\n  @State() private workflows: Array<WorkflowDefinitionSummary> = [];\r\n  @State() private selectAllChecked: boolean;\r\n  @State() private selectedWorkflowInstanceIds: Array<string> = [];\r\n  @State() private searchTerm?: string;\r\n  @State() private currentPage: number = 0;\r\n  @State() private currentPageSize: number = WorkflowInstanceBrowser.DEFAULT_PAGE_SIZE;\r\n  @State() private selectedWorkflowDefinitionId?: string;\r\n  @State() private selectedStatus?: WorkflowStatus;\r\n  @State() private selectedSubStatus?: WorkflowSubStatus;\r\n  @State() private orderBy?: OrderBy;\r\n\r\n  async componentWillLoad() {\r\n    var persistedRequest = getRequest()\r\n\r\n    if (persistedRequest) {\r\n      // TODO: Persist search term, need to bind the value to the input\r\n      //this.searchTerm = persistedRequest.searchTerm\r\n      this.currentPage = persistedRequest.page\r\n      this.currentPageSize = persistedRequest.pageSize\r\n      this.orderBy = persistedRequest.orderBy\r\n      this.selectedWorkflowDefinitionId = persistedRequest.definitionId\r\n      this.selectedStatus = persistedRequest.status\r\n      this.selectedSubStatus = persistedRequest.subStatus\r\n    }\r\n\r\n    if(this.workflowDefinition != null)\r\n      this.selectedWorkflowDefinitionId = this.workflowDefinition.definitionId;\r\n\r\n    await this.loadWorkflowDefinitions();\r\n    await this.loadWorkflowInstances();\r\n  }\r\n\r\n  public render() {\r\n    const publishedOrLatestWorkflows = this.publishedOrLatestWorkflows;\r\n    const workflowInstances = this.workflowInstances;\r\n    const totalCount = workflowInstances.totalCount\r\n\r\n    const filterProps: FilterProps = {\r\n      pageSizeFilter: {\r\n        selectedPageSize: this.currentPageSize,\r\n        onChange: this.onPageSizeChanged\r\n      },\r\n      orderByFilter: {\r\n        selectedOrderBy: this.orderBy,\r\n        onChange: this.onOrderByChanged\r\n      },\r\n      statusFilter: {\r\n        selectedStatus: this.selectedStatus,\r\n        onChange: this.onWorkflowStatusChanged\r\n      },\r\n      subStatusFilter: {\r\n        selectedStatus: this.selectedSubStatus,\r\n        onChange: this.onWorkflowSubStatusChanged\r\n      },\r\n      workflowFilter: {\r\n        workflows: publishedOrLatestWorkflows,\r\n        selectedWorkflowDefinitionId: this.selectedWorkflowDefinitionId,\r\n        onChange: this.onWorkflowChanged\r\n      },\r\n      resetFilter: async () => {\r\n        this.resetPagination();\r\n        this.currentPageSize = WorkflowInstanceBrowser.DEFAULT_PAGE_SIZE;\r\n        this.selectedStatus = undefined\r\n        this.selectedSubStatus = undefined\r\n        this.orderBy = undefined\r\n        this.selectedWorkflowDefinitionId = undefined\r\n\r\n        await this.loadWorkflowInstances();\r\n      },\r\n      onBulkDelete: this.onDeleteManyClick,\r\n      onBulkCancel: this.onCancelManyClick\r\n    };\r\n\r\n    return (\r\n      <Host class=\"tw-block\">\r\n\r\n        <div class=\"tw-pt-4\">\r\n          <h2 class=\"tw-text-lg tw-font-medium tw-ml-4 tw-mb-2\">Workflow Instances</h2>\r\n\r\n          <Search onSearch={this.onSearch}/>\r\n          <Filter {...filterProps}/>\r\n\r\n          <div class=\"tw-align-middle tw-inline-block tw-min-w-full tw-border-b tw-border-gray-200\">\r\n            <table class=\"default-table\">\r\n              <thead>\r\n              <tr>\r\n                <th>\r\n                  <input type=\"checkbox\" value=\"true\" checked={this.getSelectAllState()}\r\n                         onChange={e => this.onSelectAllCheckChange(e)}\r\n                         ref={el => this.selectAllCheckbox = el}/>\r\n                </th>\r\n                <th><span class=\"lg:tw-pl-2\">ID</span></th>\r\n                <th>Correlation</th>\r\n                <th>Workflow</th>\r\n                <th class=\"tw-align-right\">Version</th>\r\n                <th>Name</th>\r\n                <th>Status</th>\r\n                <th>Created</th>\r\n                <th>Finished</th>\r\n                <th/>\r\n              </tr>\r\n              </thead>\r\n              <tbody class=\"tw-bg-white tw-divide-y tw-divide-gray-100\">\r\n              {workflowInstances.items.map(workflowInstance => {\r\n                const statusColor = getSubStatusColor(workflowInstance.subStatus);\r\n                const isSelected = this.selectedWorkflowInstanceIds.findIndex(x => x === workflowInstance.id) >= 0;\r\n                const workflow: WorkflowDefinitionSummary = publishedOrLatestWorkflows.find(x => x.definitionId == workflowInstance.definitionId);\r\n                const workflowName = !!workflow ? (workflow.name || 'Untitled') : '(Definition not found)';\r\n\r\n                return (\r\n                  <tr>\r\n                    <td>\r\n                      <input type=\"checkbox\" value={workflowInstance.id} checked={isSelected} onChange={e => this.onWorkflowInstanceCheckChange(e, workflowInstance)}/>\r\n                    </td>\r\n                    <td>\r\n                      <div class=\"tw-flex tw-items-center tw-space-x-3 lg:tw-pl-2\">\r\n                        <a onClick={e => this.onWorkflowInstanceClick(e, workflowInstance)} href=\"#\" class=\"tw-truncate hover:tw-text-gray-600\"><span>{workflowInstance.id}</span></a>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td>{workflowInstance.correlationId}</td>\r\n                    <td>{workflowName}</td>\r\n                    <td class=\"tw-align-right\">{workflowInstance.version}</td>\r\n                    <td>{workflowInstance.name}</td>\r\n                    <td>\r\n                      <div class=\"tw-flex tw-items-center tw-space-x-3 lg:tw-pl-2\">\r\n                        <div class={`tw-flex-shrink-0 tw-w-2.5 tw-h-2.5 tw-rounded-full ${statusColor}`}/>\r\n                        <span>{workflowInstance.status}</span>\r\n                      </div>\r\n                    </td>\r\n                    <td>{formatTimestamp(workflowInstance.createdAt, '-')}</td>\r\n                    <td>{formatTimestamp(workflowInstance.finishedAt, '-')}</td>\r\n                    <td class=\"tw-pr-6\">\r\n                      <elsa-context-menu menuItems={[\r\n                        {text: 'Edit', handler: e => this.onWorkflowInstanceClick(e, workflowInstance), icon: <EditIcon/>},\r\n                        {text: 'Delete', handler: e => this.onDeleteClick(e, workflowInstance), icon: <DeleteIcon/>}\r\n                      ]}/>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n              </tbody>\r\n            </table>\r\n            <elsa-pager page={this.currentPage} pageSize={this.currentPageSize} totalCount={totalCount} onPaginated={this.onPaginated}/>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  private onDeleteManyClick = async () => {\r\n    if(this.selectedWorkflowInstanceIds.length == 0)\r\n      return;\r\n\r\n    this.modalDialogService.show(\r\n      () => DefaultContents.Warning(\"Are you sure you want to delete selected workflow instances?\"),\r\n      {\r\n        actions: [DefaultModalActions.Delete(async () => {\r\n          await this.workflowInstancesApi.deleteMany({workflowInstanceIds: this.selectedWorkflowInstanceIds});\r\n          await this.loadWorkflowInstances();\r\n        }), DefaultModalActions.Cancel()],\r\n        modalType: ModalType.Confirmation\r\n      });\r\n  };\r\n\r\n  private onCancelManyClick = async () => {\r\n    if(this.selectedWorkflowInstanceIds.length == 0)\r\n      return;\r\n\r\n    this.modalDialogService.show(\r\n      () => DefaultContents.Warning(\"Are you sure you want to cancel selected workflow instances?\"),\r\n      {\r\n        actions: [DefaultModalActions.Yes(async () => {\r\n          await this.workflowInstancesApi.cancelMany({workflowInstanceIds: this.selectedWorkflowInstanceIds});\r\n          await this.loadWorkflowInstances();\r\n        }), DefaultModalActions.Cancel()],\r\n        modalType: ModalType.Confirmation\r\n      });\r\n  };\r\n\r\n  private resetPagination = () => {\r\n    this.currentPage = 0;\r\n    this.selectedWorkflowInstanceIds = [];\r\n  };\r\n\r\n  private async loadWorkflowInstances() {\r\n\r\n    const request: ListWorkflowInstancesRequest = {\r\n      searchTerm: this.searchTerm,\r\n      definitionId: this.selectedWorkflowDefinitionId,\r\n      status: this.selectedStatus,\r\n      subStatus: this.selectedSubStatus,\r\n      orderBy: this.orderBy,\r\n      orderDirection: OrderDirection.Descending,\r\n      page: this.currentPage,\r\n      pageSize: this.currentPageSize\r\n    };\r\n\r\n    persistRequest(request)\r\n    this.workflowInstances = await this.workflowInstancesApi.list(request);\r\n  }\r\n\r\n  private loadWorkflowDefinitions = async () => {\r\n    const versionOptions: VersionOptions = {allVersions: true};\r\n    const workflows = await this.workflowDefinitionsApi.list({versionOptions});\r\n    this.publishedOrLatestWorkflows = this.selectLatestWorkflows(workflows.items);\r\n  };\r\n\r\n  private getSelectAllState = () => {\r\n    const {items} = this.workflowInstances;\r\n    const selectedWorkflowInstanceIds = this.selectedWorkflowInstanceIds;\r\n    return items.findIndex(item => !selectedWorkflowInstanceIds.includes(item.id)) < 0;\r\n  }\r\n\r\n  private setSelectAllIndeterminateState = () => {\r\n    if (this.selectAllCheckbox) {\r\n      const selectedItems = this.workflowInstances.items.filter(item => this.selectedWorkflowInstanceIds.includes(item.id));\r\n      this.selectAllCheckbox.indeterminate = selectedItems.length != 0 && selectedItems.length != this.workflowInstances.items.length;\r\n    }\r\n  }\r\n\r\n  private selectLatestWorkflows = (workflows: Array<WorkflowDefinitionSummary>): Array<WorkflowDefinitionSummary> => {\r\n    const groups = _.groupBy(workflows, 'definitionId');\r\n    return _.map(groups, x => _.first(_.orderBy(x, 'version', 'desc')));\r\n  }\r\n\r\n  private onSearch = async (term: string) => {\r\n    this.searchTerm = term;\r\n    this.resetPagination();\r\n    await this.loadWorkflowInstances();\r\n  };\r\n\r\n  private onPageSizeChanged = async (pageSize: number) => {\r\n    this.currentPageSize = pageSize;\r\n    this.resetPagination();\r\n    await this.loadWorkflowInstances();\r\n  };\r\n\r\n  private onWorkflowChanged = async (definitionId: string) => {\r\n    this.selectedWorkflowDefinitionId = definitionId;\r\n    this.resetPagination();\r\n    await this.loadWorkflowInstances();\r\n  };\r\n\r\n  private onWorkflowStatusChanged = async (status: WorkflowStatus) => {\r\n    this.selectedStatus = status;\r\n    this.resetPagination();\r\n    await this.loadWorkflowInstances();\r\n  };\r\n\r\n  private onWorkflowSubStatusChanged = async (status: WorkflowSubStatus) => {\r\n    this.selectedSubStatus = status;\r\n    this.resetPagination();\r\n    await this.loadWorkflowInstances();\r\n  };\r\n\r\n  private onOrderByChanged = async (orderBy: OrderBy) => {\r\n    this.orderBy = orderBy;\r\n    await this.loadWorkflowInstances();\r\n  };\r\n\r\n  private async onDeleteClick(e: MouseEvent, workflowInstance: WorkflowInstanceSummary) {\r\n    // const result = await this.confirmDialog.show(t('DeleteConfirmationModel.Title'), t('DeleteConfirmationModel.Message'));\r\n    //\r\n    // if (!result)\r\n    //   return;\r\n    //\r\n\r\n    await this.workflowInstancesApi.delete(workflowInstance);\r\n    await this.loadWorkflowInstances();\r\n  }\r\n\r\n  private onWorkflowInstanceClick = async (e: MouseEvent, workflowInstance: WorkflowInstanceSummary) => {\r\n    e.preventDefault();\r\n    this.workflowInstanceSelected.emit(workflowInstance);\r\n  }\r\n\r\n  private onSelectAllCheckChange(e: Event) {\r\n    const checkBox = e.target as HTMLInputElement;\r\n    const isChecked = checkBox.checked;\r\n    this.selectAllChecked = isChecked;\r\n    this.selectedWorkflowInstanceIds = updateSelectedWorkflowInstances(isChecked, this.workflowInstances, this.selectedWorkflowInstanceIds);\r\n  }\r\n\r\n  private onWorkflowInstanceCheckChange(e: Event, workflowInstance: WorkflowInstanceSummary) {\r\n    const checkBox = e.target as HTMLInputElement;\r\n    const isChecked = checkBox.checked;\r\n\r\n    if (isChecked)\r\n      this.selectedWorkflowInstanceIds = [...this.selectedWorkflowInstanceIds, workflowInstance.id];\r\n    else\r\n      this.selectedWorkflowInstanceIds = this.selectedWorkflowInstanceIds.filter(x => x != workflowInstance.id);\r\n\r\n    this.setSelectAllIndeterminateState();\r\n  }\r\n\r\n  onPaginated = async (e: CustomEvent<PagerData>) => {\r\n    this.currentPage = e.detail.page;\r\n    await this.loadWorkflowInstances();\r\n  };\r\n}\r\n"],"version":3}