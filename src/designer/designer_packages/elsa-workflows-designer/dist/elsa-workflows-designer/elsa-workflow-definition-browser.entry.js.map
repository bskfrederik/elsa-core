{"file":"elsa-workflow-definition-browser.entry.esm.js","mappings":"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","names":["debounce"],"sources":["./src/modules/workflow-definitions/components/search.tsx","./src/modules/workflow-definitions/components/filter.tsx","./src/modules/workflow-definitions/services/utils.ts","./src/modules/workflow-definitions/services/lookup-persistence.ts","./src/modules/workflow-definitions/components/browser.tsx"],"sourcesContent":["import {FunctionalComponent, h} from \"@stencil/core\";\r\nimport {debounce} from 'lodash';\r\n\r\nexport interface SearchProps {\r\n  onSearch: (term: string) => void;\r\n}\r\n\r\nexport const Search: FunctionalComponent<SearchProps> = ({onSearch}) => {\r\n\r\n  const onSubmit = (e: Event) => {\r\n    e.preventDefault();\r\n    const form = e.target as HTMLFormElement;\r\n    const formData = new FormData(form);\r\n    const searchTerm: FormDataEntryValue = formData.get('searchTerm').toString();\r\n\r\n    onSearch(searchTerm);\r\n  }\r\n\r\n  const onSearchDebounced = debounce(onSearch, 200);\r\n\r\n  const onKeyUp = (e: KeyboardEvent) => {\r\n    const term = (e.target as HTMLInputElement).value;\r\n    onSearchDebounced(term);\r\n  };\r\n\r\n  return <div class=\"tw-relative tw-z-10 tw-flex-shrink-0 tw-flex tw-h-16 tw-bg-white tw-border-b tw-border-gray-200\">\r\n    <div class=\"tw-flex-1 tw-px-4 tw-flex tw-justify-between sm:tw-px-6 lg:tw-px-8\">\r\n      <div class=\"tw-flex-1 tw-flex\">\r\n        <form class=\"tw-w-full tw-flex md:tw-ml-0\" onSubmit={onSubmit}>\r\n          <label htmlFor=\"search_field\" class=\"tw-sr-only\">Search</label>\r\n          <div class=\"tw-relative tw-w-full tw-text-gray-400 focus-within:tw-text-gray-600\">\r\n            <div\r\n              class=\"tw-absolute tw-inset-y-0 tw-left-0 tw-flex tw-items-center tw-pointer-events-none\">\r\n              <svg class=\"tw-h-5 tw-w-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\r\n                      d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"/>\r\n              </svg>\r\n            </div>\r\n            <input name=\"searchTerm\"\r\n                   onKeyUp={onKeyUp}\r\n                   class=\"tw-block tw-w-full tw-h-full tw-pl-8 tw-pr-3 tw-py-2 tw-rounded-md tw-text-gray-900 tw-placeholder-cool-gray-500 focus:tw-placeholder-cool-gray-400 sm:tw-text-sm tw-border-0 focus:tw-outline-none focus:tw-ring-0\"\r\n                   placeholder=\"Search\"\r\n                   type=\"search\"/>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>;\r\n}\r\n","import { FunctionalComponent, h } from '@stencil/core';\r\nimport {DropdownButtonItem, DropdownButtonOrigin} from \"../../../components/shared/dropdown-button/models\";\r\nimport {BulkActionsIcon, OrderByIcon, PageSizeIcon} from \"../../../components/icons/tooling\";\r\nimport {WorkflowDefinitionsOrderBy} from \"../services/api\";\r\n\r\nexport interface PageSizeFilterProps {\r\n  selectedPageSize: number;\r\n  onChange: (pageSize: number) => void;\r\n}\r\n\r\nexport interface OrderByFilterProps {\r\n  selectedOrderBy?: WorkflowDefinitionsOrderBy;\r\n  onChange: (orderBy: WorkflowDefinitionsOrderBy) => void;\r\n}\r\n\r\nexport interface LabelFilterProps {\r\n  selectedLabels?: Array<string>;\r\n  onSelectedLabelsChanged: (e: CustomEvent<Array<string>>) => void;\r\n  buttonClass?: string;\r\n  containerClass?: string;\r\n}\r\n\r\nexport interface FilterProps extends BulkActionsProps {\r\n  pageSizeFilter: PageSizeFilterProps;\r\n  orderByFilter: OrderByFilterProps;\r\n  labelFilter: LabelFilterProps;\r\n}\r\n\r\nexport interface BulkActionsProps {\r\n  onBulkDelete: () => void;\r\n  onBulkPublish: () => void;\r\n  onBulkUnpublish: () => void;\r\n}\r\n\r\nexport const Filter: FunctionalComponent<FilterProps> = ({ pageSizeFilter, orderByFilter, onBulkDelete, onBulkPublish, onBulkUnpublish, labelFilter }) => {\r\n  return (\r\n    <div class=\"tw-p-8 tw-flex tw-content-end tw-justify-right tw-bg-white tw-space-x-4\">\r\n      <div class=\"tw-flex-shrink-0\">\r\n        <BulkActions onBulkDelete={onBulkDelete} onBulkPublish={onBulkPublish} onBulkUnpublish={onBulkUnpublish} />\r\n      </div>\r\n      <div class=\"tw-flex-1\">&nbsp;</div>\r\n\r\n      <PageSizeFilter {...pageSizeFilter} />\r\n\r\n      <OrderByFilter {...orderByFilter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst BulkActions: FunctionalComponent<BulkActionsProps> = ({ onBulkDelete, onBulkPublish, onBulkUnpublish }) => {\r\n  const bulkActions = [\r\n    {\r\n      text: 'Delete',\r\n      name: 'Delete',\r\n    },\r\n    {\r\n      text: 'Publish',\r\n      name: 'Publish',\r\n    },\r\n    {\r\n      text: 'Unpublish',\r\n      name: 'Unpublish',\r\n    },\r\n  ];\r\n\r\n  const onBulkActionSelected = (e: CustomEvent<DropdownButtonItem>) => {\r\n    const action = e.detail;\r\n    switch (action.name) {\r\n      case 'Delete':\r\n        onBulkDelete();\r\n        break;\r\n      case 'Publish':\r\n        onBulkPublish();\r\n        break;\r\n      case 'Unpublish':\r\n        onBulkUnpublish();\r\n        break;\r\n\r\n      default:\r\n        action.handler();\r\n    }\r\n  };\r\n\r\n  return <elsa-dropdown-button text=\"Bulk Actions\"\r\n                               items={bulkActions}\r\n                               theme=\"Secondary\"\r\n                               icon={<BulkActionsIcon />}\r\n                               origin={DropdownButtonOrigin.TopLeft}\r\n                               onItemSelected={onBulkActionSelected} />;\r\n};\r\n\r\nconst PageSizeFilter: FunctionalComponent<PageSizeFilterProps> = ({ selectedPageSize, onChange }) => {\r\n  const selectedPageSizeText = `Page size: ${selectedPageSize}`;\r\n  const pageSizes: Array<number> = [5, 10, 15, 20, 30, 50, 100];\r\n\r\n  const items: Array<DropdownButtonItem> = pageSizes.map(x => {\r\n    const text = '' + x;\r\n    return { text: text, isSelected: x == selectedPageSize, value: x };\r\n  });\r\n\r\n  const onPageSizeChanged = (e: CustomEvent<DropdownButtonItem>) => onChange(parseInt(e.detail.value));\r\n\r\n  return <elsa-dropdown-button text={selectedPageSizeText} items={items} theme=\"Secondary\" icon={<PageSizeIcon />} origin={DropdownButtonOrigin.TopRight} onItemSelected={onPageSizeChanged} />;\r\n};\r\n\r\nconst OrderByFilter: FunctionalComponent<OrderByFilterProps> = ({ selectedOrderBy, onChange }) => {\r\n  const selectedOrderByText = !!selectedOrderBy ? `Ordered by: ${selectedOrderBy}` : 'Order by';\r\n  const orderByValues: Array<WorkflowDefinitionsOrderBy> = [WorkflowDefinitionsOrderBy.Name, WorkflowDefinitionsOrderBy.Created];\r\n  const items: Array<DropdownButtonItem> = orderByValues.map(x => ({ text: x, value: x, isSelected: x == selectedOrderBy }));\r\n  const onOrderByChanged = (e: CustomEvent<DropdownButtonItem>) => onChange(e.detail.value);\r\n\r\n  return <elsa-dropdown-button text={selectedOrderByText} items={items} theme=\"Secondary\" icon={<OrderByIcon />} origin={DropdownButtonOrigin.TopRight} onItemSelected={onOrderByChanged} />;\r\n};\r\n","import {PagedList} from \"../../../models\";\r\nimport {WorkflowDefinitionSummary} from \"../models/entities\";\r\n\r\nexport function updateSelectedWorkflowDefinitions(isChecked: boolean, workflowDefinitions: PagedList<WorkflowDefinitionSummary>, selectedWorkflowDefinitionIds: Array<string>) {\r\n  const currentItems = workflowDefinitions.items.filter(item =>!item.isReadonly).map(x => x.definitionId);\r\n\r\n  return isChecked\r\n    ? selectedWorkflowDefinitionIds.concat(currentItems.filter(item => !selectedWorkflowDefinitionIds.includes(item)))\r\n    : selectedWorkflowDefinitionIds.filter(item => !currentItems.includes(item));\r\n}\r\n","import { ListWorkflowDefinitionsRequest } from \"./api\";\r\n\r\nconst key = 'LS/wfDefinitionBrowser';\r\n\r\nexport function getRequest(): ListWorkflowDefinitionsRequest | undefined {\r\n  var json = localStorage.getItem(key);\r\n\r\n  if (!json) return;\r\n\r\n  return JSON.parse(json);\r\n}\r\nexport function persistRequest(request: ListWorkflowDefinitionsRequest) {\r\n  localStorage.setItem(key, JSON.stringify(request));\r\n}\r\n","import {Component, Event, EventEmitter, h, Host, Method, Prop, State, Watch} from '@stencil/core';\r\nimport {OrderBy, PagedList, VersionOptions} from '../../../models';\r\nimport {Container} from 'typedi';\r\nimport {DeleteIcon, EditIcon, PublishIcon, UnPublishIcon} from '../../../components/icons/tooling';\r\nimport { Search } from \"./search\";\r\nimport { Filter, FilterProps } from './filter';\r\nimport {PagerData} from '../../../components/shared/pager/pager';\r\nimport {updateSelectedWorkflowDefinitions} from '../services/utils';\r\nimport {WorkflowDefinitionSummary} from \"../models/entities\";\r\nimport {ListWorkflowDefinitionsRequest, WorkflowDefinitionsApi, WorkflowDefinitionsOrderBy} from \"../services/api\";\r\nimport {ModalDialogService, DefaultModalActions, DefaultContents, ModalType} from \"../../../components/shared/modal-dialog\";\r\nimport {ActivityDescriptorManager} from \"../../../services\";\r\nimport { getRequest, persistRequest } from '../services/lookup-persistence';\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-definition-browser',\r\n  shadow: false,\r\n})\r\nexport class WorkflowDefinitionBrowser {\r\n  static readonly DEFAULT_PAGE_SIZE = 15;\r\n  static readonly MIN_PAGE_SIZE = 5;\r\n  static readonly MAX_PAGE_SIZE = 100;\r\n  static readonly START_PAGE = 0;\r\n\r\n  private readonly api: WorkflowDefinitionsApi;\r\n  private selectAllCheckbox: HTMLInputElement;\r\n  private readonly modalDialogService: ModalDialogService;\r\n  private readonly activityDescriptorManager: ActivityDescriptorManager;\r\n\r\n  constructor() {\r\n    this.api = Container.get(WorkflowDefinitionsApi);\r\n    this.modalDialogService = Container.get(ModalDialogService);\r\n    this.activityDescriptorManager = Container.get(ActivityDescriptorManager);\r\n  }\r\n\r\n  @Event() workflowDefinitionSelected: EventEmitter<WorkflowDefinitionSummary>;\r\n  @Event() workflowInstancesSelected: EventEmitter<WorkflowDefinitionSummary>;\r\n  @Event() public newWorkflowDefinitionSelected: EventEmitter;\r\n  @State() private workflowDefinitions: PagedList<WorkflowDefinitionSummary> = {items: [], totalCount: 0};\r\n  @State() private publishedWorkflowDefinitions: PagedList<WorkflowDefinitionSummary> = {items: [], totalCount: 0};\r\n  @State() private selectedWorkflowDefinitionIds: Array<string> = [];\r\n  @State() private currentPage: number = 0;\r\n  @State() private currentPageSize: number = WorkflowDefinitionBrowser.DEFAULT_PAGE_SIZE;\r\n  @State() private orderBy?: WorkflowDefinitionsOrderBy;\r\n  @State() private labels?: string[];\r\n  @State() private selectAllChecked: boolean;\r\n  @State() private searchTerm?: string;\r\n\r\n  async componentWillLoad() {\r\n    const persistedRequest = getRequest();\r\n\r\n    if (persistedRequest) {\r\n      this.currentPage = persistedRequest.page\r\n      this.currentPageSize = persistedRequest.pageSize\r\n      this.orderBy = persistedRequest.orderBy\r\n    }\r\n\r\n    await this.loadWorkflowDefinitions();\r\n  }\r\n\r\n  private onNewDefinitionClick = async () => {\r\n    this.newWorkflowDefinitionSelected.emit();\r\n  };\r\n\r\n  private onSearch = async (term: string) => {\r\n    this.searchTerm = term;\r\n    this.resetPagination();\r\n    await this.loadWorkflowDefinitions();\r\n  };\r\n\r\n\r\n  private async onPublishClick(e: MouseEvent, workflowDefinition: WorkflowDefinitionSummary) {\r\n    await this.api.publish(workflowDefinition);\r\n    await this.loadWorkflowDefinitions();\r\n  }\r\n\r\n  private async onUnPublishClick(e: MouseEvent, workflowDefinition: WorkflowDefinitionSummary) {\r\n    await this.api.retract(workflowDefinition);\r\n    await this.loadWorkflowDefinitions();\r\n  }\r\n\r\n  private async onDeleteClick(e: MouseEvent, workflowDefinition: WorkflowDefinitionSummary) {\r\n    this.modalDialogService.show(\r\n      () => DefaultContents.Warning(\"Are you sure you want to delete this workflow definition?\"),\r\n      {\r\n        actions: [DefaultModalActions.Delete(async () => {\r\n          await this.api.delete(workflowDefinition);\r\n          await this.loadWorkflowDefinitions();\r\n          await this.activityDescriptorManager.refresh();\r\n        }), DefaultModalActions.Cancel()],\r\n        modalType: ModalType.Confirmation\r\n      });\r\n  }\r\n\r\n  private onDeleteManyClick = async () => {\r\n    if(this.selectedWorkflowDefinitionIds.length == 0)\r\n      return;\r\n\r\n    this.modalDialogService.show(\r\n      () => DefaultContents.Warning(\"Are you sure you want to delete selected workflow definitions?\"),\r\n      {\r\n        actions: [DefaultModalActions.Delete(async () => {\r\n          await this.api.deleteMany({definitionIds: this.selectedWorkflowDefinitionIds});\r\n          await this.loadWorkflowDefinitions();\r\n          await this.activityDescriptorManager.refresh();\r\n        }), DefaultModalActions.Cancel()],\r\n        modalType: ModalType.Confirmation\r\n      });\r\n  };\r\n\r\n  private onPublishManyClick = async () => {\r\n    if(this.selectedWorkflowDefinitionIds.length == 0)\r\n      return;\r\n\r\n    this.modalDialogService.show(\r\n      () => DefaultContents.Warning(\"Are you sure you want to publish selected workflow definitions?\"),\r\n      {\r\n        actions: [DefaultModalActions.Publish(async () => {\r\n          await this.api.publishMany({definitionIds: this.selectedWorkflowDefinitionIds});\r\n          await this.loadWorkflowDefinitions();\r\n        }), DefaultModalActions.Cancel()],\r\n        modalType: ModalType.Confirmation\r\n      });\r\n  };\r\n\r\n  private onUnpublishManyClick = async () => {\r\n    if(this.selectedWorkflowDefinitionIds.length == 0)\r\n      return;\r\n\r\n    this.modalDialogService.show(\r\n      () => DefaultContents.Warning(\"Are you sure you want to unpublish selected workflow definitions?\"),\r\n      {\r\n        actions: [DefaultModalActions.Unpublish(async () => {\r\n          await this.api.unpublishMany({definitionIds: this.selectedWorkflowDefinitionIds});\r\n          await this.loadWorkflowDefinitions();\r\n        }), DefaultModalActions.Cancel()],\r\n        modalType: ModalType.Confirmation\r\n      });\r\n  };\r\n\r\n  private onWorkflowDefinitionClick = async (e: MouseEvent, workflowDefinition: WorkflowDefinitionSummary) => {\r\n    e.preventDefault();\r\n    this.workflowDefinitionSelected.emit(workflowDefinition);\r\n  };\r\n\r\n  private onWorkflowInstancesClick = async (e: MouseEvent, workflowDefinition: WorkflowDefinitionSummary) => {\r\n    e.preventDefault();\r\n    this.workflowInstancesSelected.emit(workflowDefinition);\r\n  };\r\n\r\n  private async loadWorkflowDefinitions() {\r\n\r\n    // TODO: Load only json-based workflow definitions for now.\r\n    // Later, also allow CLR-based workflows to be \"edited\" (publish / unpublish / position activities / set variables, etc.)\r\n    const materializerName = 'Json';\r\n\r\n    const request: ListWorkflowDefinitionsRequest = {\r\n      searchTerm: this.searchTerm,\r\n      materializerName,\r\n      page: this.currentPage,\r\n      pageSize: this.currentPageSize,\r\n      versionOptions: {isLatest: true},\r\n      orderBy: this.orderBy,\r\n      label: this.labels,\r\n    };\r\n    persistRequest(request)\r\n\r\n    const latestWorkflowDefinitions = await this.api.list(request);\r\n    const unpublishedWorkflowDefinitionIds = latestWorkflowDefinitions.items.filter(x => !x.isPublished).map(x => x.definitionId);\r\n\r\n    this.publishedWorkflowDefinitions = await this.api.list({\r\n      materializerName,\r\n      definitionIds: unpublishedWorkflowDefinitionIds,\r\n      versionOptions: {isPublished: true},\r\n    });\r\n\r\n    this.workflowDefinitions = latestWorkflowDefinitions;\r\n  }\r\n\r\n  private onPaginated = async (e: CustomEvent<PagerData>) => {\r\n    this.currentPage = e.detail.page;\r\n    await this.loadWorkflowDefinitions();\r\n  };\r\n\r\n  private onPageSizeChanged = async (pageSize: number) => {\r\n    this.currentPageSize = pageSize;\r\n    this.resetPagination();\r\n    await this.loadWorkflowDefinitions();\r\n  };\r\n\r\n  private onOrderByChanged = async (orderBy: WorkflowDefinitionsOrderBy) => {\r\n    this.orderBy = orderBy;\r\n    await this.loadWorkflowDefinitions();\r\n  };\r\n\r\n  private onLabelChange = async (e: CustomEvent<Array<string>>) => {\r\n    this.labels = e.detail;\r\n    await this.loadWorkflowDefinitions();\r\n  };\r\n\r\n  private resetPagination = () => {\r\n    this.currentPage = 0;\r\n    this.selectedWorkflowDefinitionIds = [];\r\n  };\r\n\r\n  private getSelectAllState = () => {\r\n    const {items} = this.workflowDefinitions;\r\n    const selectedWorkflowInstanceIds = this.selectedWorkflowDefinitionIds;\r\n    return items.findIndex(item => !selectedWorkflowInstanceIds.includes(item.definitionId)) < 0;\r\n  };\r\n\r\n  private setSelectAllIndeterminateState = () => {\r\n    if (this.selectAllCheckbox) {\r\n      const selectedItems = this.workflowDefinitions.items.filter(item => this.selectedWorkflowDefinitionIds.includes(item.definitionId));\r\n      this.selectAllCheckbox.indeterminate = selectedItems.length != 0 && selectedItems.length != this.workflowDefinitions.items.length;\r\n    }\r\n  };\r\n\r\n  private onWorkflowDefinitionCheckChange(e: Event, workflowDefinition: WorkflowDefinitionSummary) {\r\n    const checkBox = e.target as HTMLInputElement;\r\n    const isChecked = checkBox.checked;\r\n\r\n    if (isChecked) this.selectedWorkflowDefinitionIds = [...this.selectedWorkflowDefinitionIds, workflowDefinition.definitionId];\r\n    else this.selectedWorkflowDefinitionIds = this.selectedWorkflowDefinitionIds.filter(x => x != workflowDefinition.definitionId);\r\n\r\n    this.setSelectAllIndeterminateState();\r\n  }\r\n\r\n  private onSelectAllCheckChange(e: Event) {\r\n    const checkBox = e.target as HTMLInputElement;\r\n    const isChecked = checkBox.checked;\r\n    this.selectAllChecked = isChecked;\r\n    this.selectedWorkflowDefinitionIds = updateSelectedWorkflowDefinitions(isChecked, this.workflowDefinitions, this.selectedWorkflowDefinitionIds);\r\n  }\r\n\r\n  render() {\r\n    const workflowDefinitions = this.workflowDefinitions;\r\n    const publishedWorkflowDefinitions = this.publishedWorkflowDefinitions.items;\r\n    const totalCount = workflowDefinitions.totalCount;\r\n\r\n    const filterProps: FilterProps = {\r\n      pageSizeFilter: {\r\n        selectedPageSize: this.currentPageSize,\r\n        onChange: this.onPageSizeChanged,\r\n      },\r\n      orderByFilter: {\r\n        selectedOrderBy: this.orderBy,\r\n        onChange: this.onOrderByChanged,\r\n      },\r\n      labelFilter: {\r\n        selectedLabels: this.labels,\r\n        onSelectedLabelsChanged: this.onLabelChange,\r\n        buttonClass: 'tw-text-gray-500 hover:tw-text-gray-300',\r\n        containerClass: 'tw-mt-1.5',\r\n      },\r\n      onBulkDelete: this.onDeleteManyClick,\r\n      onBulkPublish: this.onPublishManyClick,\r\n      onBulkUnpublish: this.onUnpublishManyClick\r\n    };\r\n\r\n    return (\r\n      <Host class=\"tw-block\">\r\n        <div class=\"tw-pt-4\">\r\n          <h2 class=\"tw-text-lg tw-font-medium tw-ml-4 tw-mb-2\">Workflow Definitions</h2>\r\n\r\n          <Search onSearch={this.onSearch} />\r\n          <Filter {...filterProps} />\r\n          <div class=\"tw-align-middle tw-inline-block tw-min-w-full tw-border-b tw-border-gray-200\">\r\n            <table class=\"default-table\">\r\n              <thead>\r\n              <tr>\r\n                <th>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    value=\"true\"\r\n                    checked={this.getSelectAllState()}\r\n                    onChange={e => this.onSelectAllCheckChange(e)}\r\n                    ref={el => (this.selectAllCheckbox = el)}\r\n                  />\r\n                </th>\r\n                <th>\r\n                  <span class=\"lg:tw-pl-2\">Name</span>\r\n                </th>\r\n                <th>Instances</th>\r\n                <th class=\"tw-align-right\">Latest Version</th>\r\n                <th class=\"tw-align-right\">Published Version</th>\r\n                <th/>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              {workflowDefinitions.items.map(workflowDefinition => {\r\n                const latestVersionNumber = workflowDefinition.version;\r\n                const {isPublished} = workflowDefinition;\r\n                const publishedVersion: WorkflowDefinitionSummary = isPublished\r\n                  ? workflowDefinition\r\n                  : publishedWorkflowDefinitions.find(x => x.definitionId == workflowDefinition.definitionId);\r\n                const publishedVersionNumber = !!publishedVersion ? publishedVersion.version : '-';\r\n\r\n                const isReadonly = workflowDefinition.isReadonly;\r\n\r\n                const isSelected = this.selectedWorkflowDefinitionIds.findIndex(x => x === workflowDefinition.definitionId) >= 0;\r\n                let workflowDisplayName = workflowDefinition.name;\r\n\r\n                if (!workflowDisplayName || workflowDisplayName.trim().length == 0) workflowDisplayName = 'Untitled';\r\n\r\n                return (\r\n                  <tr>\r\n                    <td>\r\n                      <input\r\n                        disabled={isReadonly}\r\n                        type=\"checkbox\"\r\n                        value={workflowDefinition.definitionId}\r\n                        checked={isSelected}\r\n                        onChange={e => this.onWorkflowDefinitionCheckChange(e, workflowDefinition)}\r\n                      />\r\n                    </td>\r\n                    <td>\r\n                      <div class=\"tw-flex tw-items-center tw-space-x-3 lg:tw-pl-2\">\r\n                        <a onClick={e => this.onWorkflowDefinitionClick(e, workflowDefinition)} href=\"#\" class=\"tw-truncate hover:tw-text-gray-600\">\r\n                          <span>{workflowDisplayName}</span>\r\n                        </a>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td>\r\n                      <div class=\"tw-flex tw-items-center tw-space-x-3 lg:tw-pl-2\">\r\n                      <a onClick={e => this.onWorkflowInstancesClick(e, workflowDefinition)} href=\"#\" class=\"tw-truncate hover:tw-text-gray-600\">\r\n                          Instances\r\n                        </a>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td class=\"tw-align-right\">{latestVersionNumber}</td>\r\n                    <td class=\"tw-align-right\">{publishedVersionNumber}</td>\r\n                    <td class=\"tw-pr-6\">\r\n                      {isReadonly ? \"\" :\r\n                        <elsa-context-menu\r\n                          menuItems={[\r\n                            { text: 'Edit', handler: e => this.onWorkflowDefinitionClick(e, workflowDefinition), icon: <EditIcon /> },\r\n                            isPublished\r\n                              ? { text: 'Unpublish', handler: e => this.onUnPublishClick(e, workflowDefinition), icon: <UnPublishIcon /> }\r\n                              : {\r\n                                text: 'Publish',\r\n                                handler: e => this.onPublishClick(e, workflowDefinition),\r\n                                icon: <PublishIcon />,\r\n                              },\r\n                            { text: 'Delete', handler: e => this.onDeleteClick(e, workflowDefinition), icon: <DeleteIcon /> },\r\n                          ]}\r\n                        />}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n              </tbody>\r\n            </table>\r\n            <elsa-pager page={this.currentPage} pageSize={this.currentPageSize} totalCount={totalCount} onPaginated={this.onPaginated}/>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}