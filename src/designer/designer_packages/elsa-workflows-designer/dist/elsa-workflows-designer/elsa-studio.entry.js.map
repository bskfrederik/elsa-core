{"file":"elsa-studio.entry.esm.js","mappings":";;;;;;;;;;;;;;;AAAA,MAAM,SAAS,GAAG,gIAAgI;;MCerI,MAAM;EAKjB;;;;;;;IACE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IACxC,IAAI,CAAC,yBAAyB,GAAG,SAAS,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;IAC1E,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;GACrD;EAUO,eAAe,CAAC,KAAa;IACnC,MAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;IAC/C,QAAQ,CAAC,WAAW,GAAG,KAAK,CAAC;GAC9B;EAGO,mBAAmB,CAAC,KAAa;IACvC,MAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;IACrD,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC;GAChC;EAED,MAAM,iBAAiB;IACrB,MAAM,cAAc,GAAG,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;IACrD,MAAM,OAAO,GAA8B,EAAC,SAAS,EAAE,SAAS,EAAE,cAAc,EAAC,CAAC;IAClF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAEhC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC7C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACrCA,KAAY,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC;IAC5D,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;IAC/D,MAAM,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;;IAGvC,MAAM,WAAW,GAAG,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAE/C,IAAI,IAAI,CAAC,WAAW,IAAI,WAAW,CAAC,aAAa,EAAE,EAAE;MACnD,MAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;MACzC,MAAM,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;KAC9C;GACF;EAED,MAAM;IACJ,OAAO,EAAC,IAAI,QACV,gCAAwB,EACxB,WAAK,KAAK,EAAC,qBAAqB,IAC7BC,OAAoB,CAAC,sBAAsB,EAAE,CAC1C,EACLA,OAAoB,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,IAAI,KAAK,EAAE,CAAC,EAC3D,sCAA8B,CACzB,CAAC;GACT;;;;;;;;;;;","names":["optionsStore","studioComponentStore"],"sources":["./src/components/studio/studio.css?tag=elsa-studio","./src/components/studio/studio.tsx"],"sourcesContent":[":host {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.elsa-studio-content {\r\n  position: absolute;\r\n  top: 64px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n","import {Component, Element, EventEmitter, h, Host, Prop, Watch, Event} from '@stencil/core';\r\nimport 'reflect-metadata';\r\nimport {Container} from 'typedi';\r\nimport {AuthContext, EventBus, PluginRegistry, ServerSettings} from '../../services';\r\nimport {MonacoEditorSettings} from \"../../services/monaco-editor-settings\";\r\nimport {WorkflowDefinitionManager} from \"../../modules/workflow-definitions/services/manager\";\r\nimport {EventTypes} from \"../../models\";\r\nimport studioComponentStore from \"../../data/studio-component-store\";\r\nimport optionsStore from '../../data/designer-options-store';\r\nimport {StudioInitializingContext} from \"../../models/studio\";\r\n\r\n@Component({\r\n  tag: 'elsa-studio',\r\n  styleUrl: 'studio.css',\r\n})\r\nexport class Studio {\r\n  private readonly eventBus: EventBus;\r\n  private readonly workflowDefinitionManager: WorkflowDefinitionManager;\r\n  private readonly pluginRegistry: PluginRegistry;\r\n\r\n  constructor() {\r\n    this.eventBus = Container.get(EventBus);\r\n    this.workflowDefinitionManager = Container.get(WorkflowDefinitionManager);\r\n    this.pluginRegistry = Container.get(PluginRegistry);\r\n  }\r\n\r\n  @Element() private el: HTMLElsaStudioElement;\r\n  @Prop({attribute: 'server'}) serverUrl: string;\r\n  @Prop({attribute: 'monaco-lib-path'}) monacoLibPath: string;\r\n  @Prop({attribute: 'enable-flexible-ports'}) enableFlexiblePorts: boolean;\r\n  @Prop({attribute: 'disable-auth'}) disableAuth: boolean;\r\n  @Event() initializing: EventEmitter<StudioInitializingContext>;\r\n\r\n  @Watch('serverUrl')\r\n  private handleServerUrl(value: string) {\r\n    const settings = Container.get(ServerSettings);\r\n    settings.baseAddress = value;\r\n  }\r\n\r\n  @Watch('monacoLibPath')\r\n  private handleMonacoLibPath(value: string) {\r\n    const settings = Container.get(MonacoEditorSettings);\r\n    settings.monacoLibPath = value;\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    const pluginRegistry = Container.get(PluginRegistry);\r\n    const context: StudioInitializingContext = {container: Container, pluginRegistry};\r\n    this.initializing.emit(context);\r\n\r\n    this.handleMonacoLibPath(this.monacoLibPath);\r\n    this.handleServerUrl(this.serverUrl);\r\n    optionsStore.enableFlexiblePorts = this.enableFlexiblePorts;\r\n    await this.eventBus.emit(EventTypes.Studio.Initializing, this);\r\n    await this.pluginRegistry.initialize();\r\n\r\n    // If we have a valid session, emit the signed in event so that descriptors will be loaded.\r\n    const authContext = Container.get(AuthContext);\r\n\r\n    if (this.disableAuth || authContext.getIsSignedIn()) {\r\n      const eventBus = Container.get(EventBus);\r\n      await eventBus.emit(EventTypes.Auth.SignedIn)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <Host>\r\n      <elsa-workflow-toolbar/>\r\n      <div class=\"elsa-studio-content\">\r\n        {studioComponentStore.activeComponentFactory()}\r\n      </div>\r\n      {studioComponentStore.modalComponents.map(modal => modal())}\r\n      <elsa-modal-dialog-container/>\r\n    </Host>;\r\n  }\r\n}\r\n"],"version":3}