{"version":3,"names":["OutputPicker","this","onExpressionChanged","e","inputContext","inputChanged","detail","expression","syntax","onChange","inputElement","target","outputName","value","SyntaxNames","Literal","render","inputDescriptor","fieldName","name","fieldId","displayName","description","input","getInputPropertyValue","_a","_c","_b","type","defaultSyntax","h","WorkflowDefinitionTunnel","Consumer","workflowDefinition","outputs","label","hint","id","map","output","isSelected","selected"],"sources":["./src/components/inputs/output-picker.tsx"],"sourcesContent":["import {Component, Prop, h} from '@stencil/core';\r\nimport {LiteralExpression, SyntaxNames, Variable} from \"../../models\";\r\nimport {ActivityInputContext} from \"../../services/activity-input-driver\";\r\nimport {getInputPropertyValue, getPropertyValue} from \"../../utils\";\r\nimport {FormEntry} from \"../shared/forms/form-entry\";\r\nimport WorkflowDefinitionTunnel from \"../../modules/workflow-definitions/state\";\r\nimport {OutputDefinition} from \"../../modules/workflow-definitions/models/entities\";\r\nimport {ExpressionChangedArs} from \"../shared/input-control-switch/input-control-switch\";\r\n\r\n@Component({\r\n  tag: 'elsa-output-picker-input',\r\n  shadow: false\r\n})\r\nexport class OutputPicker {\r\n  @Prop() public inputContext: ActivityInputContext;\r\n\r\n  public render() {\r\n    const inputContext = this.inputContext;\r\n    const inputDescriptor = inputContext.inputDescriptor;\r\n    const fieldName = inputDescriptor.name;\r\n    const fieldId = inputDescriptor.name;\r\n    const displayName = inputDescriptor.displayName;\r\n    const description = inputDescriptor.description;\r\n    const input = getInputPropertyValue(inputContext);\r\n    const value = (input?.expression as LiteralExpression)?.value;\r\n    const syntax = input?.expression?.type ?? inputDescriptor.defaultSyntax;\r\n\r\n    return (\r\n      <WorkflowDefinitionTunnel.Consumer>\r\n        {({workflowDefinition}) => {\r\n          let outputs: OutputDefinition[] = workflowDefinition?.outputs ?? [];\r\n          outputs = [null, ...outputs];\r\n          return <elsa-input-control-switch label={displayName} hint={description} syntax={syntax} expression={value} onExpressionChanged={this.onExpressionChanged}>\r\n            <select id={fieldId} name={fieldName} onChange={e => this.onChange(e)}>\r\n              {outputs.map((output: OutputDefinition) => {\r\n                const outputName = output?.name;\r\n                const displayName = output?.displayName ?? '';\r\n                const isSelected = outputName == value;\r\n                return <option value={outputName} selected={isSelected}>{displayName}</option>;\r\n              })}\r\n            </select>\r\n          </elsa-input-control-switch>\r\n        }}\r\n      </WorkflowDefinitionTunnel.Consumer>\r\n    );\r\n  }\r\n\r\n  private onExpressionChanged = (e: CustomEvent<ExpressionChangedArs>) => {\r\n    this.inputContext.inputChanged(e.detail.expression, e.detail.syntax);\r\n  }\r\n\r\n  private onChange = (e: Event) => {\r\n    const inputElement = e.target as HTMLSelectElement;\r\n    const outputName = inputElement.value;\r\n    this.inputContext.inputChanged(outputName, SyntaxNames.Literal);\r\n  }\r\n}\r\n"],"mappings":"wSAaaA,EAAY,M,yBAkCfC,KAAAC,oBAAuBC,IAC7BF,KAAKG,aAAaC,aAAaF,EAAEG,OAAOC,WAAYJ,EAAEG,OAAOE,OAAO,EAG9DP,KAAAQ,SAAYN,IAClB,MAAMO,EAAeP,EAAEQ,OACvB,MAAMC,EAAaF,EAAaG,MAChCZ,KAAKG,aAAaC,aAAaO,EAAYE,EAAYC,QAAQ,E,4BAtC1DC,S,UACL,MAAMZ,EAAeH,KAAKG,aAC1B,MAAMa,EAAkBb,EAAaa,gBACrC,MAAMC,EAAYD,EAAgBE,KAClC,MAAMC,EAAUH,EAAgBE,KAChC,MAAME,EAAcJ,EAAgBI,YACpC,MAAMC,EAAcL,EAAgBK,YACpC,MAAMC,EAAQC,EAAsBpB,GACpC,MAAMS,GAAQY,EAACF,IAAK,MAALA,SAAK,SAALA,EAAOhB,cAAgC,MAAAkB,SAAA,SAAAA,EAAEZ,MACxD,MAAML,GAASkB,GAAAC,EAAAJ,IAAK,MAALA,SAAK,SAALA,EAAOhB,cAAU,MAAAoB,SAAA,SAAAA,EAAEC,QAAI,MAAAF,SAAA,EAAAA,EAAIT,EAAgBY,cAE1D,OACEC,EAACC,EAAyBC,SAAQ,MAC/B,EAAEC,yB,MACD,IAAIC,GAA8BT,EAAAQ,IAAkB,MAAlBA,SAAkB,SAAlBA,EAAoBC,WAAO,MAAAT,SAAA,EAAAA,EAAI,GACjES,EAAU,CAAC,QAASA,GACpB,OAAOJ,EAAA,6BAA2BK,MAAOd,EAAae,KAAMd,EAAad,OAAQA,EAAQD,WAAYM,EAAOX,oBAAqBD,KAAKC,qBACpI4B,EAAA,UAAQO,GAAIjB,EAASD,KAAMD,EAAWT,SAAUN,GAAKF,KAAKQ,SAASN,IAChE+B,EAAQI,KAAKC,I,MACZ,MAAM3B,EAAa2B,IAAM,MAANA,SAAM,SAANA,EAAQpB,KAC3B,MAAME,GAAcI,EAAAc,IAAM,MAANA,SAAM,SAANA,EAAQlB,eAAW,MAAAI,SAAA,EAAAA,EAAI,GAC3C,MAAMe,EAAa5B,GAAcC,EACjC,OAAOiB,EAAA,UAAQjB,MAAOD,EAAY6B,SAAUD,GAAanB,EAAqB,KAGxD,G"}